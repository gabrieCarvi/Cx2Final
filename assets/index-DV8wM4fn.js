import{i as Ea,g as Ks,a as Fa,r as a,o as Da,j as e,d as $,b as De,c as G,e as ne,f as ea,s as cs,G as Aa,h as Ma,u as sa,k as Pa,L as He,N as Is,P as is,l as Me,q as ye,w as Oe,m as Le,n as Fe,p as ke,t as qe,v as K,x as Re,y as Pe,z as Ae,A as Ne,B as we,C as Ie,D as ds,E as ms,F as us,H as hs,I as aa,J as xs,K as bs,M as ta,O as ps,Q as gs,S as ia,R as js,T as es,U as fs,V as Ns,W as Ve,X as Ia,Y as Ls,Z as La,_ as Ra,$ as pe,a0 as $a}from"./vendor-CZS1hXIJ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();const za={apiKey:"AIzaSyDtO6GisGJP6gtbtTz3Gmdz0cGyp-id46w",authDomain:"tics-cc-2024.firebaseapp.com",projectId:"tics-cc-2024",storageBucket:"tics-cc-2024.appspot.com",messagingSenderId:"345093255804",appId:"1:345093255804:web:9c763d8852934fef7a8ff9"},vs=Ea(za),We=Ks(vs),F=Fa(vs),ss=a.createContext(),Ta=({children:s})=>{const[r,t]=a.useState(null),[n,i]=a.useState(!0);return a.useEffect(()=>{const l=localStorage.getItem("user");l&&t(JSON.parse(l));const o=Da(We,async c=>{if(i(!0),c)try{const p=$(F,"users",c.uid),b=await De(p);let m={uid:c.uid,email:c.email,rol:null};b.exists()&&(m={...m,...b.data()});const j=G(F,"users",c.uid,"rol");(await ne(j)).forEach(h=>{const d=h.data();d.rol&&(m.rol=d.rol)}),localStorage.setItem("user",JSON.stringify(m)),t(m)}catch(p){console.error("‚ùå Error al obtener datos del usuario o su rol:",p)}else localStorage.removeItem("user"),t(null);i(!1)});return()=>o()},[]),e.jsx(ss.Provider,{value:{currentUser:r,loading:n},children:s})},Ba=()=>a.useContext(ss),se=({leyendaSet:s="Cx2"})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"spinner-overlay d-flex flex-column justify-content-center align-items-center",children:[e.jsx("p",{className:"text-white display-4 mb-4",children:s}),e.jsxs("div",{className:"loader-bars",children:[e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{})]})]})});function Oa({setIsLogin:s}){const r=Ks(vs),[t,n]=a.useState(""),[i,l]=a.useState(!1),[o,c]=a.useState(""),[p,b]=a.useState("");function m(g){const u=["gmail.com","hotmail.com","outlook.com","live.com","msn.com","santafe.gov.ar"],f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,v=g.split("@")[1];return f.test(g)&&u.includes(v)}function j(g){return g.length>=6}async function x(g){if(g.preventDefault(),!m(o)){n("Por favor, utiliza un correo v√°lido de Gmail o Microsoft (Outlook, Hotmail, Live, Santa fe ).");return}if(!j(p)){n("La contrase√±a debe tener al menos 6 caracteres.");return}l(!0);try{const f=(await ea(r,o,p)).user;console.log("Registro exitoso:",f),alert("Registro exitoso"),c(""),b(""),n(""),await cs(r),console.log("Sesi√≥n cerrada despu√©s del registro."),s(!0)}catch(u){h(u)}finally{l(!1)}}function h(g){switch(g.code){case"auth/email-already-in-use":n("La direcci√≥n de correo electr√≥nico ya est√° en uso.");break;case"auth/invalid-email":n("Tu direcci√≥n de correo electr√≥nico no es v√°lida.");break;case"auth/weak-password":n("Tu contrase√±a es muy d√©bil - debe tener al menos 6 caracteres.");break;default:n("Oooops, algo sali√≥ mal :(")}}const d=async()=>{l(!0);const g=new Aa;try{const f=(await Ma(r,g)).user;alert(`Inicio de sesi√≥n con Google exitoso. Bienvenido ${f.displayName||f.email}`),navigate("/dashboard")}catch(u){console.error("Error al iniciar sesi√≥n con Google:",u),n("No se pudo iniciar sesi√≥n con Google.")}finally{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:x,className:"form-container  my-2",action:"#!",id:"registerForm",children:[i&&e.jsx(se,{}),e.jsxs("div",{className:"row gy-3 gy-md-4 my-4",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"registerEmail",className:"form-label text-capitalize",children:["Ingresa tu correo electr√≥nico ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",id:"registerEmail",name:"email",className:"form-control",value:o,onChange:g=>c(g.target.value),autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"registerPassword",className:"form-label text-capitalize",children:["Ingresa tu Contrase√±a ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",id:"registerPassword",name:"password",className:"form-control text-capitalize",value:p,onChange:g=>b(g.target.value),autoComplete:"off",required:!0})]}),e.jsx("div",{className:"col-12 text-center",children:t&&e.jsx("span",{className:"error text-danger",role:"alert","aria-live":"assertive",children:t})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-grid",children:e.jsx("button",{className:"btn btn-purpleUi fw-semibold fs-6 rounded-3 shadow",type:"submit",id:"submitBtnRegistrar",disabled:i,children:"Registrar usuario"})})})]})]}),e.jsxs("div",{className:"col-12 mb-5",children:[e.jsx("hr",{className:"border-purple border-2 rounded-3"}),e.jsxs("div",{className:"d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-center",children:[e.jsx("button",{type:"button",className:"btn bg-secondaryMuiRed bg-opacity-75 fs-6 rounded-3 shadow-sm text-light",onClick:()=>s(!0),children:"Regresar"}),e.jsx("button",{type:"button",className:"btn bg-dark bg-opacity-50 fs-6 rounded-3 text-light ",onClick:d,children:"Iniciar sesi√≥n con Google"})]})]})]})}function Ua({setIsLogin:s}){const{currentUser:r,loading:t}=a.useContext(ss),n=sa(),[i,l]=a.useState(""),[o,c]=a.useState(""),[p,b]=a.useState(""),[m,j]=a.useState(!1);a.useEffect(()=>{r&&setTimeout(()=>{n("/dashboard")},1e3)},[r,n]);const x=async g=>{if(g.preventDefault(),!i||!o){b("Por favor, complete todos los campos.");return}if(!h(i)){b("Por favor, ingrese un correo electr√≥nico v√°lido.");return}if(o.length<6){b("La contrase√±a debe tener al menos 6 caracteres.");return}j(!0);try{const f=(await Pa(We,i,o)).user;alert(`Inicio de sesi√≥n exitoso. Bienvenido ${f.email}`)}catch(u){d(u)}finally{j(!1)}};function h(g){const u=["gmail.com","hotmail.com","outlook.com","live.com","msn.com","santafe.gov.ar"],f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,v=g.split("@")[1];return f.test(g)&&u.includes(v)}const d=g=>{switch(g.code){case"auth/wrong-password":b("La contrase√±a es incorrecta.");break;case"auth/user-not-found":b("No hay usuario registrado con este correo.");break;case"auth/invalid-email":b("El correo electr√≥nico no es v√°lido.");break;default:b("Oooops, algo sali√≥ mal :(")}};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:x,className:"form-container  my-4",children:[m&&e.jsx(se,{leyendaSet:"Cx2"}),e.jsxs("div",{className:"row gy-3 gy-md-4 my-1",children:[e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"username",className:"form-label text-capitalize",children:["Usuario ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",id:"username",className:"form-control",name:"username",value:i,onChange:g=>l(g.target.value),autoComplete:"off",required:!0})]}),e.jsxs("div",{className:"col-12",children:[e.jsxs("label",{htmlFor:"password",className:"form-label",children:["Contrase√±a ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"password",id:"password",className:"form-control",name:"password",value:o,onChange:g=>c(g.target.value),autoComplete:"off",required:!0})]}),e.jsx("div",{className:"col-12 text-center",children:p&&e.jsx("span",{className:"error text-danger",role:"alert","aria-live":"assertive",children:p})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-grid",children:e.jsx("button",{className:"btn btn-purpleUi fw-semibold fs-6 rounded-3 shadow ",type:"submit",disabled:m,children:m?"Cargando...":"Iniciar sesi√≥n"})})})]})]}),e.jsxs("div",{className:"col-12 mb-5",children:[e.jsx("hr",{className:" border-purple border-2 rounded-3"}),e.jsxs("div",{className:"d-flex gap-2 gap-md-4 flex-column flex-md-row justify-content-md-center",children:[e.jsx("button",{type:"button",className:"btn bg-primary bg-opacity-75 fs-6 rounded-3 shadow-sm text-light",disabled:!0,children:"Crear Cuenta"}),e.jsxs("button",{type:"button",className:"btn bg-dark bg-opacity-50 fs-6 rounded-3 text-light ",disabled:!0,children:["Iniciar sesi√≥n con Google ",e.jsx("i",{className:"bi bi-google text-ligt mx-1"})]})]})]})]})}const qa="/img/logo-login-2024.png",Va=()=>{const[s,r]=a.useState(!0);return e.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:e.jsx("div",{className:"container px-2",children:e.jsx("div",{className:"card border-1 border-secondary shadow-sm rounded-4 overflow-hidden",children:e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:"col-12 col-md-6 gradient-login p-4 d-flex align-items-center justify-content-center flex-column position-relative",children:e.jsxs("div",{className:"text-center animate__animated animate__fadeInDown",children:[e.jsx("div",{className:"d-flex justify-content-center d-none d-md-flex ",children:e.jsx("div",{className:"phone-frame bg-black rounded-4 p-2 shadow",children:e.jsxs("div",{className:"bg-white rounded-4 d-flex flex-column align-items-center pt-4 position-relative",style:{height:"100%"},children:[e.jsx("div",{className:"rounded-circle bg-gradiante2 d-flex align-items-center justify-content-center text-white fw-bold fs-3",style:{width:"80px",height:"80px"},children:e.jsx("span",{className:"shake fs-1  ",children:"üîç"})}),e.jsx("div",{className:"mt-1 fw-semibold text-dark",children:"Iniciar App"}),e.jsx("div",{className:"card text-center shadow-sm border-0 mt-5",style:{width:"14rem",borderRadius:"1rem"},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-2 p-2 text-light bg-indigo bg-opacity-75 rounded-4 shadow",style:{fontSize:"1.5rem"},children:["Cx2 App ",e.jsx("span",{className:"titilar",children:"_"})]}),e.jsx("p",{className:"card-text text-muted",style:{fontSize:"0.75rem"},children:"Direccion General OJO UR II"})]})}),e.jsxs("div",{className:"position-absolute text-center text-muted",style:{bottom:"40px",padding:"0 1rem",fontSize:"0.75rem"},children:[e.jsx("img",{className:"pt-3 my-1",loading:"lazy",src:qa,width:"85",height:"45",alt:"Marca fondo blanco"}),e.jsx("div",{style:{fontSize:"0.65rem"},children:'"La seguridad se construye con datos."'})]})]})})}),e.jsxs("div",{className:"d-none d-md-block",children:[e.jsx("p",{className:"text-center fs-6 animate__animated animate__fadeIn text-light mb-1 mt-3",children:e.jsx("span",{children:"Polic√≠a de la Provincia de Santa Fe"})}),e.jsxs("div",{className:"text-center text-light small mb-2",children:[e.jsx("small",{children:"Versi√≥n: 1.0.0"})," | ",e.jsx("small",{children:"Fecha: 20/05/2025"})," | ",e.jsx("small",{children:"Desktop"})]})]}),e.jsxs("div",{className:"d-block d-md-none text-center text-light mt-3 mb-2",children:[e.jsxs("h1",{className:"fw-bold display-1 p-3 text-light bg-dark bg-opacity-50 rounded-4 shadow",children:[" Cx2  ",e.jsx("span",{className:"titilar",children:" _"})]}),e.jsxs("div",{className:"text-center text-light small mb-2",children:[e.jsx("small",{children:"Versi√≥n: 1.0.0"})," | ",e.jsx("small",{children:"Fecha: 20/05/2025"})," | ",e.jsx("small",{children:"Movil"})]})]})]})}),e.jsx("div",{className:"col-12  col-md-6 bg-white",children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center h-100 w-100 w-md-75 mx-auto px-3 mt-4 mt-md-5",children:[e.jsx("h2",{className:"text-center fw-bold ",children:s?"Iniciar Sesi√≥n":"Crear Cuenta"}),s?e.jsx(Ua,{setIsLogin:r}):e.jsx(Oa,{setIsLogin:r})]})})]})})})})};function Ga(){return e.jsx("div",{id:"loginShowDivId",className:"d-flex justify-content-center align-items-center h-100",style:{minHeight:"100vh"},children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"login-rectangulo w-100",children:e.jsxs("div",{className:"login-texto-p p-5",children:[e.jsx("p",{className:"login-texto-p-parrafo1 lh-1 pt-5 text-white m-0",children:"Santa Fe"}),e.jsx("p",{className:"login-texto-p-parrafo2 lh-1 text-white m-0",children:"Provincia"})]})})})})}const Ha=()=>{const[s,r]=a.useState(!0);return a.useEffect(()=>{const t=setTimeout(()=>{r(!1)},3e3);return()=>clearTimeout(t)},[]),e.jsx(e.Fragment,{children:s?e.jsx(Ga,{}):e.jsx("div",{className:"container-lg",id:"homeContainer",children:e.jsx(Va,{})})})},Wa=()=>e.jsx("div",{className:"bg-primary Gradiante25 min-vh-100 d-flex justify-content-center align-items-center text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("h1",{className:"display-4 fw-bold",children:"Bienvenido a Santa Fe"}),e.jsx("p",{className:"lead",children:"Descubr√≠ todo lo que nuestra provincia tiene para ofrecer, ¬°explor√° nuestras funcionalidades y novedades!"}),e.jsx(He,{to:"/about",className:"btn btn-outline-light mt-3",children:"Saber m√°s"})]})}),fe=({children:s,allowedRoles:r})=>{const{currentUser:t,loading:n}=Ba();return n?e.jsx(se,{}):t?r&&!r.includes(t.rol)?e.jsx(Is,{to:"/unauthorized"}):s:e.jsx(Is,{to:"/"})},Ja="/gif/dribbble_1.gif",Ya=()=>e.jsx("div",{className:"container-fluid d-flex align-items-center justify-content-center text-center py-5 bg-white",style:{height:"100vh"},children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-capitalize text-secondary fs-1 fw-semibold",children:"Error 404"}),e.jsx("h5",{className:"text-capitalize text-secondary",children:"La p√°gina solicitada no funciona"}),e.jsx("img",{src:Ja,alt:"error",className:"img-fluid my-3",style:{maxHeight:"700px"}})]})}),Za="/img/Escudo%20Pol%20SF%20Color%20Original_BN.png",je=({data1:s,data2:r,data3:t})=>{const n=s||"¬© 2025 Tics | Dg OJO",i=r||"Cx2",l=t||"Polic√≠a de Santa Fe";return e.jsx("div",{className:"container-lg text-center py-5",children:e.jsxs("footer",{className:"d-flex flex-wrap justify-content-between align-items-center pt-3 border-top",children:[e.jsx("p",{className:"col-md-4 mb-0 text-white",children:n}),e.jsx("a",{href:"/",className:"col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-0 me-md-auto text-decoration-none d-none d-md-block","aria-label":"Inicio",children:e.jsx("img",{className:"opacity-50",src:Za,width:"35",height:"32",alt:"Escudo Polic√≠a Santa Fe"})}),e.jsx("ul",{className:"nav col-md-4 justify-content-center text-light",children:e.jsxs("li",{className:"nav-item",children:[e.jsx("strong",{children:i})," / ",e.jsx("strong",{children:l})]})})]})})};je.propTypes={data1:is.string,data2:is.string,data3:is.string};const Qa={nombre:"Santa Fe Tema",valor:"linear-gradient(45deg, #ec4899, #8b5cf6, #0d6efd)",tipo:"gradiente"},Xa=[{nombre:"üé® Santa Fe Theme",valor:"linear-gradient(45deg, #ec4899, #8b5cf6, #0d6efd)"},{nombre:"üé® Santa Fe Theme 2",valor:"linear-gradient(135deg, #ec4899, #8b5cf6)"},{nombre:"üé® Santa Fe Theme 3",valor:"linear-gradient(45deg, #ec4899, #8b5cf6,rgba(0, 204, 255, 0.7), #0d6efd)"},{nombre:"ü™µ Rustic Tones",valor:"linear-gradient(135deg, #c79081 0%, #dfa579 100%)"},{nombre:"ü¶Ñ Unicorn Light",valor:"linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%)"},{nombre:"‚òÄÔ∏è Amanecer",valor:"linear-gradient(135deg, #f6d365, #fda085)"},{nombre:"üåå Noche Estrellada",valor:"linear-gradient(135deg, #2c3e50, #4ca1af)"},{nombre:"üåø Bosque Vivo",valor:"linear-gradient(135deg, #56ab2f, #a8e063)"},{nombre:"üî• Fuego Solar",valor:"linear-gradient(135deg, #ff416c, #ff4b2b)"},{nombre:"üíß Azul Oce√°nico",valor:"linear-gradient(135deg, #2193b0, #6dd5ed)"},{nombre:"üåá Atardecer",valor:"linear-gradient(135deg, #e96443, #904e95)"},{nombre:"üåà Prisma",valor:"linear-gradient(135deg, #f953c6, #b91d73)"},{nombre:"üßä Hielo Azul",valor:"linear-gradient(135deg, #83a4d4, #b6fbff)"},{nombre:"‚òï Caf√© Tostado",valor:"linear-gradient(135deg, #b79891, #94716b)"},{nombre:"üåª Campo Amarillo",valor:"linear-gradient(135deg, #f7971e, #ffd200)"},{nombre:"üå™ Tormenta Gris",valor:"linear-gradient(135deg, #bdc3c7, #2c3e50)"},{nombre:"üå∏ Flor de Cerezo",valor:"linear-gradient(135deg, #fbc2eb, #a6c1ee)"},{nombre:"üåä Costa Brava",valor:"linear-gradient(135deg, #00c6ff, #0072ff)"},{nombre:"üçÇ Oto√±o C√°lido",valor:"linear-gradient(135deg, #d38312, #a83279)"},{nombre:"ü™ê Galaxia",valor:"linear-gradient(135deg, #654ea3, #eaafc8)"},{nombre:"üåü Estrella Dorada",valor:"linear-gradient(135deg, #f6d365, #fda085)"},{nombre:"üèî Rocas Fr√≠as",valor:"linear-gradient(135deg, #e0eafc, #cfdef3)"},{nombre:"üéÜ Noche Festiva",valor:"linear-gradient(135deg, #fc466b, #3f5efb)"},{nombre:"üçÉ Naturaleza",valor:"linear-gradient(135deg, #11998e, #38ef7d)"},{nombre:"üí¶ Celeste Aqua",valor:"#16B1FF"},{nombre:"üîÆ Violeta M√°gico",valor:"#8C57FF"},{nombre:"üçä Naranja Fuego",valor:"#ff8f00"},{nombre:"üçá P√∫rpura Uva",valor:"#7e57c2"},{nombre:"üíô Azul Profundo",valor:"#3c3ae5"},{nombre:"üåø Verde Menta",valor:"#03dac6"},{nombre:"üçµ Verde T√©",valor:"#20c997"},{nombre:"üß™ Verde Ne√≥n",valor:"#05F2D4"},{nombre:"üö® Rojo Alerta",valor:"#f50057"},{nombre:"ü™® Gris Urbano",valor:"#757575"},{nombre:"üå´Ô∏è Gris Niebla",valor:"#f9f9f983"},{nombre:"üåå Negro Noche",valor:"#212121"}],Ce=({setThemeBackgroundColor:s})=>{const[r,t]=a.useState(!1),[n,i]=a.useState(()=>localStorage.getItem("theme")==="dark"),[l,o]=a.useState(()=>localStorage.getItem("bgColor")||Qa.valor),c=b=>{t(!0),i(b==="dark"),localStorage.setItem("theme",b),setTimeout(()=>t(!1),500)},p=b=>{o(b),s(b),localStorage.setItem("bgColor",b)};return a.useEffect(()=>{const b=n?"dark":"light";document.body.setAttribute("data-bs-theme",b)},[n]),a.useEffect(()=>{s(l)},[l,s]),e.jsxs("div",{children:[r&&e.jsx(se,{}),e.jsxs("div",{className:"dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle",children:[e.jsxs("button",{className:"btn btn-greenUi py-2 dropdown-toggle d-flex align-items-center rounded-4",id:"bd-theme",type:"button","aria-expanded":"false","data-bs-toggle":"dropdown","aria-label":"Toggle theme",children:[e.jsx("i",{className:n?"bi bi-moon-stars-fill":"bi bi-brightness-high-fill"}),e.jsx("span",{className:"visually-hidden",id:"bd-theme-text",children:"Toggle theme"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end shadow","aria-labelledby":"bd-theme-text",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${n?"":"active"}`,onClick:()=>c("light"),children:[e.jsx("i",{className:"bi bi-brightness-high-fill me-2 opacity-50"}),"Modo Luz"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${n?"active":""}`,onClick:()=>c("dark"),children:[e.jsx("i",{className:"bi bi-moon-stars-fill me-2 opacity-50"}),"Modo Nocturno"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{className:"px-3",children:e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Xa.map(({nombre:b,valor:m})=>e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>p(m),className:"rounded-circle border-0",style:{background:m,width:"24px",height:"24px",outline:m===l?"2px solid white":"none",cursor:"pointer"},title:b,"aria-label":b})},b))})})]})]})]})},_e=({Promp:s,Promp2:r})=>e.jsx("div",{className:"col-12 d-none d-md-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-75 text-white",children:e.jsx("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:s}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:r})})]})})})}),Rs=()=>{const{currentUser:s}=a.useContext(ss),r=sa(),[t,n]=a.useState(!1),i=async()=>{try{await cs(We),r("/")}catch(o){console.error("Error al cerrar sesi√≥n:",o)}},l=()=>{n(!1)};return s&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:o=>{o.stopPropagation(),n(!0)},className:"btn text-secondaryMuiRed fw-semibold",children:[e.jsx("i",{className:"bi bi-box-arrow-right me-2 text-danger "})," Cerrar Sesi√≥n"]}),e.jsx("div",{className:`modal bg-dark fade ${t?"show":""}`,style:{display:t?"block":"none"},tabIndex:"-1","aria-labelledby":"logoutModalLabel","aria-hidden":!t,children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content   border border-white",children:[e.jsxs("div",{className:"modal-header bg-gradiante2 ",children:[e.jsx("h5",{className:"modal-title text-white  ",id:"logoutModalLabel",children:"Confirmar Cierre de Sesi√≥n"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:l,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body text-center  fw-semibold text-uppercase lh-lg",children:"¬øEst√° seguro de que desea cerrar sesi√≥n?"}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-purpleUi ",onClick:()=>{i(),l()},children:"Cerrar Sesi√≥n"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})};function rs(){const[s,r]=a.useState(0),[t,n]=a.useState(()=>{const i=localStorage.getItem("leidas");return i?JSON.parse(i):{}});return a.useEffect(()=>{const i=G(F,"db_notificaciones"),l=Me(i,o=>{const p=o.docs.map(b=>({id:b.id,...b.data()})).filter(b=>!t[b.id]);r(p.length)});return()=>l()},[t]),s===0?null:e.jsx(e.Fragment,{children:s>99?"99+":s})}const Ka="/img/marca-fondo-blanco-2024.png";function et(s){const[r,t]=a.useState(0);return a.useEffect(()=>{if(!s)return;const n=ye(G(F,"mensajes_privados"),Oe("participantes","array-contains",s)),i=[],l=Me(n,o=>{i.forEach(p=>p&&p()),i.length=0;let c=0;o.forEach(p=>{const b=p.id,m=ye(G(F,"mensajes_privados",b,"mensajes"),Le("timestamp","asc")),j=Me(m,x=>{let h=0;x.forEach(d=>{var u;const g=d.data();g.de!==s&&!((u=g.vistoPor)!=null&&u.includes(s))&&h++}),c+=h,t(c)});i.push(j)})});return()=>{l(),i.forEach(o=>o&&o())}},[s]),r}function $s({user:s}){const r=et(s.email);return e.jsxs(Fe,{to:"/chatrom",className:"nav-link text-white position-relative",style:{cursor:"pointer"},children:[e.jsx("i",{className:"bi bi-chat-dots-fill me-2"}),r>0&&e.jsx("span",{className:"badge",style:{position:"absolute",top:"-2px",right:"-2px",background:"blue",color:"white",padding:"3px 7px",borderRadius:"50%",fontSize:"12px"},children:r})]})}const ve=()=>{var n;const r=(()=>{const i=localStorage.getItem("user");return i?JSON.parse(i):null})(),t=((n=r==null?void 0:r.email)==null?void 0:n.split("@")[0])||"Usuario Sin Registro";return e.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark bg-transparent position-sticky top-0 top-0 w-100 z-3",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx(He,{className:"navbar-brand fw-bold text-white",to:"/dashboard",children:e.jsx("img",{src:Ka,height:"30",width:"100",alt:"Logo",className:"m-1"})}),e.jsx("div",{className:"position-relative",children:e.jsxs("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:[e.jsx("span",{className:"navbar-toggler-icon"}),e.jsx("span",{className:"position-absolute top-0 start-90 mt-1 translate-middle badge rounded-pill bg-danger",children:e.jsx(rs,{})})]})}),e.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[e.jsxs("ul",{className:"navbar-nav ms-auto d-none d-md-flex flex-row flex-wrap justify-content-end w-100",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-person-circle me-2"}),t]})}),e.jsx("li",{className:"nav-item",children:e.jsx($s,{user:JSON.parse(localStorage.getItem("user"))})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Fe,{to:"/notificaciones",className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-megaphone-fill me-2"}),e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger",children:e.jsx(rs,{})})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:"bi bi-grid-fill me-2 ms-2"}),e.jsx("span",{className:"d-none d-md-inline",children:"M√°s"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end text-center mb-3 shadow border-0",children:[["911/ceccop","ceccop","admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/FormularioPageDev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Personas"})]}),["911/ceccop","ceccop","admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/Formulariobuscados",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Buscados SF"})]}),["911/ceccop","ceccop","admin","911","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/notificaionesNew",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-megaphone me-2 textG2"}),e.jsx("span",{children:"Notificaci√≥n"}),e.jsx("span",{className:"badge text-bg-orangeDb mx-1 text-white",children:"Crear"})]}),["admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/panelcontroldev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-camera-fill me-2 textG2"}),e.jsx("span",{children:"Capturas "}),e.jsx("span",{className:"badge text-bg-indigoMui text-white",children:"Panel"})]}),["admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/panelcontrolbuscados",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-cash-coin me-2 textG2"}),e.jsx("span",{children:"Buscados "}),e.jsx("span",{className:"badge text-bg-cyan text-white",children:"Panel"})]}),["admin"].includes(r.rol)&&e.jsxs(Fe,{to:"/usercsvpage",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-person me-2 textG2"}),e.jsx("span",{children:"Usuarios "}),e.jsx("span",{className:"badge text-bg-blue text-white",children:"Csv"})]}),["admin"].includes(r.rol)&&e.jsxs(Fe,{to:"/Cx2userPanelAdmin",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-person me-2 textG2"}),e.jsx("span",{children:"Usuarios "}),e.jsx("span",{className:"badge text-bg-primary2 text-white",children:"Rol"})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider bg-indigo "})}),e.jsx("li",{children:e.jsx(Rs,{})})]})]})]}),e.jsxs("ul",{className:"navbar-nav ms-auto d-flex d-md-none flex-row flex-wrap justify-content-between w-100",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("div",{className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-person-fill me-2"}),t]})}),e.jsx("li",{className:"nav-item",children:e.jsx(Fe,{to:"/dashboard",className:"nav-link text-white",children:e.jsx("i",{className:"bi bi-house-door-fill me-2"})})}),e.jsx("li",{className:"nav-item",children:e.jsx($s,{user:JSON.parse(localStorage.getItem("user"))})}),e.jsx("li",{className:"nav-item",children:e.jsxs(Fe,{to:"/notificaciones",className:"nav-link text-white",children:[e.jsx("i",{className:"bi bi-megaphone-fill me-2"}),e.jsx("span",{className:"position-absolute top-1 start-75 translate-middle badge rounded-pill bg-danger",children:e.jsx(rs,{})})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle text-white",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[e.jsx("i",{className:"bi bi-grid-fill me-2 ms-2"}),e.jsx("span",{className:"d-none d-md-inline",children:"M√°s"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end text-center mb-3 shadow border-0",children:[["911/ceccop","ceccop","admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/FormularioPageDev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Personas"})]}),["911/ceccop","ceccop","admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/Formulariobuscados",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-ui-checks-grid me-2 textG2"}),e.jsx("span",{children:"Formulario Buscados SF"})]}),["911/ceccop","ceccop","admin","911","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/notificaionesNew",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-megaphone me-2 textG2"}),e.jsx("span",{children:"Notificaci√≥n"}),e.jsx("span",{className:"badge text-bg-orangeDb mx-1 text-white",children:"Crear"})]}),["admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/panelcontroldev2",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-camera-fill me-2 textG2"}),e.jsx("span",{children:"Capturas "}),e.jsx("span",{className:"badge text-bg-indigoMui text-white",children:"Panel"})]}),["admin","supervisor c"].includes(r.rol)&&e.jsxs(Fe,{to:"/panelcontrolbuscados",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-cash-coin me-2 textG2"}),e.jsx("span",{children:"Buscados "}),e.jsx("span",{className:"badge text-bg-cyan text-white",children:"Panel"})]}),["admin"].includes(r.rol)&&e.jsxs(Fe,{to:"/usercsvpage",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-person me-2 textG2"}),e.jsx("span",{children:"Usuarios "}),e.jsx("span",{className:"badge text-bg-blue text-white",children:"Csv"})]}),["admin"].includes(r.rol)&&e.jsxs(Fe,{to:"/Cx2userPanelAdmin",className:"dropdown-item",children:[e.jsx("i",{className:"bi bi-person me-2 textG2"}),e.jsx("span",{children:"Usuarios "}),e.jsx("span",{className:"badge text-bg-primary2 text-white",children:"Rol"})]}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider bg-indigo "})}),e.jsx("li",{children:e.jsx(Rs,{})})]})]})]})]})]})})},zs=32e3,st=["db_art_diez_bis_descativados","db_buscados","db_formulario_diez_bis","db_informes","db_notificaciones","db_personas","db_personas_desactivados","db_vehiculos"],at=({titulo:s="Exportar Datos"})=>{const[r,t]=a.useState("db_buscados"),[n,i]=a.useState(!1),[l,o]=a.useState(!1);a.useEffect(()=>{document.body.style.overflow=l?"hidden":"auto"},[l]);const c=async()=>{const m=await ne(G(F,r)),j=[];return m.forEach(x=>{const h=x.data();Object.keys(h).forEach(d=>{var g;(g=h[d])!=null&&g.toDate&&(h[d]=h[d].toDate().toLocaleString())}),Object.keys(h).forEach(d=>{typeof h[d]=="string"&&h[d].length>zs&&(h[d]=h[d].substring(0,zs)+"...")}),j.push({id:x.id,...h})}),j},p=async()=>{i(!0);try{const m=await c();if(m.length===0){alert("No hay datos para exportar.");return}const j=ke.json_to_sheet(m),x=ke.book_new();ke.book_append_sheet(x,j,r),qe(x,`${r}.xlsx`)}catch(m){console.error("Error exportando a Excel:",m),alert("Ocurri√≥ un error al exportar a Excel.")}finally{i(!1)}},b=async()=>{i(!0);try{const m=await c();if(m.length===0){alert("No hay datos para exportar.");return}const j=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),x=URL.createObjectURL(j),h=document.createElement("a");h.href=x,h.download=`${r}.json`,h.click(),URL.revokeObjectURL(x)}catch(m){console.error("Error exportando a JSON:",m),alert("Ocurri√≥ un error al exportar a JSON.")}finally{i(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"badge bg-white bg-opacity-75 text-dark fw-semibold px-3 py-1 my-2  mx-3",onClick:()=>o(!0),children:s}),l&&e.jsx("div",{className:"modal show fade d-block text-dark bg-dark bg-opacity-50  ",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered ",role:"document",children:e.jsxs("div",{className:"modal-content ",children:[e.jsxs("div",{className:"modal-header border border-0",children:[e.jsx("h5",{className:"modal-title",children:"Exportar Colecci√≥n"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>o(!1)})]}),e.jsxs("div",{className:"modal-body ",children:[e.jsx("label",{className:"form-label",children:"Seleccione colecci√≥n:"}),e.jsx("select",{className:"form-select mb-3",value:r,onChange:m=>t(m.target.value),children:st.map(m=>e.jsx("option",{value:m,children:m},m))}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{onClick:p,className:"btn btn-green",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Exportando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-earmark-excel-fill me-2"}),"Exportar a Excel"]})}),e.jsx("button",{onClick:b,className:"btn btn-primary2",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Exportando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-filetype-json me-2"}),"Exportar a JSON"]})})]})]}),e.jsx("div",{className:"modal-footer border border-0",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>o(!1),children:"Cerrar"})})]})})})]})};function tt(){const[s,r]=a.useState(null);return a.useEffect(()=>{const t=JSON.parse(localStorage.getItem("user"))||{};r(t)},[]),s}const ra="/img/splash/concept5.jpeg",la="/img/splash/concept9.gif",it=()=>{const s=tt(),r=(s==null?void 0:s.rol)||"";return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-6   d-none d-md-block ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4 ",children:[e.jsxs("h1",{className:"fw-bold display-1 animate__animated  animate__rotateInDownLeft ",children:["Cx2 App",e.jsx("span",{className:"titilar",children:"_"})]}),e.jsx("h2",{className:"fw-semibold fs-4 animate__fadeInUp animate__animated",children:"Santa Fe - Datos + Comunicaci√≥n"}),e.jsx("div",{className:"badge bg-white text-dark fw-semibold px-3 py-1 my-2 animate__animated  animate__rotateInDownLeft ",children:"Datos precisos. Acci√≥n directa.   "}),["admin"].includes(r)&&e.jsx(at,{})]}),e.jsx("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:e.jsx("p",{className:"fs-5 mt-3 text-center animate__fadeInUp animate__animated",children:"Tu herramienta √°gil para controlar, organizar y comunicar informaci√≥n de forma simple y eficiente."})}),e.jsxs("div",{className:"mt-5 small d-flex flex-column align-items-end  animate__flipInX animate__animated",children:[e.jsx("p",{className:"mb-1",children:"Versi√≥n: 1.0.0 | Actualizaci√≥n: 1.0.0"}),e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})]})]}),e.jsxs("div",{className:" col-12 col-md-6  ",children:[e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg mb-4 ",children:[e.jsx("div",{className:"d-flex",children:e.jsx("img",{src:ra,className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}})}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1  animate__animated  animate__rotateInDownRight",children:["Galeria ",e.jsx("i",{className:"bi bi-camera-fill mx-3"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Informaci√≥n clara y eficaz, al instante."}),e.jsx(He,{className:"btn btn-outline-light mt-3",to:"/galeriacx2",children:"Explorar Galer√≠a"})]})]}),e.jsxs("div",{className:"position-relative overflow-hidden rounded-4 shadow-lg my-4  ",children:[e.jsx("img",{src:la,className:"w-100 object-fit-cover opacity-50",alt:"Ciudad nocturna",style:{height:"300px",objectFit:"cover"}}),e.jsxs("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex flex-column justify-content-center align-items-center text-white bg-dark bg-opacity-50",children:[e.jsxs("h1",{className:"fw-bold display-1 text-center ",children:["Buscados ",e.jsx("i",{className:"bi bi-currency-exchange mx-3"})]}),e.jsx("p",{className:"lead text-center px-3",children:"Recompensa por Informaci√≥n."}),e.jsx(He,{to:"/GaleriaBuscados",className:"btn btn-outline-light mt-3 px-4 py-2 rounded-pill",children:"Explorar Recompensa"})]})]})]})]})})})},rt=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),a.useEffect(()=>{const i=l=>{l.preventDefault(),l.returnValue="Est√°s a punto de dejar la p√°gina. ¬øQuieres continuar?"};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Menu Inicio - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Menu de Incio App ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsxs("div",{className:" d-flexjustify-content-center  text-white gap-5",children:[e.jsx(it,{}),e.jsx(je,{})]})]}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},lt=()=>e.jsx(e.Fragment,{children:e.jsx(rt,{})}),$e="/svg/undraw_male_avatar_g98dG.svg",nt=({show:s,onClose:r,datos:t})=>{a.useState(!1);const[n,i]=a.useState(!1);a.useEffect(()=>{if(s){window.history.pushState({modalOpen:!0},"");const o=c=>{r()};return window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[s]);const l=o=>{if(!o)return;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=`tel:${o}`:alert(`Tu dispositivo no puede realizar llamadas. N√∫mero: ${o}`)};return s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog   ",children:e.jsxs("div",{className:"modal-content  bg-light  border-0",children:[e.jsx("div",{className:"modal-header",children:e.jsx("button",{type:"button",className:"btn-close ",onClick:r})}),e.jsxs("div",{className:"modal-body text-center ",children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsx("div",{className:"fs-4 position-absolute top-0 start-50 translate-middle-x bg-secondary  text-center w-100 rounded-top small",style:{opacity:.8},children:t.documento}),e.jsx("img",{src:t.base64&&t.base64.trim()!==""&&t.base64.trim()!=="null"?t.base64:"https://via.placeholder.com/150",className:"img-fluid mb-3 shadow-lg rounded-2 ",alt:t.nombre_apellido||"Imagen no disponible",style:{width:"500px",height:"auto"},loading:"lazy"}),e.jsx("div",{className:"display-6 position-absolute text-capitalize bottom-0 start-50 translate-middle-x bg-primary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:t.nombre_apellido})]}),e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 text-dark",children:["Datos de la Solicitud ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-primary border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Motivo Captura"})}),t.motivo_captura&&t.motivo_captura.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.motivo_captura}):null,(!t.motivo_captura||t.motivo_captura.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La informaci√≥n que requiri√≥ se le informar√° a los cargadores de captura para su carga. üè§"),children:["Solicitar Informaci√≥n ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary2 text-white me-2",children:"Informaci√≥n Adicional"})}),t.descripcion_fisica&&t.descripcion_fisica.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.descripcion_fisica}):null,(!t.descripcion_fisica||t.descripcion_fisica.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La informaci√≥n que requiri√≥ se le informar√° a los cargadores de captura para su carga. üè§"),children:["Solicitar Informaci√≥n ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("hr",{className:"border border-white border-1 opacity-75"}),t.entidad&&t.entidad.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primaryM text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Solicita - ",t.entidad]}),t.numero_contacto&&t.numero_contacto.trim()!==""&&e.jsx("div",{className:"d-flex justify-content-center my-3",children:e.jsxs("button",{className:"badge btn text-bg-primaryMuiBlue text-white text-capitalize p-2 d-flex align-items-center gap-2 mx-auto",onClick:()=>l(t.numero_contacto),children:[e.jsx("i",{className:"bi bi-telephone-forward-fill"}),"Contactar ",t.numero_contacto]})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),n&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>i(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>i(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"200vw",maxHeight:"200vh",objectFit:"contain"}})]})})})]}):null},ot=({show:s,onClose:r,datos:t})=>{var c;const[n,i]=a.useState(!1),[l,o]=a.useState(!1);return a.useEffect(()=>{if(location.pathname==="/dashboard"){const p=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",p),()=>{window.removeEventListener("popstate",p)}}},[r]),s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered ",children:e.jsxs("div",{className:"modal-content bg-gradiante2 border-0",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title text-center text-white fw-semibold",children:"Detalles de la Captura üëÆ"}),e.jsx("button",{type:"button",className:"btn-close btn-close-dark",onClick:r})]}),e.jsxs("div",{className:"modal-body text-white",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-start mb-3",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>o(!0),children:[e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:t.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow mt-2",style:{width:"130px",height:"130px",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:"Capturado"})]})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("small",{className:"d-flex gap-2 justify-content-end mb-1",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center text-capitalize",value:t.nombre_apellido,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center",value:t.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Detalles de la Captura ",e.jsx("i",{className:"bi bi-journal-text"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),((c=t.capturas_informacion_estados)==null?void 0:c.length)>0?e.jsxs(e.Fragment,{children:[t.capturas_informacion_estados.slice().reverse().slice(0,n?t.capturas_informacion_estados.length:1).map((p,b)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:`rounded-pill px-3 py-2 text-white ${p.captura_fecha?"bg-primary":"bg-secondaryMuiRed"}`,children:[e.jsx("strong",{className:"me-3",children:p.captura_autor||"Sistema"}),p.captura_fecha||p.captura_quita_fecha]}),p.captura_fecha&&e.jsxs("p",{children:["Relato: ",e.jsx("span",{className:"fw-semibold",children:p.captura_descripcion||"Sin relato"})]})]},b)),t.capturas_informacion_estados.length>1&&e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-link text-white text-decoration-none",onClick:()=>i(!n),children:n?"Ver menos":"Ver historial completo"})})]}):e.jsx("p",{className:"text-center",children:"No hay detalles de captura disponibles."})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),l&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>o(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>o(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain"}})]})})})]}):null};function ct({setGridView:s,gridView:r,sortOrder:t,setSortOrder:n,sortBy:i,setSortBy:l,searchTerm:o,setSearchTerm:c,priorityFilter:p,setPriorityFilter:b,currentPage:m,handlePriorityChange:j,entidadSeleccionada:x,setEntidadSeleccionada:h,entidades:d}){const[g,u]=a.useState(!1),f=()=>{u(!1),l("fecha"),n("desc"),b([])};return e.jsx("div",{className:"container-lg  ",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Personas"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-people-fill fs-4 text-dark"})})]}),e.jsx("form",{className:"d-flex justify-content-center my-4",onSubmit:v=>v.preventDefault(),children:e.jsxs("div",{className:"input-group input-group-lg w-100",style:{maxWidth:"600px"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar en Rosario...","aria-label":"Buscar",value:o,onChange:v=>c(v.target.value)}),e.jsx("button",{className:"btn btn-outline-light",type:"submit",children:e.jsx("i",{className:"bi bi-search"})})]})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{type:"button",onClick:()=>s(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"active":""}`,title:"Vista en cuadr√≠cula",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill fs-5 ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"":"active"}`,title:"Vista en lista",children:e.jsx("i",{className:`bi bi-list fs-5 ${r?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>u(!g),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),g&&e.jsxs("div",{className:"card shadow  bg-dark p-4 bg-opacity-25  rounded-4 shadow-lg text-white",style:{backgroundColor:"transparent",color:"white"},children:[e.jsxs("div",{className:"card-header fw-semibold  bg-light bg-opacity-25 rounded-4  p-3 text-ligh d-flex justify-content-between align-items-center ",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-sort-alpha-down mx-1"})," Filtros de Galer√≠a"]}),e.jsx("i",{className:"bi bi-x-lg cursor-pointer",onClick:f,style:{cursor:"pointer"}})]}),e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select   border-white shadow-sm text-center ",value:i,onChange:v=>l(v.target.value),children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]}),e.jsx("label",{className:" p-2",children:"Filtrar por"})]})}),e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating ",children:[e.jsx("select",{className:"form-select  border-white shadow-sm text-center",value:t,onChange:v=>n(v.target.value),children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})}),e.jsx("label",{className:" p-2",children:"Ordenar Prioridad"})]})})]}),e.jsx("div",{className:"border border-white shadow-sm rounded-4 p-4 mb-4 text-white",children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-center mb-3",children:[[{value:"2",label:"Paradero"},{value:"3",label:"Evadidos"},{value:"4",label:"Prioritarias"}].map(({value:v,label:N})=>e.jsxs("div",{className:"form-check form-check-inline mb-2",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",value:v,checked:p.includes(v),onChange:j,disabled:m!==1,style:{cursor:m===1?"pointer":"not-allowed"}}),e.jsx("label",{className:"form-check-label text-white",children:N})]},v)),p.length>0&&e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white shadow-sm mx-2",onClick:()=>b([]),children:e.jsx("i",{className:"bi bi-trash"})})]})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12 col-md-12 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select bg-light rounded-4 shadow-sm text-center pe-5",value:x,onChange:v=>h(v.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),d.map((v,N)=>e.jsx("option",{value:v,children:v},N))]}),e.jsx("label",{className:"p-2 m-2",children:"Filtrar por Entidad"})]}),x&&e.jsx("button",{type:"button",className:"btn btn-sm btn-danger text-white position-absolute top-50 end-0 translate-middle-y me-3 shadow-sm rounded-circle",onClick:()=>h(""),title:"Quitar filtro",children:e.jsx("i",{className:"bi bi-x-lg"})})]})})})]})]})]})})})})}const dt=({informeId:s})=>{const[r,t]=a.useState(null),[n,i]=a.useState(!1),[l,o]=a.useState(0);a.useEffect(()=>{const b=localStorage.getItem("user");if(b){const m=JSON.parse(b);t(m.email),c(m.email)}},[s]);const c=async b=>{var x,h;const m=$(F,"db_personas",s),j=await De(m);if(j.exists()){const d=j.data();o(((x=d.me_sirve)==null?void 0:x.length)||0),i((h=d.me_sirve)==null?void 0:h.includes(b))}},p=async()=>{if(!r)return;const b=$(F,"db_personas",s);await K(b,{me_sirve:n?Re(r):Pe(r)}),i(!n),o(m=>n?m-1:m+1)};return e.jsx("button",{onClick:p,className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"43px",height:"43px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Me sirve",children:e.jsx("i",{className:`bi ${n?"bi-hand-thumbs-up-fill text-white":"bi-hand-thumbs-up"} fs-4`})})},na=({informeId:s,objeto:r})=>{const[t,n]=a.useState(!1),[i,l]=a.useState(""),[o,c]=a.useState([]),[p,b]=a.useState(0),[m,j]=a.useState(!0);a.useEffect(()=>{r&&Array.isArray(r.InfoUsuario)?(c(r.InfoUsuario),b(r.InfoUsuario.length)):(c([]),b(0))},[r]),a.useEffect(()=>{document.body.style.overflow=t?"hidden":"auto"},[t]),a.useEffect(()=>{if(!t)return;window.history.pushState({modalOpen:!0},"");const h=()=>n(!1);return window.addEventListener("popstate",h),()=>window.removeEventListener("popstate",h)},[t]);const x=async()=>{const h=localStorage.getItem("user"),d=h?JSON.parse(h):null;if(!d||!i.trim()){alert("No se puede enviar un comentario vac√≠o.");return}const g={comentario:i.trim(),usuario:d.email,timestamp:new Date().toISOString()};try{const u=$(F,"db_buscados",s);await K(u,{InfoUsuario:Pe(g)}),c(f=>[g,...f]),b(f=>f+1),l(""),alert("Comentario enviado correctamente ‚úÖ"),n(!1)}catch(u){console.error("Error al guardar el comentario:",u),alert("Error al enviar el comentario.")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("button",{className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"43px",height:"43px"},onClick:()=>n(!0),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Informar",children:e.jsx("i",{className:"bi bi-chat-dots fs-4 fs-md-5 text-white"})}),p>0&&e.jsx("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",style:{fontSize:"0.7rem"},children:p})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",style:{zIndex:1055},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header d-flex justify-content-between align-items-center border-0",children:[e.jsx("h5",{className:"modal-title",children:m?"Agregar informaci√≥n":"Comentarios"}),e.jsxs("div",{children:[e.jsx("button",{className:"btn btn-sm text-primary me-2",onClick:()=>j(!m),children:m?`Ver comentarios (${o.length})`:"Agregar informaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>n(!1)})]})]}),e.jsx("div",{className:"modal-body",children:m?e.jsx("textarea",{className:"form-control",placeholder:"Escrib√≠ tu comentario...",value:i,onChange:h=>l(h.target.value),rows:4}):o.length>0?e.jsx("ul",{className:"list-group",children:o.slice().reverse().map((h,d)=>{const u=(h.usuario||"Usuario").charAt(0).toUpperCase(),f=h.timestamp?new Date(h.timestamp).toLocaleString("es-AR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsxs("li",{className:"list-group-item d-flex align-items-center my-2 shadow border-0",children:[e.jsx("span",{className:"rounded-circle bg-primary text-white d-flex justify-content-center align-items-center me-3",style:{width:"40px",height:"40px",flexShrink:0},children:u}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[h.comentario,e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:f})]})]},d)})}):e.jsx("p",{children:"No hay comentarios a√∫n."})}),e.jsxs("div",{className:"modal-footer border-0",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>n(!1),children:"Cerrar"}),m&&e.jsx("button",{className:"btn btn-primary",onClick:x,children:"Guardar / Informar"})]})]})})}),e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100",style:{backgroundColor:"rgba(0,0,0,0.75)",zIndex:1050},onClick:()=>n(!1)})]})]})},ls=15;function Ts(s){const[r,t,n]=s.split("/").map(Number),i=2e3+n;return new Date(i,t-1,r)}const mt=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState(!1),[i,l]=a.useState(!1),[o,c]=a.useState([]),[p,b]=a.useState(1),[m,j]=a.useState(0),[x,h]=a.useState(null),[d,g]=a.useState(null),[u,f]=a.useState(null),[v,N]=a.useState(null),[S,k]=a.useState(!0),[w,C]=a.useState(!1),[y,_]=a.useState(null),[M,E]=a.useState("fecha"),[I,P]=a.useState("desc"),[q,Z]=a.useState(""),[H,A]=a.useState(!0),[V,J]=a.useState(""),[ee,z]=a.useState(!0),[R,Y]=a.useState([]),[le,de]=a.useState(""),he=async()=>{try{k(!0);const U=await ne(G(F,"db_personas")),ce=[],oe=new Set;console.log("Documentos obtenidos:",U.size),U.forEach(xe=>{const Se={id:xe.id,...xe.data()};ce.push(Se),Se.entidad&&oe.add(Se.entidad)}),c(ce),Y(Array.from(oe)),j(Math.ceil(ce.length/ls))}catch(U){console.error("Error obteniendo documentos: ",U),_("No se pudieron cargar los documentos.")}finally{k(!1)}};a.useEffect(()=>{he()},[]);const ie=U=>{const ce=U.target.value;J(oe=>oe.includes(ce)?oe.filter(xe=>xe!==ce):[...oe,ce])},T=a.useMemo(()=>o.filter(U=>{var Se;const ce=(Se=U.nombre_apellido)==null?void 0:Se.toLowerCase().includes(q.toLowerCase()),oe=V.length===0||V.includes(String(U.prioridad)),xe=!le||U.entidad===le;return ce&&oe&&xe}),[o,q,V,le]),B=a.useMemo(()=>T.sort((U,ce)=>{if(U.prioridad===3&&ce.prioridad!==3)return-1;if(ce.prioridad===3&&U.prioridad!==3)return 1;if(U.prioridad===4&&ce.prioridad!==4)return-1;if(ce.prioridad===4&&U.prioridad!==4)return 1;if(M==="fecha"){const oe=Ts(U.date)||0,xe=Ts(ce.date)||0;return I==="asc"?oe-xe:xe-oe}else return I==="asc"?U.nombre_apellido.localeCompare(ce.nombre_apellido):ce.nombre_apellido.localeCompare(U.nombre_apellido)}),[T,M,I]),te=(p-1)*ls,ae=B.slice(te,te+ls),O=()=>{p<m&&(C(!0),b(U=>U+1),setTimeout(()=>C(!1),500))},D=()=>{p>1&&(C(!0),b(U=>U-1),setTimeout(()=>C(!1),500))},W=U=>{N(!0),g(U)},X=()=>{h(null),N(null)},L=U=>{f(!0),g(U)},re=()=>f(!1);return e.jsxs(e.Fragment,{children:[e.jsx(ct,{setGridView:A,gridView:H,sortOrder:I,sortBy:M,setSortOrder:P,setSortBy:E,searchTerm:q,setSearchTerm:Z,showFilters:ee,priorityFilter:V,setPriorityFilter:J,currentPage:p,handlePriorityChange:ie,entidadSeleccionada:le,setEntidadSeleccionada:de,entidades:R}),e.jsxs("div",{className:"container-lg",children:[S&&e.jsx(se,{leyendaSet:"Cargado Base - Cx2"}),y&&e.jsx("div",{className:"alert alert-danger",children:y}),w?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(se,{})}):e.jsx("div",{className:H?"row mt-5":"d-flex flex-column align-items-center mt-5",children:ae.map(U=>e.jsx("div",{className:H?"col-6 col-sm-6 col-md-4 mb-4":"col-12 col-sm-6 col-md-6 mb-4",children:e.jsx("div",{className:"card py-4  shadow-sm text-center bg-dark bg-opacity-50  rounded-4",children:e.jsxs("div",{className:"position-relative",children:[U.prioridad===3&&U.alerta&&!U.captura&&e.jsx("div",{onClick:()=>n(!t),children:t?e.jsx("div",{className:"position-absolute top-1  start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-exclamation-triangle-fill me-2 text-white titilar fs-5 shadow-sm "}),"Evadido ",U.date," "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-redUi1   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-exclamation-triangle-fill fs-5 mx-1 text-white titilar "})})}),U.prioridad===2&&e.jsx("div",{onClick:()=>r(!s),children:s?e.jsx("div",{className:"position-absolute top-1 bg-blueMui start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-redUi1  p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark  fw-semibold text-white ",children:[e.jsx("i",{className:" bi bi-search fs-5 mx-2 text-white  "}),"Paradero "]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center text-dark bg-blueMui   p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-search fs-5 mx-1 text-white "})})}),U.prioridad===4&&e.jsx("div",{onClick:()=>l(!i),children:i?e.jsx("div",{className:"position-absolute top-1 bg-yellowMui start-50 translate-middle text-center d-flex justify-content-center align-items-center p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 text-dark fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-star-fill fs-5 mx-2 text-white shadow-sm "}),"Prioritaria"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center bg-yellowMui p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-star-fill fs-5 mx-1 text-white"})})}),e.jsxs("div",{className:" text-center",children:[e.jsx("img",{src:U.base64||$e,className:`img-fluid d-none d-md-block rounded-3 border-0 object-fit-cover ${U.captura?"opacity-50":""}`,alt:U.nombre_apellido||"Imagen no disponible",loading:"lazy",onClick:()=>W(U),style:{width:"350px",height:"350px",objectFit:"cover",borderRadius:"0.75rem",display:"block",margin:"0 auto"}}),U.captura&&e.jsx("span",{className:"badge bg-danger position-absolute top-0 start-50 translate-middle-x mt-2  fs-3 px-2 px-md-5 shadow mt-5",onClick:ce=>{ce.stopPropagation(),L(U)},children:e.jsx("span",{className:"titilar ",children:"CAPTURADO"})})]}),e.jsx("img",{src:U.base64&&U.base64.trim()!==""&&U.base64.trim()!=="null"?U.base64:$e,className:`img-fluid d-block d-md-none ${U.captura?"grayscale":""}`,alt:U.nombre_apellido||"Imagen no disponible",loading:"lazy",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"0.75rem",display:"block",margin:"0 auto"},onClick:()=>W(U)}),e.jsx("h5",{className:"card-title text-white text-capitalize mt-3 text-truncate mx-2",style:{height:"48px",lineHeight:"48px",overflow:"hidden"},children:U.nombre_apellido}),e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-2 mt-3",children:[e.jsx("button",{onClick:()=>W(U),className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"43px",height:"43px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Ver detalles",children:e.jsx("i",{className:"bi bi-eye fs-4"})}),e.jsx(dt,{informeId:U.id}),e.jsx(na,{informeId:U.id,objeto:U})]})]})})},U.id))}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4",children:[p>1&&e.jsx("button",{className:"btn btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",onClick:D,children:e.jsx("i",{className:"bi bi-arrow-left fw-semibold fs-3 titilar"})}),e.jsxs("span",{className:"fs-6 mx-3  text-light",children:["P√°gina ",p," de ",m]}),p<m&&e.jsx("button",{className:"btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 rounded-4 shadow-lg text-white ",onClick:O,children:e.jsx("i",{className:"bi bi-arrow-right fw-semibold fs-3 titilar"})})]})]}),e.jsx(nt,{show:v,datos:d,onClose:X}),e.jsx(ot,{show:u,datos:d,onClose:re})]})},ut=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Galeria - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:"Geleria de Capturas ",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(mt,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},ht=()=>e.jsx(e.Fragment,{children:e.jsx(ut,{})}),xt=({recepciones:s,loading:r})=>e.jsx("div",{className:" text-center ",children:r?e.jsx("div",{className:"spinner-border text-white",role:"status"}):Object.keys(s).length>0?e.jsxs("div",{className:"text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("strong",{className:"text-light fs-6 text-capitalize",children:"Recepciones pendientes por comisar√≠a:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,n],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-primaryMuiBlue spinner-grow-sm",role:"status"}),e.jsx("span",{children:t}),e.jsxs("span",{className:"badge bg-primaryMuiBlue",children:[n," pendientes"]})]},i))})]}):e.jsx("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),as={"comisaria 1":"1111","comisaria 2":"2222","comisaria 3":"3333","comisaria 4":"4444","comisaria 5":"5555","comisaria 6":"6666","comisaria 7":"7777","Comisaria 8":"8888"},bt=({notificaciones:s,loading:r,aceptarRecepcion:t,rechazarRecepcion:n})=>{const[i,l]=a.useState(""),[o,c]=a.useState(!1),[p,b]=a.useState(null),[m,j]=a.useState(""),[x,h]=a.useState(!1),d=async()=>{if(!p)return;h(!0);const{id:u,comisaria:f}=p,v=as[f];setTimeout(()=>{m&&m===v?(t(u),l(""),c(!1),j("")):l(`El c√≥digo ingresado "${m}" es incorrecto.`),h(!1)},1e3)},g=u=>{b(u),c(!0),l(""),j("")};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg ",children:[e.jsxs("h1",{className:"display-4 fw-bold",children:["Ingreso 10 Bis ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("p",{className:"lead",children:"Administra las recepciones de este  articulo."})]})})}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-5",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border text-white ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i}),s&&s.length>0?s.map(u=>e.jsxs("div",{className:"list-group-item mb-3 shadow bg-light bg-opacity-75",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:u.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:u.dni})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-end row",children:[e.jsx("div",{className:"col mb-1",children:e.jsxs("button",{className:"btn btn-primary btn-sm me-2 mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>g(u),"aria-label":`Aceptar recepci√≥n para ${u.nombre_apellido} en la Comisar√≠a ${u.comisaria}`,children:["Aceptar ",e.jsx("i",{className:"bi bi-check-all ms-2"})]})}),e.jsx("div",{className:"col",children:e.jsxs("button",{className:"btn btn-pink btn-sm mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>n(u.id),"aria-label":`Cancelar recepci√≥n para ${u.nombre_apellido}`,children:["Cancelar ",e.jsx("i",{className:"bi bi-trash ms-2"})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{children:e.jsxs("small",{children:[u.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:u.comisaria})," -"," ",u.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:u.unidad})]})})})]},u.id)):e.jsxs("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})})]}),o&&p&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar C√≥digo"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el c√≥digo para la Comisar√≠a ",e.jsx("strong",{children:p.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:m,onChange:u=>j(u.target.value),placeholder:"C√≥digo"}),i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:!m||x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"Cancelar"})]})]})})})]})},pt=()=>{const[s,r]=a.useState([]),[t,n]=a.useState(!1),[i,l]=a.useState(""),o=async()=>{try{n(!0);const j=ye(G(F,"db_art_diez_bis"),Oe("comisaria_recibe","==",!1)),h=(await ne(j)).docs.map(d=>({id:d.id,...d.data()}));r(h)}catch(j){console.error("Error al obtener las recepciones pendientes: ",j)}finally{n(!1)}};a.useEffect(()=>{o()},[]);const c=async j=>{try{const x=JSON.parse(localStorage.getItem("user")),h=$(F,"db_art_diez_bis",j);await K(h,{comisaria_recibe:!0,visualidad:!0,fecha_ingreso_validado:Ae(),usuario_validado_ingreso:x.email}),r(d=>d.filter(g=>g.id!==j)),alert("Recepci√≥n aceptada correctamente.")}catch(x){console.error("Error al aceptar la recepci√≥n: ",x),alert("Hubo un error al aceptar la recepci√≥n.")}},p=async j=>{if(window.confirm("¬øEst√°s seguro de que deseas rechazar esta recepci√≥n?"))try{const h=$(F,"db_art_diez_bis",j);await Ne(h),r(d=>d.filter(g=>g.id!==j)),alert("Recepci√≥n rechazada correctamente.")}catch(h){console.error("Error al rechazar la recepci√≥n: ",h),alert("Hubo un error al rechazar la recepci√≥n.")}},b=s.reduce((j,x)=>{const h=x.comisaria||"Comisar√≠a desconocida";return j[h]=(j[h]||0)+1,j},{}),m=i?s.filter(j=>j.comisaria===i):s;return e.jsx("div",{className:"container-lg ",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(xt,{recepciones:b,loading:t}),e.jsxs("div",{className:"mt-2 p-3  text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg mt-5",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize  text-white ",children:"Filtrar por comisar√≠a"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select fw-light",value:i,onChange:j=>l(j.target.value),children:[e.jsx("option",{value:"",className:"fw-light",children:"Todas"}),Object.keys(b).map((j,x)=>e.jsx("option",{value:j,children:j},x))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-2 mt-md-0",children:e.jsx(bt,{notificaciones:m,loading:t,aceptarRecepcion:c,rechazarRecepcion:p})})]})})},gt=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Recepci√≥n Art. 10 Bis"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Recepci√≥n Art 10 bis",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(pt,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},jt=()=>e.jsx(e.Fragment,{children:e.jsx(gt,{})}),ft=({recepciones:s,loading:r})=>e.jsx("div",{className:" text-center ",children:r?e.jsx("div",{className:"spinner-border text-white",role:"status"}):Object.keys(s).length>0?e.jsxs("div",{className:"text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("strong",{className:"text-light fs-6 text-capitalize",children:"Personas visibles por comisar√≠a:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,n],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-teal spinner-grow-sm",role:"status"}),e.jsx("span",{className:"text-truncate",children:t}),e.jsxs("span",{className:"badge bg-teal",children:[n," personas"]})]},i))})]}):e.jsx("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),Nt=as,vt=({dataInfo:s,loading:r,actualizarListado:t})=>{const[n,i]=a.useState(""),[l,o]=a.useState(null),[c,p]=a.useState(""),[b,m]=a.useState(!1),[j,x]=a.useState(null),[h,d]=a.useState({}),[g,u]=a.useState(!1),f=w=>Nt[w]||"",v=(w,C)=>{const y=new Date(C.seconds*1e3).getTime()+216e5,_=setInterval(()=>{const M=Date.now(),E=y-M;if(E<=0){clearInterval(_),d(H=>({...H,[w]:"00:00:00"}));return}const I=Math.floor(E/36e5),P=Math.floor(E%36e5/6e4),q=Math.floor(E%6e4/1e3),Z=`${I.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`;d(H=>({...H,[w]:Z}))},1e3);return _},N=async w=>{for(const C of w){const y=C.fecha_ingreso_validado;if(y&&y.seconds){const _=new Date(y.seconds*1e3);if(new Date().getTime()-_.getTime()>36e5){console.log(`Han pasado m√°s de 1 hora desde la salida de ${C.nombre_apellido}`),alert(`Han pasado m√°s de 1 hora el sistema da como salida a  ${C.nombre_apellido} del Articulo 10 bis`);const I=$(F,"db_art_diez_bis",C.id),P=await De(I);if(P.exists()){const q=$(F,"db_art_diez_bis_desactivados",C.id);await we(q,P.data()),await Ne(I),await K(q,{visualidad:!1,salida_art:Ae(),salida_art_usuario:"sistema"}),t(),console.log(`Documento copiado, actualizado y eliminado para ${C.nombre_apellido}`)}}}}};a.useEffect(()=>{s&&s.length>0&&(N(s),s.forEach(w=>{w.fecha_ingreso_validado&&w.fecha_ingreso_validado.seconds&&v(w.id,w.fecha_ingreso_validado)}))},[s]);const S=async()=>{if(!j)return;u(!0);const{id:w,comisaria:C}=j,y=f(C);setTimeout(async()=>{if(c&&c===y)try{const _=JSON.parse(localStorage.getItem("user")),M=$(F,"db_art_diez_bis",w),E=await De(M);if(E.exists()){const I=E.data();await we($(F,"db_art_diez_bis_desactivados",w),{...I,visualidad:!1,salida_art:Ae(),salida_art_usuario:(_==null?void 0:_.email)||"sistema"}),await Ne(M),i(""),alert("Recepci√≥n aceptada correctamente."),m(!1),p(""),t()}else alert("El documento no existe.")}catch(_){console.error("Error al aceptar la recepci√≥n: ",_),alert("Hubo un error al aceptar la recepci√≥n.")}finally{u(!1)}else i(`El c√≥digo ingresado (${c}) es incorrecto.`),u(!1)},1e3)},k=w=>{x(w),m(!0)};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 d-flex justify-content-center align-items-center",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("h1",{className:"display-4 fw-bold",children:["Salida 10 Bis ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("p",{className:"lead",children:"Administra las recepciones de este  articulo."})]})})}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-5",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border text-white ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[n&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:n}),s&&s.length>0?s.map(w=>e.jsxs("div",{className:"list-group-item mb-3 shadow bg-light bg-opacity-75",children:[e.jsx("div",{className:"text-end me-2",children:e.jsxs("span",{className:"badge bg-primary",children:[e.jsx("i",{className:"bi bi-clock titilar me-1"})," ",h[w.id]||"Cargando..."]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:w.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:w.dni})]}),e.jsx("button",{className:"btn btn-teal text-white btn-sm w-25",onClick:()=>k(w),disabled:l===w.id,children:l===w.id?"Procesando...":"Finalizar"})]}),e.jsxs("small",{className:"mt-2",children:[w.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:w.comisaria})," - ",w.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:w.unidad})]})]},w.id)):e.jsxs("div",{className:"alert bg-light  bg-opacity-75  text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})})]}),b&&j&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Ingresar C√≥digo"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>m(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body text-dark",children:[e.jsxs("p",{children:["Ingresa el c√≥digo para la Comisar√≠a ",e.jsx("strong",{children:j.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:w=>p(w.target.value),placeholder:"C√≥digo"}),n&&e.jsx("div",{className:"alert alert-light text-danger mt-3",role:"alert",children:n})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,disabled:!c||g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:"Cancelar"})]})]})})})]})},yt=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState(""),[i,l]=a.useState({}),[o,c]=a.useState([]),p=async()=>{try{r(!0);const m=ye(G(F,"db_art_diez_bis"),Oe("visualidad","==",!0)),x=(await ne(m)).docs.map(d=>({id:d.id,...d.data()}));c(x);const h=x.reduce((d,g)=>{const u=g.comisaria||"Comisar√≠a desconocida";return d[u]=(d[u]||0)+1,d},{});l(h)}catch(m){console.error("Error al obtener datos: ",m)}finally{r(!1)}};a.useEffect(()=>{p()},[]);const b=t?o.filter(m=>(m.comisaria||"").toLowerCase()===t.toLowerCase()):o;return e.jsx("div",{className:"container-lg ",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(ft,{recepciones:i,loading:s}),e.jsxs("div",{className:"mt-4 p-3 fw-light text-center p-4 bg-transparent bg-opacity-50 rounded-4 shadow-lg ",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize  text-white ",children:"Filtrar por comisar√≠a"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select fw-light",value:t,onChange:m=>n(m.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(i).map((m,j)=>e.jsx("option",{value:m,children:m},j))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-4 mt-md-0",children:e.jsx(vt,{dataInfo:b,loading:s,actualizarListado:p})})]})})},wt=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Finalizar Art. 10 Bis"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Finalizar Art 10 bis",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(yt,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Ct=()=>e.jsx(e.Fragment,{children:e.jsx(wt,{})});function St(){const[s,r]=a.useState([]),[t,n]=a.useState("noLeidas"),[i,l]=a.useState([]),[o,c]=a.useState([]),[p,b]=a.useState([]),[m,j]=a.useState(null),[x,h]=a.useState(()=>{const A=localStorage.getItem("leidas");return A?JSON.parse(A):{}}),[d,g]=a.useState(!0),[u,f]=a.useState(!1),[v,N]=a.useState(!1),[S,k]=a.useState([]),w=()=>{f(!1),k([])},C=A=>{N(!0),j(A)},y=()=>{N(!1),j(null)};a.useEffect(()=>{const A=()=>{if(v){y(),w();return}u&&w()};return(u||v)&&window.history.pushState({modalOrPreviewOpen:!0},""),window.addEventListener("popstate",A),()=>{window.removeEventListener("popstate",A)}},[u,v]),a.useEffect(()=>{const A=Me(G(F,"db_notificaciones"),V=>{const J=V.docs.map(ee=>({id:ee.id,...ee.data()})).sort((ee,z)=>{var R,Y;return(((R=z.timestamp)==null?void 0:R.seconds)??0)-(((Y=ee.timestamp)==null?void 0:Y.seconds)??0)});r(J)});return()=>A()},[]),a.useEffect(()=>{(async()=>{const J=(await ne(G(F,"db_personas"))).docs.map(ee=>({id:ee.id,...ee.data()}));l(J),g(!1)})()},[]),a.useEffect(()=>{(async()=>{const J=(await ne(G(F,"db_buscados"))).docs.map(ee=>({id:ee.id,...ee.data()}));c(J),g(!1)})()},[]),a.useEffect(()=>{(async()=>{const J=(await ne(G(F,"db_vehiculos"))).docs.map(ee=>({id:ee.id,...ee.data()}));b(J),g(!1)})()},[]);const _=A=>{if(!A)return;const V=A.personas_asociadas?Object.keys(A.personas_asociadas).map(R=>({tipo:"persona",...i.find(Y=>Y.id===R)||A.personas_asociadas[R]})):[],J=A.buscados_asociados?Object.keys(A.buscados_asociados).map(R=>({tipo:"buscado",...o.find(Y=>Y.id===R)||A.buscados_asociados[R]})):[],ee=A.vehiculos_asociados?Object.keys(A.vehiculos_asociados).map(R=>({tipo:"vehiculo",...p.find(Y=>Y.id===R)||A.vehiculos_asociados[R]})):[],z=[...V,...J,...ee];if(z.length===0){alert("No hay asociaciones en esta notificaci√≥n.");return}k(z),f(!0)},M=A=>{h(V=>{const J={...V,[A]:!0};return localStorage.setItem("leidas",JSON.stringify(J)),J})},E=A=>({1:"Novedad",2:"Paradero",3:"Evasi√≥n",4:"Prioritaria"})[A]||"No definida",I=A=>/^https?:\/\//.test(A)?A:`https://${A}`,P=s.sort((A,V)=>{var z,R;const J=x[A.id]?1:0,ee=x[V.id]?1:0;return J!==ee?J-ee:(((z=V.timestamp)==null?void 0:z.seconds)??0)-(((R=A.timestamp)==null?void 0:R.seconds)??0)}).filter(A=>t==="leidas"?x[A.id]:t==="noLeidas"?!x[A.id]:!0),q=s.length,Z=x?Object.keys(x).length:0,H=q-Z;return e.jsx("div",{className:"container my-5",children:d?e.jsx(se,{leyendaSet:"Cargando Notificaciones"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center mt-4 ",children:e.jsx("div",{className:"d-flex flex-wrap justify-content-center align-items-center gap-1   ",children:["todas","leidas","noLeidas"].map(A=>{const V=A==="todas"?q:A==="leidas"?Z:H,J=A==="todas"?"Todas":A==="leidas"?"Le√≠das":"No Le√≠das",ee=A==="todas"?"bi-list-ul":A==="leidas"?"bi-check-circle":"bi-bell-fill";return e.jsxs("button",{className:`btn 
            ${t===A?"btn-light text-dark fw-semibold":"btn-outline-light bg-transparent text-white"} 
            ${A==="todas"?"rounded-start-pill":A==="noLeidas"?"rounded-end-pill":""}`,onClick:()=>n(A),children:[e.jsx("i",{className:`bi me-2 ${ee}`}),J," ",e.jsxs("span",{className:"ms-1",children:["(",V,")"]})]},A)})})}),P.length===0?e.jsx("div",{className:"text-muted my-5 alert d-flex justify-content-center text-center",children:e.jsxs("p",{className:"text-white border border-4 p-4 rounded-pill w-100 bg-dark bg-opacity-25 fs-3",children:[e.jsx("i",{className:`bi me-2 ${t==="todas"?"bi-inbox":t==="leidas"?"bi-check-circle":"bi-bell-fill"}`}),t==="todas"&&e.jsxs(e.Fragment,{children:["No hay notificaciones disponibles."," ",e.jsx("span",{className:"ms-2",role:"img","aria-label":"bandeja",children:"üì≠"}),e.jsx("br",{}),e.jsx("small",{className:"d-block mt-2 text-white-50",children:"A√∫n no se han generado notificaciones."})]}),t==="leidas"&&e.jsxs(e.Fragment,{children:["No hay notificaciones le√≠das."," ",e.jsx("span",{className:"ms-2",role:"img","aria-label":"ojo",children:"üëÄ"}),e.jsx("br",{}),e.jsx("small",{className:"d-block mt-2 text-white-50",children:"A√∫n no marcaste ninguna como le√≠da."})]}),t==="noLeidas"&&e.jsxs(e.Fragment,{children:["No hay notificaciones sin leer."," ",e.jsx("span",{className:"ms-2",role:"img","aria-label":"mano",children:"‚úã"}),e.jsx("br",{}),e.jsx("small",{className:"d-block mt-2 text-white-50",children:"¬°Todo al d√≠a, sin novedades pendientes!"})]})]})}):P.map(A=>{var V;return e.jsxs("div",{className:"card shadow position-relative d-flex gap-3 p-4 my-5 mx-3",children:[!x[A.id]&&e.jsx("button",{className:"btn-close position-absolute top-0 end-0 m-2",onClick:()=>M(A.id)}),e.jsx("img",{src:x[A.id]?"img/Alertas/alertRead.png":"img/Alertas/alert1.gif",alt:"Alerta",className:"position-absolute rounded-circle bg-white p-2 shadow",style:{width:x[A.id]?"75px":"80px",height:x[A.id]?"75px":"80px",top:"-20px",left:"-20px",objectFit:"contain"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"40px"},children:[e.jsxs("div",{className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-2 mt-2",children:[e.jsx("h5",{className:"mb-1 text-center text-sm-start w-100 w-sm-auto",children:e.jsx("strong",{children:A.titulo||"Nueva Notificaci√≥n"})}),A.timestamp&&e.jsx("p",{className:"mb-0 text-muted small d-none d-sm-block",children:new Date(A.timestamp.seconds*1e3).toLocaleString()})]}),e.jsxs("p",{children:[x[A.id]&&e.jsxs("i",{className:"badge text-bg-indigoMui text-white bi bi-check-circle-fill",children:[" ","Esta Notificaci√≥n fue Le√≠da"]})," ",A.caratula&&e.jsxs(e.Fragment,{children:[parseInt(A.caratula)===1&&e.jsx("span",{className:"badge text-bg-teal text-white shadow-sm",children:E(A.caratula)}),parseInt(A.caratula)===2&&e.jsx("span",{className:"badge text-bg-primaryMuiBlue text-white shadow-sm",children:E(A.caratula)}),parseInt(A.caratula)===3&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-danger"}),e.jsx("span",{className:"badge text-bg-danger text-white shadow-sm",children:E(A.caratula)})]}),parseInt(A.caratula)===4&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-orange"}),e.jsx("span",{className:"badge text-bg-orange text-white shadow-sm",children:E(A.caratula)})]})]})]}),A.contenido&&e.jsx("p",{className:"mb-3",children:A.contenido}),((V=A.enlace)==null?void 0:V.length)>0&&e.jsx("p",{className:"text-center mt-3 d-flex justify-content-center flex-wrap align-items-center  ",children:A.enlace.map((J,ee)=>e.jsxs("a",{href:I(J),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none d-flex align-items-center gap-2 rounded-pill ",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:[e.jsx("i",{className:"bi bi-browser-chrome titilar",style:{fontSize:"20px"}}),J]},ee))}),A.personas_asociadas&&Object.keys(A.personas_asociadas).length>0?e.jsx("div",{className:"mt-3 d-flex justify-content-center flex-wrap align-items-center",children:Object.entries(A.personas_asociadas).map(([J,ee])=>{var R;const z=i.find(Y=>Y.id===J)||ee;return e.jsx("div",{className:"mx-2  animate__fadeInUp animate__animated",onClick:()=>_(A),style:{cursor:"pointer"},children:e.jsxs("div",{className:"d-flex align-items-center gap-2 border border-light rounded shadow-sm p-2 bg-primary bg-opacity-25",style:{minWidth:"150px"},children:[(z==null?void 0:z.base64)&&e.jsx("img",{src:((R=z.base64)==null?void 0:R.trim())||"svg/undraw_male_avatar_g98dG.svg",alt:z.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize fw-semibold",children:ee.nombre_apellido})]})},`persona-${J}`)})}):e.jsx("span",{className:"text-danger text-center d-block"}),A.buscados_asociados&&Object.keys(A.buscados_asociados).length>0?e.jsx("div",{className:"mt-3 d-flex justify-content-center flex-wrap align-items-center gap-2 ",children:Object.entries(A.buscados_asociados).map(([J,ee])=>{var R;const z=o.find(Y=>Y.id===J)||ee;return e.jsx("div",{className:"mx-2  animate__fadeInUp animate__animated",onClick:()=>_(A),style:{cursor:"pointer"},children:e.jsxs("div",{className:"d-flex align-items-center gap-2 border border-light rounded shadow-sm p-2 bg-teal bg-opacity-25",style:{minWidth:"160px"},children:[e.jsx("img",{src:((R=z==null?void 0:z.base64)==null?void 0:R.trim())||"svg/undraw_male_avatar_g98dG.svg",alt:(z==null?void 0:z.nombre_apellido)||"Sin nombre",className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize fw-semibold",children:(z==null?void 0:z.nombre_apellido)||"Desconocido"})]})},`buscado-${J}`)})}):e.jsx("span",{className:"text-danger text-center d-block"}),A.vehiculos_asociados&&Object.keys(A.vehiculos_asociados).length>0?e.jsx("div",{className:"mt-3 d-flex justify-content-center flex-wrap align-items-center gap-2",children:Object.entries(A.vehiculos_asociados).map(([J,ee])=>{const z=p.find(Y=>Y.id===J)||ee,R=Y=>{switch(Y){case"auto":return"üöó";case"moto":return"üèçÔ∏è";case"camioneta":return"üöô";case"camion":return"üöö";case"colectivo":return"üöå";case"cuatriciclo":return"üèçÔ∏è";case"tractor":return"üöú";case"ambulancia":return"üöë";case"policial":return"üöì";case"bomberos":return"üöí";default:return"üöò"}};return e.jsx("div",{className:"mx-2  animate__fadeInUp animate__animated",onClick:()=>_(A),style:{cursor:"pointer"},children:e.jsxs("div",{className:"d-flex align-items-center gap-2 border border-light rounded shadow-sm p-2 bg-orangeDb bg-opacity-25",style:{minWidth:"180px"},children:[e.jsx("div",{className:"rounded-circle bg-light d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",fontSize:"1.5rem"},children:R(z==null?void 0:z.tipo)}),e.jsxs("div",{className:"d-flex flex-column text-start",children:[e.jsx("span",{className:"fw-semibold text-uppercase",children:(z==null?void 0:z.dominio)||"Sin dominio"}),e.jsxs("small",{className:"text-capitalize",children:[(z==null?void 0:z.marca)||"Marca desconocida"," -"," ",(z==null?void 0:z.modelo)||"Modelo desconocido"]})]})]})},`vehiculo-${J}`)})}):e.jsx("span",{className:"text-danger text-center d-block"})]})]},A.id)}),u&&e.jsx("div",{className:"modal fade show d-block bg-dark animate__animated animate__fadeIn",tabIndex:"-1",role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content bg-light text-dark rounded-4 shadow-lg border-0",children:[e.jsxs("div",{style:{position:"absolute",top:"-5px",left:"50%",transform:"translateX(-50%)",color:"white",backgroundColor:"rgba(0,0,0,0.5)",padding:"8px 16px",borderRadius:"12px",fontSize:"0.9rem",zIndex:10,pointerEvents:"none"},children:["Pulsa para Ampliar ",e.jsx("span",{className:"titilar ",children:"üëÜ"})]}),e.jsxs("div",{className:"modal-header border-0 ",children:[e.jsxs("h5",{className:"modal-title fw-bold",children:["Asociaciones (",S.length,")"]}),e.jsx("button",{type:"button",className:"btn-close",onClick:w,"aria-label":"Cerrar"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"row g-3 justify-content-center",children:S.length>0?S.map((A,V)=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 animate__animated animate__fadeInUp",children:e.jsxs("div",{className:"card border-0 shadow-sm text-center bg-gradiante2 bg-opacity-75 text-light p-2 h-100",children:[e.jsxs("div",{className:"position-relative",children:[A.base64?e.jsx("img",{src:A.base64.trim(),alt:A.nombre_apellido||A.dominio||"Asociado",className:"card-img-top rounded-3",style:{height:"160px",objectFit:"cover"},onClick:()=>C(A.base64.trim())}):A.tipo?e.jsx("div",{className:"d-flex align-items-center justify-content-center rounded-3",style:{height:"160px",backgroundColor:"#f0ebf7",fontSize:"64px",cursor:"pointer"},onClick:()=>j(A),children:(()=>{switch(A.tipo){case"auto":return"üöó";case"moto":return"üèçÔ∏è";case"camioneta":return"üöô";case"camion":return"üöö";case"colectivo":return"üöå";case"tractor":return"üöú";case"ambulancia":return"üöë";case"policial":return"üöì";case"bomberos":return"üöí";default:return"üöò"}})()}):e.jsx("img",{src:"img/default-user.svg",alt:"Sin imagen",className:"card-img-top rounded-3",style:{height:"160px",objectFit:"cover",backgroundColor:"#8C57FF"},onClick:()=>C("img/default-user.svg")}),e.jsx("span",{className:"badge position-absolute top-0 start-0 m-2 bg-light text-dark fw-semibold text-capitalize",children:A.tipo})]}),e.jsxs("div",{className:"card-body",children:[A.nombre_apellido&&e.jsx("h6",{className:"fw-bold text-orangeUi text-capitalize mb-1",children:A.nombre_apellido}),A.dominio&&e.jsx("h6",{className:"fw-bold text-warning mb-1",children:A.dominio}),A.documento&&e.jsxs("p",{className:"mb-1 small",children:[e.jsx("strong",{children:"Dni:"})," ",A.documento]}),A.marca&&A.modelo&&e.jsxs("p",{className:"mb-1 small",children:[e.jsx("strong",{children:"Veh√≠culo:"})," ",A.marca," - ",A.modelo]})]})]})},`${A.id||V}-${A.tipo}`)):e.jsx("div",{className:"text-center text-muted py-3",children:e.jsx("em",{children:"No hay asociaciones registradas."})})})}),e.jsx("div",{className:"modal-footer border-0",children:e.jsx("button",{className:"btn btn-danger text-white  px-4",onClick:w,children:"Cerrar"})})]})})}),v&&e.jsxs("div",{className:"modal fade show d-block bg-dark  animate__animated animate__zoomIn",onClick:y,style:{cursor:"pointer"},children:["    ",e.jsxs("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",color:"white",backgroundColor:"rgba(0,0,0,0.5)",padding:"8px 16px",borderRadius:"12px",fontSize:"0.9rem",zIndex:10,pointerEvents:"none"},children:["Pulsa cualquier lugar para cerrar ",e.jsx("span",{className:"girar mx-2 titilar",children:"üëÜüèª"})]}),e.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100 ",children:e.jsx("img",{src:typeof m=="string"?m:"img/default-user.svg",alt:"Vista ampliada",className:"img-fluid rounded shadow-lg ",style:{maxHeight:"90vh",maxWidth:"90vw",objectFit:"contain"}})})]})]})})}const kt=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Notificaciones - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Notificaciones",Promp2:"bi bi-megaphone fs-4 "}),"   "]}),e.jsx(St,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},_t=()=>e.jsx(e.Fragment,{children:e.jsx(kt,{})}),Bs=({onImageSave:s})=>{const[r,t]=a.useState(!1),[n,i]=a.useState(null),[l,o]=a.useState(""),c=a.useRef(null),[p,b]=a.useState(!1),[m,j]=a.useState({x:0,y:0}),[x,h]=a.useState({x:0,y:0}),[d,g]=a.useState(1),u=a.useRef(null),f=y=>{b(!0);const{offsetX:_,offsetY:M}=y.nativeEvent;h({x:_,y:M})},v=y=>{if(!p||!n)return;const{offsetX:_,offsetY:M}=y.nativeEvent;j(E=>({x:E.x+(_-x.x),y:E.y+(M-x.y)})),h({x:_,y:M})},N=()=>{b(!1)},S=()=>{t(!1),o(""),i(null),j({x:0,y:0}),g(1);const y=document.getElementById("file-input");y&&(y.value=""),u.current&&(URL.revokeObjectURL(u.current),u.current=null)},k=()=>t(!0),w=y=>{const _=y.target.files[0];if(_){if(!_.type.startsWith("image/")){o("Por favor, selecciona un archivo de imagen.");return}if(_.size>5*1024*1024){o("La imagen debe ser menor de 5 MB.");return}const M=URL.createObjectURL(_);u.current=M,i(M),o("")}},C=()=>{if(!n||!c.current){o("Por favor, selecciona una imagen antes de guardar.");return}const y=c.current,_=y.width,M=y.height,E=document.createElement("canvas");E.width=_,E.height=M;const I=E.getContext("2d"),P=new Image;P.src=n,P.onload=()=>{I.clearRect(0,0,_,M),I.drawImage(P,m.x,m.y,P.width*d,P.height*d);const q=E.toDataURL("image/jpeg",.92);s(q),S()}};return a.useEffect(()=>{if(n&&c.current){const y=c.current,_=y.getContext("2d"),M=new Image;M.src=n,M.onload=()=>{_.clearRect(0,0,y.width,y.height),_.drawImage(M,m.x,m.y,M.width*d,M.height*d)}}},[n,m,d]),a.useEffect(()=>{const y=c.current,_=M=>{if(M.preventDefault(),!n)return;const E=1.1,I=M.deltaY<0?d*E:d/E;g(Math.max(I,.1))};if(y)return y.addEventListener("wheel",_,{passive:!1}),()=>{y.removeEventListener("wheel",_)}},[n,d]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:e.jsx("button",{type:"button",onClick:k,className:"btn shadow-sm text-light  ",title:"Crear nuevo",children:e.jsx("i",{className:"bi bi-plus-circle-fill display-1  "})})}),e.jsx("div",{className:`modal fade  bg-dark ${r?"show":""}`,style:{display:r?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!r,children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-gradiante2",children:e.jsx("h5",{className:"modal-title text-light  ",id:"modalLabel ",children:"Selecciona tu imagen  / Edita "})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{id:"file-input",type:"file",className:"form-control",accept:"image/*",onChange:w}),n&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("canvas",{ref:c,className:"shadow",onMouseDown:f,onMouseMove:v,onMouseUp:N,onMouseLeave:N,width:500,height:500,style:{border:"1px solid black",cursor:p?"grabbing":"grab"}})}),e.jsxs("p",{className:"alert alert-light text-redUi1 fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-pink",style:{width:"1rem",height:"1rem"},role:"status"}),"Para hacer zoom en la imagen, simplemente usa el scroll (la rueda) de tu mouse. üñ≤Ô∏è"]}),e.jsxs("p",{className:"alert alert-light text-indigoMui fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-indigoMui",style:{width:"1rem",height:"1rem"},role:"status"}),"Mant√©n presionado el bot√≥n del mouse para arrastrar la imagen. üñ±Ô∏è"]})]}),l&&e.jsx("div",{className:"mt-2 text-danger",children:l})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:S,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn text-white bg-indigoMui",onClick:C,children:"Guardar Imagen"})]})]})})}),e.jsx("div",{className:`modal-backdrop fade ${r?"show":""}`,style:{display:r?"block":"none"}})]})},Et=({onSubmit:s,savedImage:r,resetImage:t,formRef:n})=>{const[i,l]=a.useState(()=>{const d=localStorage.getItem("formData");return d?JSON.parse(d):{nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,captura:!1,prioridad:4,alertaParaderoCaptura:""}}),[o,c]=a.useState({}),[p,b]=a.useState(!1);a.useEffect(()=>{localStorage.setItem("formData",JSON.stringify(i))},[i]);const m=({target:{id:d,value:g,type:u,checked:f}})=>{l(v=>{let N={...v,[d]:u==="checkbox"?f:g};if(d==="alertaParaderoCaptura")switch(g){case"paradero":N={...N,prioridad:2,paradero:!0,captura:!1,alerta:!1};break;case"evadido":N={...N,prioridad:3,captura:!0,paradero:!1,alerta:!0};break;case"prioritaria":N={...N,prioridad:4,captura:!1,paradero:!1,alerta:!1};break;default:N={...N,prioridad:4,captura:!1,paradero:!1,alerta:!1};break}return N}),c(v=>({...v,[d]:""}))},j=()=>{const d={};return r?(i.nombreApellido.match(/[A-Za-z√ë√±√Å√°√â√©√ç√≠√ì√≥√ö√∫\s]+/)||(d.nombreApellido="Ingrese solo letras y espacios."),i.documento.length<6&&(d.documento="El n√∫mero de documento debe tener al menos 6 caracteres."),c(d),Object.keys(d).length===0):(alert("Debes cargar una imagen antes de enviar el formulario."),!1)},x=async d=>{if(d.preventDefault(),!j())return;if(!window.confirm("¬øEst√°s seguro de que deseas enviar este formulario?")){alert("El env√≠o ha sido cancelado.");return}b(!0);try{const u={...i,imagen:r};if(typeof s=="function")await s(u),alert("Formulario enviado correctamente.");else throw new Error("onSubmit no es una funci√≥n v√°lida")}catch(u){console.error(u),alert("Hubo un error al enviar el formulario.")}finally{b(!1),h()}},h=()=>{localStorage.removeItem("formData"),l({nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,prioridad:4,alertaParaderoCaptura:""}),c({}),t()};return e.jsxs("div",{className:" mt-3",children:[p&&e.jsx(se,{})," ",e.jsxs("form",{ref:n,onSubmit:x,children:[e.jsx(Qe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-person-fill text-greenUi me-3 p-1"})," Nombre y Apellido"]}),id:"nombreApellido",type:"text",value:i.nombreApellido,error:o.nombreApellido,onChange:m,required:!0,className:"text-center"}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Qe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-earmark-person text-greenUi me-3 p-1"})," N√∫mero de Documento"]}),id:"documento",type:"number",value:i.documento,error:o.documento,onChange:m,className:"col"}),e.jsx(Os,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-gender-ambiguous text-greenUi me-3 p-1"})," Sexo"]}),id:"sexo",value:i.sexo,options:[{label:"Seleccione",value:""},{label:"Masculino üë®",value:"masculino"},{label:"Femenino üë©",value:"femenino"},{label:"Otros üë≠üèª ",value:"otro"}],onChange:m,className:"col"})]}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Qe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-building text-greenUi me-3 p-1"})," Entidad Solicita Captura"]}),id:"entidad",type:"text",value:i.entidad,onChange:m,className:"col"}),e.jsx(Qe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-telephone text-greenUi me-3 p-1"})," N√∫mero de Contacto"]}),id:"numeroContacto",type:"tel",value:i.numeroContacto,error:o.numeroContacto,onChange:m,className:"col"})]}),e.jsx(Us,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil text-greenUi me-3 p-1"})," Datos de la Persona / Info Adicional"]}),id:"descripcionFisica",value:i.descripcionFisica,onChange:m,className:"text-center"}),e.jsx(Us,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil-square text-greenUi me-3 p-1"})," Motivo  Captura "]}),id:"motivoCaptura",value:i.motivoCaptura,onChange:m,className:"text-center"}),e.jsx(Os,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill p-1 text-white me-3 titilar "})," Selecciona una Tipo de Alerta"]}),id:"alertaParaderoCaptura",value:i.alertaParaderoCaptura,options:[{label:"Captura Prioritaria ‚ö†Ô∏è",value:"prioritaria"},{label:"B√∫squeda Paradero üîç ",value:"paradero"},{label:"Alerta Evadido üö®",value:"evadido"}],onChange:m}),e.jsxs("div",{className:"d-flex justify-content-end pt-4  mt-3",children:[e.jsxs("button",{type:"button",onClick:h,className:"btn btn-danger text-light shadow",children:[e.jsx("i",{className:"bi bi-x-circle "})," Limpiar Formulario"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary2 shadow ms-2",disabled:p,children:[e.jsx("i",{className:"bi bi-send"})," Enviar Formulario"]})]})]})]})},Qe=({label:s,id:r,type:t="text",value:n,error:i,onChange:l,className:o="",required:c=!1})=>e.jsxs("div",{className:`mb-4 ${o}`,children:[e.jsx("span",{htmlFor:r,className:"input-group-text bg-light bg-opacity-25 border-white  text-white text-center mb-1",children:s}),e.jsx("input",{type:t,className:`form-control bg-transparent text-white border-white ${i?"is-invalid":""}`,id:r,value:n,onChange:l,required:c}),e.jsx("div",{className:"invalid-feedback text-light",children:i})]}),Os=({label:s,id:r,value:t,options:n,onChange:i,className:l=""})=>e.jsxs("div",{className:`mb-5 ${l} text-center`,children:[e.jsx("span",{htmlFor:r,className:`input-group-text bg-light bg-opacity-25 text-white text-center d-flex justify-content-center shadow ${r==="alertaParaderoCaptura"?"bg-danger text-white":""}`,children:s}),e.jsx("select",{className:"form-select text-center",id:r,value:t,onChange:i,style:{color:"white",backgroundColor:"transparent",borderColor:"white"},children:n.map(({label:o,value:c})=>e.jsx("option",{value:c,style:{backgroundColor:"#5F3F8B",color:"white"},children:o},c))})]}),Us=({label:s,id:r,value:t,onChange:n,className:i=""})=>e.jsxs("div",{className:`form-floating mb-4 ${i}`,children:[e.jsx("textarea",{className:"form-control bg-transparent text-white border-white",id:r,value:t,onChange:n,style:{height:"100px"},placeholder:" "}),e.jsx("label",{htmlFor:r,className:"text-",children:s})]}),Ft=()=>{const[s,r]=a.useState(null),[t,n]=a.useState(!1),[i,l]=a.useState(!1),[o,c]=a.useState(!1),p=a.useRef(null);a.useEffect(()=>{const h=()=>{n(window.innerWidth<576)};return window.addEventListener("resize",h),h(),()=>window.removeEventListener("resize",h)},[]);const b=h=>{r(h),l(!1)},m=async h=>{var v;const d=()=>{const N=new Date,S=String(N.getDate()).padStart(2,"0"),k=String(N.getMonth()+1).padStart(2,"0"),w=String(N.getFullYear()).slice(-2);return`${S}/${k}/${w}`},u=(()=>{const N=localStorage.getItem("user");return N?JSON.parse(N):null})(),f={documento:h.documento,nombre_apellido:h.nombreApellido.toLowerCase(),sexo:h.sexo,entidad:h.entidad,numero_contacto:h.numeroContacto,descripcion_fisica:h.descripcionFisica,motivo_captura:h.motivoCaptura,base64:s,date:d(),usuario:u?u.email:"Desconocido",prioridad:h.prioridad,alerta:h.alerta||!1,paradero:h.paradero||!1};try{await Ie(G(F,"db_personas"),f),console.log("Datos guardados en Firebase:",f),(v=p.current)==null||v.reset(),j()}catch(N){console.error("Error al guardar los datos en Firebase:",N)}},j=()=>{r(null),l(!1),c(!1)},x=h=>{const d=h.target.files[0];if(d){const g=new FileReader;g.onloadend=()=>{const u=new Image;u.onload=()=>{const f=document.createElement("canvas"),v=f.getContext("2d"),N=500,S=500;let k=u.width,w=u.height;k>w?k>N&&(w*=N/k,k=N):w>S&&(k*=S/w,w=S),f.width=k,f.height=w,v.drawImage(u,0,0,k,w);const C=f.toDataURL("image/jpeg");r(C),l(!1)},u.src=g.result},g.readAsDataURL(d)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-lg",children:o?e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10 col-lg-8 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Formulario"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-ui-checks fs-4 text-dark"})})]}),e.jsx("p",{className:"mt-2 text-white",children:"Gestion√° tus registros de ingreso."}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4",children:e.jsxs("div",{className:"text-center position-relative",children:[!i&&s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondaryM text-purple position-absolute end-0 top-0 mt-5 m-2","aria-label":"Editar",onClick:()=>{r(null),l(!0)},children:e.jsx("i",{className:"bi bi-pencil-fill"})}),e.jsx("h5",{className:"text-light mt-4",children:"Vista previa  "}),e.jsx("img",{src:s,alt:"Captura subida",className:"img-fluid rounded-4 border border-light shadow mt-2",style:{maxWidth:"100%"}})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-light",children:"Sub√≠ una nueva imagen"}),t?e.jsx("div",{className:"mb-3 w-100 px-3",children:e.jsx("input",{type:"file",className:"form-control bg-gradiante2 text-white",onChange:h=>{x(h)}})}):e.jsx(Bs,{onImageSave:h=>{b(h)}})]})]})}),e.jsx("div",{className:"col-12 col-md-7",children:e.jsx(Et,{onSubmit:m,savedImage:s,resetImage:j,formRef:p})})]})]})})})}):e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center py-5 px-3 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 display-5 fw-bold text-white",children:[e.jsx("i",{className:"bi bi-image me-2"}),"Selecciona imagen para comenzar"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 flex-column flex-md-row",children:t?e.jsxs("div",{className:"mb-3 w-100 px-3",children:[e.jsxs("label",{className:"form-label fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-upload me-2"}),"Subir solo imagen"]}),e.jsx("input",{type:"file",className:"form-control bg-light text-dark rounded-3 shadow-sm",onChange:h=>{x(h),c(!0)}})]}):e.jsx("div",{className:"p-3 bg-body bg-opacity-10 rounded-4 shadow-sm",children:e.jsx(Bs,{onImageSave:h=>{b(h),c(!0)}})})})]})})})})},Dt=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Formulario - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5",children:e.jsx(Ft,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},At=()=>e.jsx(e.Fragment,{children:e.jsx(Dt,{})}),Mt=()=>{const[s,r]=a.useState(null),[t,n]=a.useState([]),[i,l]=a.useState([]),o=p=>{const b=p.target.files[0];if(r(null),l([]),b){if(!b.name.endsWith(".csv")){r("Solo se permiten archivos CSV.");return}const m=new FileReader;m.onload=j=>{const x=j.target.result,h=x.includes(";")?";":",",g=x.split(`
`).map(v=>v.trim()).map(v=>v.split(h)),u=[],f=[];g.forEach((v,N)=>{if(v.some(y=>y.trim()===""))return;const k=v[0],w=v[1],C=v[2];isNaN(k)||k.length!==8?f.push({rowIndex:N+1,error:"El primer valor debe ser num√©rico y tener 8 caracteres."}):typeof w!="string"||w.trim()===""?f.push({rowIndex:N+1,error:"La segunda columna debe ser texto."}):c(C)?u.push(v):f.push({rowIndex:N+1,error:"La tercera columna debe tener formato de correo electr√≥nico."})}),f.length>0&&l(f),u.length===0&&f.length===0&&r("No se encontraron filas v√°lidas."),n(u)},m.onerror=()=>{r("Ocurri√≥ un error al leer el archivo.")},m.readAsText(b)}},c=p=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(p);return e.jsx("div",{className:"container-lg mt-5 mt-sm-5 mt-md-0 mt-lg-0 position-relative min-vh-100",children:e.jsxs("div",{className:"card shadow-lg rounded-4 position-relative",style:{zIndex:10},children:[e.jsx("div",{className:"card-header bg-orangeW text-dark shadow-sm rounded-top-4",children:e.jsxs("h4",{className:"fw-semibold p-2",children:["Subir Archivo CSV ",e.jsx("i",{className:"bi bi-filetype-csv ms-2"})]})}),e.jsxs("div",{className:"card-body bg-light rounded-bottom-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"csvFile",className:"form-label",children:"Selecciona un archivo CSV para subir:"}),e.jsx("input",{type:"file",className:"form-control",id:"csvFile",accept:".csv",onChange:o})]}),s&&e.jsx("div",{className:"alert alert-danger",children:s}),i.length>0&&e.jsxs("div",{className:"alert alert-danger bg-redW shadow my-5",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Errores en las siguientes filas:"]}),e.jsx("ul",{children:i.map((p,b)=>e.jsxs("li",{children:["Fila ",p.rowIndex,": ",p.error]},b))})]}),t.length>0&&e.jsxs("div",{className:"my-4",children:[e.jsxs("span",{className:"fw-semibold border border-2 rounded-pill p-2 px-5 border-teal bg-greenW2 text-dark d-inline-flex align-items-center",children:[e.jsx("i",{className:"me-3 bi bi-person-lines-fill"}),"Contenido del archivo:"]}),e.jsx("div",{className:"table-responsive text-center bg-greenW2 mt-3 rounded-3 shadow-sm",children:e.jsxs("table",{className:"table table-striped mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"DNI"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Correo"}),e.jsx("th",{children:"Dependencia"})]})}),e.jsx("tbody",{children:t.map((p,b)=>e.jsx("tr",{children:p.map((m,j)=>e.jsx("td",{children:m},j))},b))})]})})]})]})]})})};ds.register(ms,us,hs,aa,xs,bs,ta,ps,gs);const Pt=(s,r)=>{const t=parseInt(s.replace("#",""),16),n=Math.max((t>>16)-r,0),i=Math.max((t>>8&255)-r,0),l=Math.max((t&255)-r,0);return`#${(n<<16|i<<8|l).toString(16).padStart(6,"0")}`},It=({totalCapturas:s,totalPrioridadNormal:r,totalParadero:t,totalEvasiones:n,totalPrioritaria:i,totalEvasionesCapturados:l})=>{const[o,c]=a.useState("bar"),b=["#03dac6","#ffef62","#f73378","#2196f3"],m=()=>{const g={labels:["Capturas Normales","Capturas Prioritarias","Evasiones","B√∫squeda Paradero"],datasets:[]};switch(o){case"line":g.datasets.push({label:"Cantidad",data:[r,i,n,t],backgroundColor:"rgba(245, 245, 245, 0.2)",borderColor:"#ffffff",pointBackgroundColor:"#ffffff",pointBorderColor:"#fff",borderWidth:2,tension:.3,fill:!0});break;case"pie":case"doughnut":g.datasets.push({label:"Cantidad",data:[r,i,n,t],backgroundColor:b,borderColor:"#fff",borderWidth:2,hoverOffset:10});break;default:g.datasets.push({label:"Cantidad",data:[r,i,n,t],backgroundColor:b,borderColor:b.map(u=>Pt(u,40)),borderWidth:1});break}return g},j={datasets:[{label:"Capturas y Evasiones",data:[{x:1,y:s},{x:2,y:t},{x:3,y:n},{x:4,y:i},{x:5,y:l}],backgroundColor:"#ffffff"}]},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff"}},title:{display:!0,text:"Informe Gr√°fico de Capturas y Evasiones",color:"#ffffff",font:{size:20}},tooltip:{bodyColor:"#ffffff",titleColor:"#ffffff"}},animation:{duration:1e3,easing:"easeOutBounce"},scales:o==="pie"||o==="doughnut"?{}:{x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}},y:{beginAtZero:!0,ticks:{color:"#ffffff",stepSize:1},grid:{color:"rgba(255, 255, 255, 0.2)"}}}},d=g=>{c(g.target.value)};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-center my-5 text-light",children:"Estad√≠sticas / Gr√°ficos"}),e.jsx("div",{className:"row justify-content-center mb-4",children:e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"input-group input-group-sm shadow-sm",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-light",children:"Tipo de gr√°fico"}),e.jsxs("select",{className:"form-select text-center",onChange:d,value:o,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"L√≠nea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"}),e.jsx("option",{value:"scatter",children:"Dispersi√≥n"})]})]})})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:o==="scatter"?e.jsx(ia,{data:j,options:h}):o==="bar"?e.jsx(js,{data:m(),options:h}):o==="line"?e.jsx(es,{data:m(),options:h}):o==="pie"?e.jsx(fs,{data:m(),options:h}):o==="doughnut"?e.jsx(Ns,{data:m(),options:h}):null})})]})},oa=({showModalLink:s,setShowModalLink:r,selectedNotifId:t,setNewLink:n,newLink:i,setNotificaciones:l})=>{const[o,c]=a.useState(!0),[p,b]=a.useState(""),m=()=>{r(!1),n(""),c(!0),b("")},j=async()=>{if(!i){c(!1),b("Por favor, ingresa un enlace.");return}if(!t){c(!1),b("Por favor, selecciona una notificaci√≥n.");return}try{await K($(F,"db_notificaciones",t),{enlace:Pe(i)}),n(""),c(!0),b(""),alert("Enlace agregado correctamente."),m()}catch(x){console.error("Error al agregar el enlace:",x),alert("Hubo un error al agregar el enlace.")}};return s&&e.jsx("div",{className:"modal fade show bg-dark ",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog ",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0",children:[e.jsxs("div",{className:"modal-header border-0",children:[e.jsx("h5",{className:"modal-title text-dark",id:"modalLabel ",children:"Agregar Enlace a la Notificaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:m,"aria-label":"Cerrar",disabled:!1})]}),e.jsx("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:e.jsxs("div",{className:"form-floating text-dark",children:[e.jsx("input",{type:"url",id:"link",className:`form-control ${o?"":"is-invalid"}`,placeholder:"https://example.com",value:i,onChange:x=>n(x.target.value),disabled:!1}),e.jsx("label",{htmlFor:"link",children:"Ingrese el enlace"}),!o&&e.jsx("div",{className:"invalid-feedback",children:p})]})}),e.jsxs("div",{className:"modal-footer bg-light border-0",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:m,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,disabled:!1,children:"Guardar Enlace"})]})]})})})},Lt=({showModalNot:s,closeModalNot:r})=>{const t=Ve(),[n,i]=a.useState(""),[l,o]=a.useState(""),[c,p]=a.useState("1"),[b,m]=a.useState(""),[j,x]=a.useState(!1),h=()=>{const u=new Date,f=String(u.getDate()).padStart(2,"0"),v=String(u.getMonth()+1).padStart(2,"0"),N=u.getFullYear().toString().slice(-2);return`${f}/${v}/${N}`};a.useEffect(()=>{if(t.pathname==="/panelcontrol"){const u=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u)}}},[t,r]);const d=async u=>{if(u.preventDefault(),n.trim()===""){m("El mensaje no puede estar vac√≠o.");return}if(n.length>280){m("El mensaje no puede exceder los 280 caracteres.");return}if(c===""){m("Por favor, selecciona una car√°tula.");return}m(""),x(!0);try{await Ie(G(F,"db_notificaciones"),{titulo:l,contenido:n,timestamp:Ae(),leido:!1,fecha:h(),caratula:c}),o(""),i(""),p("1"),r()}catch(f){console.error("Error al enviar notificaci√≥n: ",f),m("Error al enviar la notificaci√≥n. Int√©ntalo de nuevo.")}finally{x(!1)}},g=()=>{i(""),p("1"),m(""),r()};return e.jsx("div",{className:`modal bg-dark text-white ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header text-center  bg-gradiante2 bg-opacity-50 ",children:[e.jsxs("h3",{className:"modal-title text-center ",id:"modalTitle",children:["Crear Notificaci√≥n  ",e.jsx("i",{className:"bi bi-envelope-plus ms-2 titilar ",style:{fontSize:"1.8rem"}})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:g})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("form",{onSubmit:d,children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aqu√≠",id:"titulo",value:l,onChange:u=>o(u.target.value)}),e.jsx("label",{className:"text-blue",children:"Titulo de la Notificaci√≥n"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aqu√≠",id:"mensaje",value:n,onChange:u=>i(u.target.value),style:{minHeight:"150px"}}),e.jsx("label",{className:"text-blue",children:"Mensaje"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx("div",{className:"col-md",children:e.jsxs("div",{className:"form-floating shadow-sm",children:[e.jsxs("select",{className:"form-select text-center",id:"floatingSelectGrid",value:c,onChange:u=>p(u.target.value),children:[e.jsx("option",{value:"1",children:"Informativa "}),e.jsx("option",{value:"2",children:"Paradero üîé"}),e.jsx("option",{value:"3",children:"Evadido üëÆüèª"}),e.jsx("option",{value:"4",children:"Prioritaria ‚≠ê"})]}),e.jsx("label",{className:"text-blue",children:"Selecciona Tipo de Notificaci√≥n"})]})})}),b&&e.jsx("div",{className:"alert alert-danger mt-5",children:b}),j?e.jsx(se,{}):e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn bg-primary border-white border-3 text-white rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Notificaci√≥n ",e.jsx("i",{className:"bi bi-send-check-fill ms-2 text-white"})]})})})]})})})]})})})},ca=({Date1:s,Date2:r,onCerrar:t,color:n})=>{const[i,l]=a.useState(!1),o=()=>{l(!0)};return e.jsxs("div",{className:`alert alert-${n} text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-light position-relative d-flex align-items-start gap-3`,children:[e.jsx("button",{type:"button",className:"btn-close  btn-close-white  position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:t}),e.jsx("img",{src:"img/ayuda.gif",alt:"Ayuda",style:{width:"80px",height:"70px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-secondaryM border border-2 d-none d-sm-table-cell"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Hola, soy el asistente de ayuda. Voy a guiarte en el proceso de creaci√≥n de una notificaci√≥n."}),e.jsxs("p",{children:["Para comenzar, presiona el bot√≥n ",e.jsx("strong",{className:"titilar",children:"'Crear Notificaci√≥n'"}),". Luego, ingresa el t√≠tulo y el contenido del mensaje, y selecciona el tipo de notificaci√≥n:"]}),e.jsxs("ul",{children:[e.jsx("p",{children:"Informativa (Normal)"}),e.jsx("p",{children:"B√∫squeda de Paradero üîé "}),e.jsx("p",{children:"Prioritaria (Importante) ‚≠ê "}),e.jsx("p",{children:"Evadido (En caso de evasiones) üö®"})]}),e.jsx("button",{type:"button",className:"btn btn-primary text-white btn-sm mx-2",onClick:o,children:"Continuar"}),e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed text-light btn-sm",onClick:t,children:"Finalizar "}),i&&e.jsxs("div",{children:[e.jsxs("p",{className:"mt-3",children:[e.jsx("i",{className:"bi bi-person-fill-add rounded-circle bg-cyan text-white p-2 mx-2"}),'"Usa este √≠cono  para asociar personas a tu notificaci√≥n. Esto permitir√° que el usuario vea una tarjeta con la informaci√≥n de la persona asociada."']}),e.jsxs("p",{className:"mt-3",children:[e.jsx("i",{className:"bi bi-link rounded-circle bg-teal text-white p-2 mx-2"}),'"Usa este √≠cono  para agregar enlaces relacionados con la notificaci√≥n. Esto permitir√° que el usuario se dirija directamente al sitio web indicado."']}),e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed text-light btn-sm",onClick:t,children:"Finalizar "})]})]})]})};function Rt(){const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState(!1),[o,c]=a.useState(!1),[p,b]=a.useState(null),[m,j]=a.useState(null),[x,h]=a.useState(null),[d,g]=a.useState(""),[u,f]=a.useState(!1),[v,N]=a.useState(""),[S,k]=a.useState(""),[w,C]=a.useState(""),[y,_]=a.useState("desc"),[M,E]=a.useState(!1),[I,P]=a.useState(""),q=()=>E(!0),Z=()=>E(!1),[H,A]=a.useState(!1),V=D=>{D!=null&&D.asociada_notificacion_id&&Array.isArray(D.asociada_notificacion_id)&&alert(`Esta persona est√° asociada a las siguientes notificaciones: ${D.asociada_notificacion_id.join(", ")}`)},J=D=>{_(D.target.value),ee(D.target.value)},ee=(D,W)=>{let X=[...s];D==="asc"?X.sort((L,re)=>{var U,ce;return((U=L.timestamp)==null?void 0:U.seconds)-((ce=re.timestamp)==null?void 0:ce.seconds)}):X.sort((L,re)=>{var U,ce;return((U=re.timestamp)==null?void 0:U.seconds)-((ce=L.timestamp)==null?void 0:ce.seconds)}),r(X)};a.useEffect(()=>{f(!0);const D=ye(G(F,"db_notificaciones"),Le("timestamp","desc")),W=Me(D,X=>{const L=X.docs.map(re=>({id:re.id,...re.data()}));r(L)},X=>{console.error("Error al obtener notificaciones:",X)});return f(!1),()=>W()},[]),a.useEffect(()=>{(async()=>{const W=ye(G(F,"db_personas"),Le("nombre_apellido","asc")),L=(await ne(W)).docs.map(re=>({id:re.id,...re.data()}));n(L)})()},[]);const z=async(D,W)=>{try{if(!window.confirm("¬øDesea eliminar este enlace?"))return;const L=$(F,"db_notificaciones",W),re=await De(L);if(re.exists()){const U=re.data();if(Array.isArray(U.enlace)){const ce=U.enlace.filter((oe,xe)=>xe!==D);await K(L,{enlace:ce}),alert("Enlace eliminado con exito ")}else alert("El campo 'enlace' no existe o no es un array.")}else alert("No se encontr√≥ el documento con el ID proporcionado.")}catch(X){alert.error("Error al eliminar el enlace:",X)}},R=async D=>{if(window.confirm("¬øEst√°s seguro de que deseas eliminar esta notificaci√≥n?")){f(!0);try{await Ne($(F,"db_notificaciones",D)),r(X=>X.filter(L=>L.id!==D)),alert("Se elimin√≥ la notificaci√≥n")}catch(X){console.error("Error al eliminar la notificaci√≥n:",X),alert("Hubo un error al eliminar la notificaci√≥n.")}finally{f(!1)}}},Y=D=>{b(D),l(!0)},le=()=>{l(!1),b(null),g("")},de=D=>{b(D),c(!0)},he=async()=>{if(p&&d)try{const D=ye(G(F,"db_personas"),Oe("nombre_apellido","==",d)),W=await ne(D);if(W.empty)alert("No se encontr√≥ la persona seleccionada.");else{const X=W.docs[0];await Promise.all([K($(F,"db_notificaciones",p),{asociada:Pe(d)}),K($(F,"db_personas",X.id),{asociada_notificacion_id:Pe(p)})]),alert(`La persona ${d} se asoci√≥ a la notificaci√≥n.`),le()}}catch(D){console.error("Error al asociar captura:",D),alert("Hubo un error al asociar la captura.")}else alert("Por favor, selecciona una persona para asociar.")},ie=async(D,W,X)=>{if(window.confirm(`¬øEst√°s seguro de que deseas eliminar la asociaci√≥n de la persona ${X} con la notificaci√≥n?`)){f(!0);try{const re=$(F,"db_notificaciones",D);await K(re,{asociada:Re(X)});const U=$(F,"db_personas",W);await K(U,{asociada_notificacion_id:Re(D)}),alert(`Se elimin√≥ la asociaci√≥n de la persona ${X} con la notificaci√≥n.`)}catch(re){console.error("Error al eliminar la asociaci√≥n:",re),alert("Hubo un error al eliminar la asociaci√≥n.")}finally{f(!1)}}else alert(`La asociaci√≥n de la persona ${X} no fue eliminada.`)},T=D=>{switch(D){case"1":return"Informativa";case"2":return"Paradero üîé";case"3":return"Evasi√≥n üëÆüèª";case"4":return"Prioritaria ‚≠ê";default:return"No definida"}},B=D=>{switch(D){case 1:return"Normal";case 2:return"Paradero üîé";case 3:return"Evasi√≥n üëÆüèª";case 4:return"Prioritaria ‚≠ê";default:return"No definida"}},te=D=>/^https?:\/\//.test(D)?D:`https://${D}`,ae=async D=>{if(S.trim()){f(!0);try{const W=$(F,"db_notificaciones",D);await K(W,{contenido:S}),alert("Contenido actualizado correctamente"),j(null)}catch(W){console.error("Error al actualizar contenido:",W),alert("Hubo un error al actualizar el contenido.")}finally{f(!1)}}else alert("El contenido no puede estar vac√≠o")},O=async D=>{if(w.trim()){f(!0);try{const W=$(F,"db_notificaciones",D);await K(W,{titulo:w}),alert("titulo actualizado correctamente"),h(null)}catch(W){console.error("Error al actualizar titulo:",W),alert("Hubo un error al actualizar el titulo.")}finally{f(!1)}}else alert("El titulo no puede estar vac√≠o")};return e.jsxs("div",{children:[e.jsxs("div",{className:"row g-3 justify-content-center align-items-center mt-1",children:[e.jsxs("div",{className:"container",children:[H&&e.jsx(ca,{Date1:"Ninguno",Date2:"Desactivar Busqueda",onCerrar:()=>A(!1),color:"info"}),!H&&e.jsx("div",{className:"d-flex justify-content-end mb-1  ",children:e.jsxs("button",{className:"btn  fw-semibold",onClick:()=>A(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 titilar text-light"})," ",e.jsx("small",{className:"text-light",children:"Ayuda"})]})})]}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 text-center",children:e.jsxs("button",{className:"btn btn-light bg-opacity-50 fw-semibold px-4 d-flex align-items-center justify-content-center gap-2 shadow-sm border border-primary-subtle rounded-4",onClick:q,children:[e.jsx("span",{children:"Nuevo Notificaci√≥n"}),e.jsx("i",{className:"bi bi-envelope-plus titilar",style:{fontSize:"1.5rem"}})]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-6 position-relative",children:e.jsxs("div",{className:"form-floating shadow rounded-4 border border-primary-subtle",children:[e.jsx("i",{className:"bi bi-sort-down-alt text-primary position-absolute top-50 start-0 translate-middle-y ms-3",style:{fontSize:"1.4rem",zIndex:2}}),e.jsxs("select",{className:"form-select ps-5 text-center",id:"floatingSelectOrder",value:y,onChange:J,children:[e.jsx("option",{value:"desc",children:"üì• M√°s recientes primero"}),e.jsx("option",{value:"asc",children:"üì§ M√°s antiguos primero"})]}),e.jsx("label",{htmlFor:"floatingSelectOrder",children:"Ordenar por fecha"})]})})]}),e.jsx("div",{className:"row justify-content-center  ",children:e.jsx("div",{className:"col-12 col-md-10  ",children:e.jsx("div",{className:"list-group",children:s.map(D=>{var W;return e.jsxs("div",{className:"list-group-item mb-4 shadow mt-5  ",children:[e.jsxs("div",{className:"d-flex align-items-center bg-gradiante2 text-white p-3 rounded",children:[e.jsx("button",{className:"btn bg-primaryMuiBlue px-3 border-white border-3 text-white rounded-pill position-absolute top-0 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Notificaci√≥n",e.jsx("i",{className:"bi bi-send-check-fill ms-1 text-white"})]})}),e.jsx("span",{className:`badge rounded-pill me-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[D.caratula]||"bg-warning text-dark"}`,children:T(D.caratula)}),e.jsx("div",{className:"flex-grow-1"}),e.jsx("small",{className:"text-end",children:new Date(((W=D.timestamp)==null?void 0:W.seconds)*1e3).toLocaleString()})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"T√≠tulo"}),D.id===x?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:w,onChange:X=>C(X.target.value),className:"form-control"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>O(D.id),disabled:u,children:u?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:D.titulo}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${D.id===x?"btn-danger":"btn-primary"}`,onClick:()=>{D.id===x?h(null):(C(D.titulo),h(D.id))},children:e.jsx("i",{className:`bi ${D.id===x?"bi-x-circle":"bi-pencil"}`})})}),e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Contenido"}),D.id===m?e.jsxs("div",{children:[e.jsx("textarea",{value:S,onChange:X=>k(X.target.value),className:"form-control",rows:"5"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>ae(D.id),disabled:u,children:u?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:D.contenido}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${D.id===m?"btn-danger":"btn-primary"}`,onClick:()=>{D.id===m?j(null):(k(D.contenido),j(D.id))},children:e.jsx("i",{className:`bi ${D.id===m?"bi-x-circle":"bi-pencil"}`})})}),D.enlace&&D.enlace.length>0?e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Enlaces Asociados"}),e.jsx("ul",{className:"list-unstyled",children:D.enlace.map((X,L)=>e.jsxs("li",{className:"d-flex align-items-center justify-content-center gap-3 p-2 rounded-pill bg-light shadow-sm",children:[e.jsx("i",{className:"bi bi-browser-chrome text-primary girar",style:{fontSize:"20px"}}),e.jsx("a",{href:te(X),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none text-primary text-center flex-grow-1",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:X}),e.jsx("button",{className:"btn btn-redUi1 btn-sm rounded-circle",onClick:()=>z(L,D.id),children:e.jsx("i",{className:"bi bi-trash text-white"})})]},L))})]}):e.jsx("p",{className:"text-danger mt-3 text-center",children:"No posee enlaces asociados"}),D.asociada&&D.asociada.length>0?e.jsxs("div",{className:"mt-3  ",children:[e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded",children:"Personas Asociadas"}),D.asociada.map((X,L)=>{var U,ce;const re=t.find(oe=>oe.nombre_apellido===X);return re?e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2  shadow-sm bg-primary rounded-4 bg-opacity-25",children:[e.jsx("img",{src:((U=re.base64)==null?void 0:U.trim())||$e,alt:re.nombre_apellido||"Imagen no disponible",className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[L+1,". ",X]}),((ce=re.asociada_notificacion_id)==null?void 0:ce.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>V(re),children:["Asociado ",re.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>ie(D.id,re.id,X),children:e.jsx("i",{className:"bi bi-trash"})})]},L):null})]}):e.jsx("span",{className:"text-danger text-center d-block",children:"No hay personas asociadas"})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 p-3",children:[e.jsx("button",{className:"btn btn-cyan text-white btn-sm rounded-circle ",onClick:()=>Y(D.id),children:e.jsx("i",{className:"bi bi-person-fill-add"})}),e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle ",onClick:()=>de(D.id),children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle ",onClick:()=>R(D.id),disabled:u,children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]},D.id)})})})}),e.jsx("div",{className:`modal fade bg-dark ${i?"show d-block":""}`,tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!i,style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0 ",children:[e.jsxs("div",{className:"modal-header border-0 text-dark",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Persona a la Notificaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:le,"aria-label":"Cerrar",disabled:u})]}),e.jsxs("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:[d&&e.jsxs("div",{className:"alert alert-primary d-flex align-items-center mb-4 rounded-4 shadow-sm",children:[e.jsx("i",{className:"bi bi-person-check-fill fs-4 me-2"}),e.jsx("strong",{className:"mb-0",children:"Seleccionado:"}),e.jsx("span",{className:"ms-2",children:d}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-auto",onClick:()=>g(null),"aria-label":"Quitar selecci√≥n",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsx("label",{htmlFor:"persona",className:"form-label fw-semibold text-dark",children:"Buscar DNI o Nombre:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: Juan P√©rez o 12345678",value:I,onChange:D=>P(D.target.value),disabled:u}),e.jsx("button",{className:"btn btn-outline-danger ms-2",onClick:()=>P(""),disabled:!I||u,"aria-label":"Limpiar b√∫squeda",children:e.jsx("i",{className:"bi bi-trash"})})]}),I&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"fw-bold text-start mb-2",children:"Resultados:"}),e.jsx("ul",{className:"list-group mb-3",style:{maxHeight:"180px",overflowY:"auto"},"aria-live":"polite",children:t.filter(D=>`${D.nombre_apellido} ${D.documento}`.toLowerCase().includes(I.toLowerCase())).map(D=>{var W;return e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",onClick:()=>{g(D.nombre_apellido),P("")},style:{cursor:"pointer"},tabIndex:0,onKeyDown:X=>{X.key==="Enter"&&(g(D.nombre_apellido),P(""))},children:[e.jsx("img",{src:((W=D.base64)==null?void 0:W.trim())||$e,alt:D.nombre_apellido,className:"rounded-circle",style:{width:"45px",height:"45px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("p",{className:"mb-0 fw-semibold",children:D.nombre_apellido}),e.jsx("small",{className:"text-muted",children:D.documento})]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[D.prioridad]||"bg-warning text-dark"}`,children:B(D.prioridad)})]},D.id)})})]}),e.jsx("label",{htmlFor:"dropdownMenuButton",className:"form-label fw-semibold text-dark",children:"Buscar en lista:"}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 text-truncate",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:u,children:d||"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"250px",overflowY:"auto"},children:t.filter(D=>`${D.nombre_apellido} ${D.documento}`.toLowerCase().includes(I.toLowerCase())).map(D=>{var W;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center gap-2",onClick:()=>g(D.nombre_apellido),type:"button",children:[e.jsx("img",{src:((W=D.base64)==null?void 0:W.trim())||$e,alt:D.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[D.nombre_apellido," - ",D.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[D.prioridad]||"bg-warning text-dark"}`,children:B(D.prioridad)})]})},D.id)})})]})]}),e.jsxs("div",{className:"modal-footer border-0 pt-0",children:[e.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:he,disabled:u||!d,children:u?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{children:"Asociando..."})]}):e.jsxs(e.Fragment,{children:["Asociar Captura ",e.jsx("i",{className:"bi bi-person-plus-fill"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:le,disabled:u,children:"Cerrar"})]})]})})}),e.jsx(oa,{showModalLink:o,setShowModalLink:c,selectedNotifId:p,setNewLink:N,newLink:v,setNotificaciones:r}),e.jsx(Lt,{showModalNot:M,closeModalNot:Z})]})}const $t=({loading:s})=>e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"position-relative",children:s?e.jsx(se,{}):e.jsx("div",{className:"list-group",children:e.jsx(Rt,{})})})}),zt="/gif/dash.gif",Tt=()=>{const s=localStorage.getItem("user");return s?JSON.parse(s):null},ns=Tt();var Xs;const qs=((Xs=ns==null?void 0:ns.email)==null?void 0:Xs.split("@")[0])||"Usuario Sin Registro",Bt=qs.charAt(0).toUpperCase()+qs.slice(1),Ot=()=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center  mt-5 text-light",children:[e.jsxs("span",{className:"display-4 mb-2",children:["¬°Bienvenido ",Bt,"!"]}),e.jsx("span",{className:"mb-5 ",children:"Este panel de control te permite gestionar usuarios, ver estad√≠sticas y configurar las opciones del sistema."}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Desde aqu√≠ podr√°s administrar los recursos del sistema de forma f√°cil y eficiente."})]}),e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-lightbulb  p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Ante cualquier inconveniente, no dudes en solicitar asistencia t√©cnica."})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:zt,alt:"Panel de control gr√°fico",className:"img-fluid p-2 rounded-circle shadow",style:{maxWidth:"300px",height:"auto"}})})]})]}),Ut=({loading:s})=>{const[r,t]=a.useState([]),[n,i]=a.useState([]),l=["captura","date","descripcion_fisica","documento","entidad","motivo_captura","nombre_apellido","paradero","prioridad","sexo","usuario","asociada_notificacion_id"],o={captura:"Captura",date:"Fecha",descripcion_fisica:"Datos de la Persona",documento:"Documento",entidad:"Entidad",motivo_captura:"Motivo de Captura",nombre_apellido:"Nombre y Apellido",paradero:"Paradero",prioridad:"Prioridad",sexo:"Sexo",usuario:"Usuario",asociada_notificacion_id:"ID Notificaci√≥n "},c=async()=>{try{const h=(await ne(G(F,"db_personas"))).docs.map(d=>({id:d.id,...d.data()}));t(h)}catch(x){console.error("Error al obtener los datos:",x)}},p=x=>{i(h=>h.includes(x)?h.filter(d=>d!==x):[...h,x])},b=()=>{i(l)},m=()=>{i([])},j=()=>{if(r.length===0||n.length===0)return;const x=r.map(g=>{const u={};return n.forEach(f=>{u[o[f]||f]=g[f]}),u}),h=ke.json_to_sheet(x),d=ke.book_new();ke.book_append_sheet(d,h,"Datos Seleccionados"),qe(d,"Datos_Seleccionados.xlsx")};return a.useEffect(()=>{c()},[]),e.jsx(e.Fragment,{children:s?e.jsx(se,{leyendaSet:"Exportar - Cx2"}):e.jsx("div",{className:"container-lg  mt-5 mt-md-0 text-white",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center ",children:[e.jsxs("span",{className:"mb-4 display-5",children:["Exportar Datos  ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportaci√≥n."}),e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:m,children:"Limpiar selecci√≥n"})]}),e.jsx("form",{className:"mb-4 w-100 px-3 ",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border border-1",children:l.map(x=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:x,value:x,onChange:()=>p(x),checked:n.includes(x)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:x,children:o[x]||x})]})},x))})}),n.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn bg-green bg-opacity-50 text-white fw-semibold",onClick:j,children:["Descargar datos seleccionados ",e.jsx("i",{className:"bi bi-file-earmark-arrow-down-fill ms-2"})]})})]})})})},da=({data1:s,data2:r})=>{var x;const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),[o,c]=a.useState(""),b=(()=>{const h=localStorage.getItem("user");return h?JSON.parse(h):null})(),m=async h=>{if(window.confirm("¬øEst√°s seguro de que deseas eliminar esta persona?"))try{const d=$(F,"db_personas_desactivados",h.id),g=new Date,u=`${g.getDate().toString().padStart(2,"0")}/${(g.getMonth()+1).toString().padStart(2,"0")}/${g.getFullYear().toString().slice(-2)}`;await we(d,{...h,usuario_baja:b.email||"usuario_desconocido",usuario_baja_fecha:u});const f=$(F,"db_personas",h.id);await Ne(f),r(),c("Persona eliminada y copiada a la colecci√≥n de desactivados."),setTimeout(()=>c(""),3e3)}catch(d){console.error("Error al eliminar persona: ",d),c("Error al eliminar la persona. Int√©ntalo de nuevo."),setTimeout(()=>c(""),3e3)}},j=h=>{m(h),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-trash3-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Eliminar Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(x=s.base64)==null?void 0:x.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-danger  bg-redW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas eliminar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:()=>{j(s)},children:"Confirmar Eliminaci√≥n"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},qt=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),[o,c]=a.useState(),[p,b]=a.useState(s.descripcion_fisica),[m,j]=a.useState(s.documento),[x,h]=a.useState(s.entidad),[d,g]=a.useState(s.motivo_captura),[u,f]=a.useState(s.nombre_apellido),[v,N]=a.useState(s.prioridad),[S,k]=a.useState(s.sexo),[w,C]=a.useState(s.numero_contacto),[y,_]=a.useState(s.base64),[M,E]=a.useState("edicion desde menu de capturas"),[I,P]=a.useState(s.paradero),[q,Z]=a.useState(s.alerta),[H,A]=a.useState(!1),[V,J]=a.useState(!1),[ee,z]=a.useState(!1),R=()=>{const ae={nombre_apellido:u,documento:m,sexo:S,descripcion_fisica:p,entidad:x,motivo_captura:d,numero_contacto:w,prioridad:v,alerta:q,paradero:I};return["nombre_apellido","documento","sexo","descripcion_fisica","entidad","motivo_captura","numero_contacto","prioridad","alerta","paradero"].filter(W=>ae[W]!==s[W])},Y=()=>{A(ae=>!ae)},le=()=>{J(ae=>!ae)},de=()=>{z(ae=>!ae)},he=ae=>{const O=ae.target.files[0];if(O){const D=new FileReader;D.onloadend=()=>{_(D.result)},D.readAsDataURL(O)}else alert("Por favor, selecciona un archivo de imagen v√°lido.")},ie=async()=>{const ae=/^[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s]+$/;if(!u.trim()){alert("El campo Nombre y Apellido no puede estar vac√≠o.");return}if(!ae.test(u)){alert("El campo Nombre y Apellido solo debe contener letras.");return}const O=/^[0-9]+$/;if(!m.trim()){alert("El campo Documento no puede estar vac√≠o.");return}if(!O.test(m)){alert("El campo Documento solo debe contener n√∫meros.");return}if(m.length<8){alert("El Documento debe tener al menos 8 d√≠gitos.");return}if(!M.trim()){alert("La descripci√≥n de las ediciones es obligatoria.");return}const D=$(F,"db_personas",s.id),W=R();try{c(!0);const X=new Date,L=`${X.getDate().toString().padStart(2,"0")}/${(X.getMonth()+1).toString().padStart(2,"0")}/${X.getFullYear().toString().slice(-2)}`;await K(D,{descripcion_fisica:p,documento:m,entidad:x,motivo_captura:d,nombre_apellido:u,prioridad:v,sexo:S,numero_contacto:w,alerta:q,base64:y,paradero:I,ediciones:M.trim()?[...s.ediciones||[],{motivo:M,usuario:te.email,fecha:L,campos:W}]:s.ediciones||[]}),r(),alert("Los cambios se han guardado correctamente.")}catch(X){console.error("Error al actualizar la persona: ",X),alert("Error al guardar los cambios. Int√©ntalo de nuevo.")}c(!1)},T=ae=>{const O=parseInt(ae.target.value,10);N(O),O===2&&(P(!0),Z(!1)),O===1&&(P(!1),Z(!1)),O===3&&(Z(!0),P(!1)),O===4&&(P(!1),Z(!1))},te=(()=>{const ae=localStorage.getItem("user");return ae?JSON.parse(ae):null})();return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-pen"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header ",children:[" ",e.jsx("img",{src:"img/asistente.gif",alt:"Asistente",style:{width:"60px",height:"60px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border "}),e.jsx("h5",{className:"modal-title mx-4",children:"Asistente de Edici√≥n "}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:`col-3 mt-3 d-flex align-items-center ${H?"titilar":""}`,children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:Y,children:[e.jsx("img",{src:y||"https://via.placeholder.com/40",alt:(y==null?void 0:y.nombre_apellido)||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:H?"Editando":"Editar"})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:u,onChange:ae=>f(ae.target.value)}),e.jsx("label",{className:" badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control",value:m,onChange:ae=>j(ae.target.value)}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select text-center",value:S,onChange:ae=>k(ae.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una Opci√≥n"}),e.jsx("option",{value:"masculino",children:"Masculino üë®"}),e.jsx("option",{value:"femenino",children:"Femenino üë©"}),e.jsx("option",{value:"otros",children:"Otros üë≠üèª"})]}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Sexo"})]})})]})]}),e.jsxs("div",{className:"btn-group mt-3",role:"group","aria-label":"Basic example",children:[e.jsx("button",{type:"button",className:`btn btn-secondaryM text-white ${ee?"titilar":""}`,onClick:de,children:ee?e.jsx(e.Fragment,{children:"Editando Datos de Captura "}):"Datos de Captura"}),e.jsx("button",{type:"button",className:`btn btn-primary text-white ${V?"titilar":""}`,onClick:le,children:V?e.jsx(e.Fragment,{children:"Editando Descripciones"}):"Descripciones"})]}),H&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Editar Fotograf√≠a ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:Y})}),e.jsxs("div",{className:"my-3 text-center text-purple",children:[e.jsx("input",{type:"file",className:"form-control",onChange:he}),y&&e.jsx("img",{src:y,alt:"Imagen previa",className:"img-fluid mt-5",style:{maxWidth:"300px"}})]})]})]}),ee&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Datos de la Captura ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:de})}),e.jsx("span",{className:"badge text-bg-secondaryM text-white me-2 ",children:"Atenci√≥n "}),e.jsxs("small",{children:["La prioridad ",e.jsx("strong",{children:"modifica el contexto"})," de la captura"]})]}),e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{className:"form-select text-center shadow-sm border border-secondaryM mb-3  border-opacity-50 ",value:v,onChange:T,children:[e.jsx("option",{value:"",children:"Seleccione una Opci√≥n"}),e.jsx("option",{value:"2",children:"Paradero üîé"}),e.jsx("option",{value:"3",children:"Evadido üö®"}),e.jsx("option",{value:"4",children:"Prioridad ‚≠ê"})]}),e.jsx("label",{className:"fw-semibold opacity-75 ms-2",children:"Prioridad"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Entidad que solicita captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:x,onChange:ae=>h(ae.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Numero de Contacto Entidad "})}),e.jsx("input",{className:"form-control bg-blueW2",value:w,onChange:ae=>C(ae.target.value)})]})]}),V&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Descripciones ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:le})}),e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Datos de Interes "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:p,onChange:ae=>b(ae.target.value),style:{minHeight:"160px"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Motivo Captura "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:d,onChange:ae=>g(ae.target.value),style:{minHeight:"150px"}})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:l,children:e.jsx("i",{className:"bi bi-x-circle"})}),e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle",onClick:ie,disabled:o,children:o?e.jsx("i",{className:"bi bi-floppy2 titilar"}):e.jsx("i",{className:"bi bi-floppy2"})})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ts=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1),[o,c]=a.useState(""),[p,b]=a.useState(!1),m=()=>l(!0),j=()=>l(!1),x=()=>{n([])},d=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),g=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas copiar estas personas a la colecci√≥n de desactivados?"))){b(!0);try{const v=r.filter(N=>s.includes(N.id)).map(async N=>{const S=G(F,"db_personas_desactivados"),k=new Date,w=`${k.getDate().toString().padStart(2,"0")}/${(k.getMonth()+1).toString().padStart(2,"0")}/${k.getFullYear().toString().slice(-2)}`;await Ie(S,{...N,usuario_baja:(d==null?void 0:d.email)||"usuario_desconocido",usuario_baja_fecha:w});const C=$(F,"db_personas",N.id);await Ne(C)});await Promise.all(v),c("Personas copiadas a la colecci√≥n de desactivados y eliminadas de la colecci√≥n original."),t(),x()}catch(f){console.error("Error al eliminar personas:",f),c("Hubo un error al copiar o eliminar algunas personas.")}setTimeout(()=>c(""),3e3),b(!1),j()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:m,disabled:p,children:e.jsx("i",{className:"bi bi-trash3-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Eliminar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:j})]}),e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-redW p-2 rounded-pill text-secondaryMuiRed fw-bold",children:["Se eliminar√°n ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>s.includes(u.id)).map(u=>{var f;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(f=u.base64)==null?void 0:f.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),u.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(v=>v.filter(N=>N!==u.id)),title:"Quitar de la selecci√≥n"})]},u.id)})}),e.jsxs("p",{className:"text-danger text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas eliminar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:j,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:g,disabled:p,children:p?"Eliminando...":"Confirmar Eliminaci√≥n"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"}),o&&e.jsx("div",{className:"alert alert-success mt-2",children:o})]})},Je=({Date1:s,Date2:r,setSelectedDocs:t,onCerrar:n,color:i})=>e.jsxs("div",{className:`card bg-${i} shadow my-4 position-relative text-dark d-flex align-items-start gap-3 p-4 card text-center p-2 bg-dark bg-opacity-75 rounded-4 shadow-lg`,style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:n}),e.jsx("img",{src:"img/Perfiles/9.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:e.jsx("strong",{children:"Asistente de Selecci√≥n"})}),e.jsxs("p",{className:"mb-3",children:["Personas Seleccionadas: ",e.jsxs("strong",{children:[s.length," üßë"]})]}),e.jsx("strong",{children:s.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-start p-2 rounded mb-3  ",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(l=>s.includes(l.id)).map(l=>{var o;return e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative bg-light bg-opacity-50 m-1",style:{fontSize:"0.75rem"},children:[e.jsx("img",{src:(o=l.base64)==null?void 0:o.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),l.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>t(c=>c.filter(p=>p!==l.id)),title:"Quitar de la selecci√≥n"})]},l.id)})}):e.jsx("span",{className:"text-danger",children:"Ninguna"})})]})]}),Ye=({searchTerm:s,setSearchTerm:r})=>e.jsxs("div",{className:"form-floating mb-3 position-relative  ",children:[e.jsx("input",{type:"text",className:"form-control  shadow-sm pe-5 bg-dark bg-opacity-50 text-light",placeholder:"Buscar por nombre",value:s,onChange:t=>r(t.target.value)}),e.jsx("label",{children:"Buscar por Nombre"}),s&&e.jsx("button",{type:"button",className:"btn btn-link position-absolute top-50 end-0 translate-middle-y pe-3 ",onClick:()=>r(""),"aria-label":"Cancelar b√∫squeda",children:e.jsx("i",{className:"bi bi-x-circle text-light "})})]}),ma=({prioridadFilter:s,setPrioridadFilter:r})=>e.jsxs("div",{className:"form-floating mb-3  ",children:[e.jsxs("select",{className:"form-select shadow-sm ","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todas las Prioridades"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero üîé"}),e.jsx("option",{value:"3",children:"Evadido üö®"}),e.jsx("option",{value:"4",children:"Prioritaria ‚≠ê"})]}),e.jsx("label",{children:"Seleccione una Prioridad"})]}),Ze=({orden:s,setOrden:r})=>e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Ordenar alfab√©ticamente",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"asc",children:"Orden A-Z"}),e.jsx("option",{value:"desc",children:"Orden Z-A"})]}),e.jsxs("label",{children:["Ordenar ",e.jsx("i",{className:"bi bi-alphabet"})]})]}),Vt=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0);a.useState("");const[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState(!0),[d,g]=a.useState("asc"),u=G(F,"db_personas"),f=async()=>{c(!0);try{const C=(await ne(u)).docs.map(y=>({...y.data(),id:y.id}));r(C),n(C)}catch(w){console.error("Error al obtener personas: ",w)}finally{c(!1)}},v=w=>w.sort((C,y)=>d==="asc"?C.nombre_apellido.localeCompare(y.nombre_apellido):y.nombre_apellido.localeCompare(C.nombre_apellido));a.useEffect(()=>{f()},[]),a.useEffect(()=>{const w=s.filter(y=>y.nombre_apellido&&y.nombre_apellido.toLowerCase().includes(p.toLowerCase())||y.documento&&y.documento.includes(p)).filter(y=>m?y.prioridad===parseInt(m,10):!0),C=v(w);n(C)},[p,s,m,d]),a.useMemo(()=>t.filter(w=>i.includes(w.id)),[i,t]);const N=w=>{l(C=>C.includes(w)?C.filter(y=>y!==w):[...C,w])},S=()=>{if(i.length===t.length)l([]);else{const w=t.map(C=>C.id);l(w)}},k=w=>{switch(Number(w)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero üîé"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido üö®"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ‚≠ê"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center my-5 animate__animated animate__bounce mt-sm-0 mt-5 ",children:"Listado de Capturas"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(Ye,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(ma,{prioridadFilter:m,setPrioridadFilter:j})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Ze,{orden:d,setOrden:g})})]}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(ts,{data1:i,data2:s,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),x&&e.jsx(Je,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>h(!1),color:"blueW2"}),!x&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>h(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-light",children:[i.length," üßë"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5  ",children:e.jsxs("table",{className:"table table-striped table-hover text-center small rounded-pill",children:[e.jsx("thead",{className:"table-info",children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:S})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(w=>{var C;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(w.id),onChange:()=>N(w.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((C=w.base64)==null?void 0:C.trim())||"https://via.placeholder.com/40",alt:w.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:w.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:w.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:k(w.prioridad)}),e.jsxs("td",{children:[e.jsx(qt,{data1:w,data2:f}),e.jsx(da,{data1:w,data2:f})]}),e.jsx("td",{})]},w.id)})})]})})]})})]})},ys=({prioridadFilter:s,setPrioridadFilter:r,personas:t})=>{const n=[...new Set(t.map(i=>i.entidad))];return e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:s,onChange:i=>r(i.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),n.map((i,l)=>e.jsx("option",{value:i,children:i},l))]}),e.jsx("label",{children:"Seleccione una Entidad"})]})},ws=(s,r,t)=>s.filter(n=>{var i,l;return((i=n.nombre_apellido)==null?void 0:i.toLowerCase().includes(r.toLowerCase()))||((l=n.documento)==null?void 0:l.includes(r))}).filter(n=>!t||n.entidad===t),Cs=(s,r)=>s.sort((t,n)=>r==="asc"?t.nombre_apellido.localeCompare(n.nombre_apellido):n.nombre_apellido.localeCompare(t.nombre_apellido)),Gt=(s,r)=>r?s.filter(t=>r==="capturado"?t.captura===!0:r==="evadido"?t.captura===!1:!0):s,Ss=(s,r,t,n)=>{s(""),r(""),t("asc"),n&&n("")},Ht=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!1),[l,o]=a.useState(!1),[c,p]=a.useState(""),[b,m]=a.useState(""),[j,x]=a.useState(""),d=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),g=async()=>{if(window.confirm(`¬øEst√°s seguro de que deseas ${j}?`)){o(!0);try{const v=$(F,"db_personas",s.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await we(v,{...s,captura:!0,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:(d==null?void 0:d.email)||"Usuario desconocido",captura_fecha:S,captura_autor:b,captura_descripcion:c}]}),r(),o(!1),alert(`${j} realizado.`)}catch(v){console.error("Error al modificar persona: ",v),alert("Error al modificar la persona. Int√©ntalo de nuevo."),o(!1)}}},u=async()=>{if(window.confirm("¬øEst√°s seguro de que deseas QUITAR EL ESTADO DE CAPTURADO?")){o(!0);try{const v=$(F,"db_personas",s.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await K(v,{...s,captura:!1,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"quitar estado de captura",captura_quita_estado_usuario:(d==null?void 0:d.email)||"Usuario desconocido",captura_quita_fecha:S}]}),r(),alert("Captura quitada correctamente."),o(!1)}catch(v){console.error("Error al quitar la captura:",v),alert("No se pudo quitar la captura. Int√©ntalo de nuevo."),o(!1)}}},f=()=>{n(!0),x("Informar Captura de Persona")};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`btn btn-sm rounded-circle m-1 ${s.captura?"btn-pink text-white":"btn-orange text-white"}`,onClick:s.captura?u:f,disabled:l,title:s.captura?"Quitar estado de captura":"Marcar como capturado",children:e.jsx("i",{className:`bi ${s.captura?"bi-person-fill-slash":"bi-person-fill-check"}`})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsx("h5",{className:"modal-title mx-3",children:j}),e.jsx("button",{type:"button",className:"btn-close",onClick:i})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3 mt-3 d-flex align-items-center",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},children:[e.jsx("img",{src:s.base64?s.base64.trim():"",alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:e.jsx("span",{children:"Capturado üëÆ"})})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.nombre_apellido,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border",value:s.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.sexo,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Sexo"})]})})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM"}),j," ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Autor / Entidad que realiz√≥ la captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:b,onChange:v=>m(v.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Breve relato de la captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:c,onChange:v=>p(v.target.value)})]})]}),e.jsxs("p",{className:"text-primary bg-blueW rounded my-2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ","¬øEst√°s seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:g,disabled:!b||!c||l,children:j})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Wt=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),[i,l]=a.useState(!1),[o,c]=a.useState(""),[p,b]=a.useState("marcar"),m=()=>{s.encontrado?(c("Quitar estado de encontrada"),b("quitar")):(c("Informar Persona Encontrada"),b("marcar")),n(!0)},j=()=>n(!1),h=(()=>{const g=localStorage.getItem("user");return g?JSON.parse(g):null})(),d=async()=>{if(window.confirm(`¬øEst√°s seguro de que deseas ${p==="marcar"?"marcar como persona encontrada":"quitar el estado de persona  encontrada"}?`)){l(!0);try{const g=$(F,"db_personas",s.id),u=new Date,f=`${u.getDate().toString().padStart(2,"0")}/${(u.getMonth()+1).toString().padStart(2,"0")}/${u.getFullYear().toString().slice(-2)}`;await we(g,{...s,encontrado:p==="marcar",prioridad:p==="marcar"?2:s.prioridad,paradero:p==="marcar"?!1:s.paradero,alerta:p==="marcar"?!1:s.alerta,ediciones:[...s.ediciones||[],{motivo:p==="marcar"?"Informar persona encontrada":"Quitar estado de encontrada",usuario:(h==null?void 0:h.email)||"Usuario desconocido",fecha:f}]}),r(),alert(p==="marcar"?"Persona marcada como encontrada correctamente.":"Estado de encontrada quitado correctamente.")}catch(g){console.error("Error al modificar persona: ",g),alert("Error al modificar la persona. Int√©ntalo de nuevo.")}finally{l(!1),n(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`btn btn-sm rounded-circle m-1 ${s.encontrado?"btn-blue text-white":"btn-primary text-white"}`,onClick:m,disabled:i,title:s.encontrado?"Quitar estado de encontrada":"Informar persona encontrada",children:e.jsx("i",{className:`bi ${s.encontrado?"bi-person-check-fill":"bi-person-fill-slash "}`})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-capitalize",children:o}),e.jsx("button",{type:"button",className:"btn-close",onClick:j})]}),e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("img",{src:s.base64?s.base64.trim():"",alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm me-3",style:{width:"70px",height:"70px",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"m-0",children:[e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"]}),e.jsxs("p",{className:"m-0",children:[e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]})]})]}),e.jsxs("p",{className:"text-primary bg-blue-50 rounded my-2 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"}),p==="marcar"?"¬øEst√°s seguro que deseas informar a esta persona como encontrada?":"¬øEst√°s seguro que deseas quitar el estado de encontrada?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:j,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:d,disabled:i,children:"Confirmar Cambio"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Jt=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!1),[l,o]=a.useState(!1),[c,p]=a.useState(""),[b,m]=a.useState(""),[j,x]=a.useState(""),d=(()=>{const N=localStorage.getItem("user");return N?JSON.parse(N):null})(),g=async()=>{if(window.confirm(`¬øEst√°s seguro de que deseas ${j}?`)){o(!0);try{const N=$(F,"db_personas",s.id),S=new Date,k=`${S.getDate().toString().padStart(2,"0")}/${(S.getMonth()+1).toString().padStart(2,"0")}/${S.getFullYear().toString().slice(-2)}`;await we(N,{...s,captura:!0,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:d.email,captura_fecha:k,captura_autor:b,captura_descripcion:c}]}),r(),o(!1),alert(`${j} realizado.`)}catch(N){console.error("Error al modificar persona: ",N),alert("Error al modificar la persona. Int√©ntalo de nuevo.")}}},u=async N=>{console.log(N),o(!0);try{const S=$(F,"db_personas",N),k=new Date,w=`${k.getDate().toString().padStart(2,"0")}/${(k.getMonth()+1).toString().padStart(2,"0")}/${k.getFullYear().toString().slice(-2)}`;await K(S,{...N,prioridad:1,capturas_informacion_estados:[...N.capturas_informacion_estados||[],{captura_motivo:"desactivar alerta",captura_informa_usuario:d.email,captura_fecha:w}]}),r(),o(!1),alert("Alerta desactivada correctamente.")}catch{alert("No se pudo desactivar la alerta.")}},f=()=>{n(!0),x("Informar Captura de Persona")},v=async()=>{if(window.confirm("¬øEst√°s seguro de que deseas QUITAR EL ESTADO DE  CAPTURADO ?")){o(!0);try{const N=$(F,"db_personas",s.id),S=new Date,k=`${S.getDate().toString().padStart(2,"0")}/${(S.getMonth()+1).toString().padStart(2,"0")}/${S.getFullYear().toString().slice(-2)}`;await K(N,{...s,captura:!1,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"quitar estado de captura",captura_quita_estado_usuario:d.email,captura_quita_fecha:k}]}),r(),alert("Captura quitada correctamente."),o(!1)}catch(N){console.error("Error al quitar la captura:",N),alert("No se pudo quitar la captura. Int√©ntalo de nuevo."),o(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:s.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex flex-column gap-1",children:[s.captura?e.jsx("button",{className:"btn btn-pink text-white btn-sm w-100",onClick:()=>{v()},children:"Quitar Captura"}):e.jsx("button",{className:"btn btn-primary btn-sm w-100",onClick:f,disabled:l,children:"Marcar Capturado"}),s.alerta?e.jsx("button",{className:"btn btn-secondaryMuiRed text-white btn-sm w-100",onClick:()=>{window.confirm("¬øSeguro que deseas desactivar la alerta?")&&u(s.id)},children:"Desactivar Alerta"}):e.jsx("button",{className:"btn btn-secondaryM btn-sm w-100",disabled:!0,children:"Alerta Inactiva"})]})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsxs("h5",{className:"modal-title mx-3",children:[j," "]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:i})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3 mt-3 d-flex align-items-center",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},children:[e.jsx("img",{src:s.base64?s.base64.trim():"",alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:e.jsx("span",{children:"Capturado  üëÆ "})})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.nombre_apellido,disabled:!0}),e.jsx("label",{className:"badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border",value:s.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.sexo,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Sexo"})]})})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM"}),j," ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realiz√≥ la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:b,onChange:N=>m(N.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:c,onChange:N=>p(N.target.value)})]})]}),e.jsxs("p",{className:"text-primary bg-blueW rounded my-2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:g,disabled:!b||!c||l,children:j})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ks=({personas:s,selectedDocs:r,toggleSelectDoc:t,toggleSelectAll:n,getPrioridadLabel:i,fetchPersonas:l,isFiltered:o,color:c,prioridad:p})=>e.jsx("div",{className:"table-responsive-sm mt-5 ",children:e.jsxs("table",{className:"table table-striped table-hover  text-center small ",children:[e.jsx("thead",{className:"table-info",children:e.jsxs("tr",{className:"bg-light",children:[!o&&e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===s.length,onChange:n})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell ",children:"Entidad"}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"DNI"}),p===3?e.jsx("th",{className:"d-none d-sm-table-cell",children:"Fecha"}):null,e.jsx("th",{className:"d-none d-sm-table-cell",children:"Prioridad"}),p===3?e.jsx("th",{}):null,e.jsx("th",{})]})}),e.jsx("tbody",{children:s.map(b=>{var m;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{className:b.captura?"bg-redW":"",children:e.jsx("input",{type:"checkbox",checked:r.includes(b.id),onChange:()=>t(b.id)})}),e.jsx("td",{className:b.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((m=b.base64)==null?void 0:m.trim())||$e,alt:b.nombre_apellido,className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize d-inline-block text-truncate",children:b.nombre_apellido})]})}),e.jsx("td",{className:`d-none d-sm-table-cell text-dark ${b.captura?"bg-redW":c}`,children:b.entidad}),e.jsx("td",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.documento}),p===3?e.jsx("th",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.date}):null,e.jsx("td",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.captura?e.jsx("span",{className:"badge bg-dark",children:"Capturado üëÆ"}):i(b.prioridad)}),p===3?e.jsx(Jt,{data1:b,data2:l}):null,e.jsxs("td",{className:b.captura?"bg-redW":"",children:[p===4?e.jsx(Ht,{data1:b,data2:l}):null,p===2?e.jsx(Wt,{data1:b,data2:l}):null,e.jsx(da,{data1:b,data2:l})]})]},b.id)})})]})}),_s=s=>{switch(Number(s)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero üîé"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido üö®"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ‚≠ê"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}},Es=s=>{const[r,t]=a.useState([]),[n,i]=a.useState(!0),l=G(F,"db_personas"),o=async()=>{i(!0);try{let p=(await ne(l)).docs.map(b=>({...b.data(),id:b.id}));p=p.filter(b=>b.prioridad===s),t(p)}catch(c){console.error("Error al obtener personas: ",c)}finally{i(!1)}};return a.useEffect(()=>{o()},[]),{personas:r,loading:n,fetchPersonas:o}},Fs=s=>{const[r,t]=a.useState([]);return{selectedDocs:r,setSelectedDocs:t,toggleSelectDoc:l=>{t(o=>o.includes(l)?o.filter(c=>c!==l):[...o,l])},toggleSelectAll:()=>{if(s&&s.length>0)if(r.length===s.length)t([]);else{const l=s.map(o=>o.id);t(l)}}}},ua=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1);a.useState("");const[o,c]=a.useState(!1);a.useState(""),a.useState("");const p=()=>l(!0),b=()=>l(!1),m=()=>{n([])},x=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas QUITAR LOS ESTADOS DE CAPTURA üëÆ a estas personas ?"))){c(!0);try{const u=r.filter(f=>s.includes(f.id)).map(async f=>{const v=$(F,"db_personas",f.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await K(v,{...f,captura:!1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"quitar captura",captura_informa_usuario:x.email,captura_fecha:S}]})});await Promise.all(u),alert("Se quito las capturas de forma Exitosa"),t(),m()}catch(g){console.error("Error al modificar personas:",g),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-pink btn-sm w-100",onClick:p,disabled:o,children:["Quitar Capturas (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Quitar Estado de Capturados a Grupo "}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de  ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var g;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(g=d.base64)==null?void 0:g.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(u=>u.filter(f=>f!==d.id)),title:"Quitar de la selecci√≥n"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas quitar estado de captura ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:h,disabled:o,children:o?"Trabajando...":"Quitar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ha=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1);a.useState("");const[o,c]=a.useState(!1),[p,b]=a.useState(""),[m,j]=a.useState(""),x=()=>l(!0),h=()=>l(!1),d=()=>{n([])},u=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),f=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas dar por CAPTURADOS üëÆ a este grupo personas ?"))){c(!0);try{const S=r.filter(k=>s.includes(k.id)).map(async k=>{const w=$(F,"db_personas",k.id),C=new Date,y=`${C.getDate().toString().padStart(2,"0")}/${(C.getMonth()+1).toString().padStart(2,"0")}/${C.getFullYear().toString().slice(-2)}`;await K(w,{...k,captura:!0,capturas_informacion_estados:[...k.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:u.email,captura_fecha:y,captura_autor:m,captura_descripcion:p}]})});await Promise.all(S),alert("Capturas Exitosas"),t(),d()}catch(N){console.error("Error al modificar personas:",N),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),h()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-primary btn-sm w-100",onClick:x,disabled:o,children:["Marcar Capturas (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Marcar Grupo como Capturado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:h})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(v=>s.includes(v.id)).map(v=>{var N;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(N=v.base64)==null?void 0:N.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),v.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(S=>S.filter(k=>k!==v.id)),title:"Quitar de la selecci√≥n"})]},v.id)})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realiz√≥ la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:m,onChange:v=>j(v.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:p,onChange:v=>b(v.target.value)})]}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas marcar como capturados estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:f,disabled:!m||!p||o,children:o?"Trabajando...":"Confirmar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Yt=()=>{const[s,r]=a.useState(4),{personas:t,loading:n,fetchPersonas:i}=Es(s),[l,o]=a.useState([]),[c,p]=a.useState(""),[b,m]=a.useState(""),[j,x]=a.useState(!0),[h,d]=a.useState("asc"),{selectedDocs:g,setSelectedDocs:u,toggleSelectDoc:f,toggleSelectAll:v}=Fs(l||[]),N=c||b,S=g.every(C=>{const y=t.find(_=>_.id===C);return(y==null?void 0:y.captura)===!0}),k=g.every(C=>{const y=t.find(_=>_.id===C);return(y==null?void 0:y.captura)===!1||(y==null?void 0:y.captura)===void 0}),w=!S&&!k;return a.useEffect(()=>{const C=ws(t,c,b),y=Cs(C,h);o(y)},[c,t,b,h]),e.jsxs("div",{className:"container-lg my-5 text-light",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0",children:"Listado de Capturas Prioritarias"}),e.jsxs("div",{className:"card my-5 bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4",children:e.jsx(ys,{prioridadFilter:b,setPrioridadFilter:m,personas:t})}),e.jsx("div",{className:"col-12 col-sm-3 col-md-2",children:e.jsx(Ze,{orden:h,setOrden:d})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>Ss(p,m,d),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})]}),e.jsx("div",{className:"col-12",children:e.jsx(Ye,{searchTerm:c,setSearchTerm:p})}),n?e.jsx(se,{}):l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[g.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[!w&&e.jsxs(e.Fragment,{children:[S&&e.jsx(ua,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),k&&e.jsx(ha,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u})]}),e.jsx(ts,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>u([])})]}),j&&e.jsx(Je,{Date1:g,Date2:t,setSelectedDocs:u,onCerrar:()=>x(!1),color:"blueW2"}),!j&&g.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"}),e.jsxs("small",{className:"text-white",children:["Ver Resumen (",e.jsxs("span",{className:"text-white",children:[g.length," üßë"]}),")"]})]})})]}),e.jsx(ks,{personas:l,selectedDocs:g,toggleSelectDoc:f,toggleSelectAll:v,getPrioridadLabel:_s,fetchPersonas:i,isFiltered:N,color:"bg-yellowW",prioridad:s})]})]})},Zt=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1),[o,c]=a.useState(!1),p=()=>l(!0),b=()=>l(!1),m=()=>{n([])},x=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas recuperar estas personas?"))){c(!0);try{const u=r.filter(f=>s.includes(f.id)).map(async f=>{const v=$(F,"db_personas",f.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await we(v,{...f,recuperado:[...f.recuperado||[],{motivo:"recuperado manual",usuario:x.email,fecha:S,datos_resguardo_baja_previa:[{usuario_baja:f.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:f.usuario_baja_fecha||"fecha_no_disponible"}]}]});const k=$(F,"db_personas_desactivados",f.id);await Ne(k)});await Promise.all(u),alert("Personas recuperadas y eliminadas de la colecci√≥n de desactivados."),t(),m()}catch(g){console.error("Error al recuperar personas:",g),alert("Hubo un error al recuperar o eliminar algunas personas.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:p,disabled:o,children:e.jsx("i",{className:"bi bi-recycle"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Recuperar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-teal border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-greenW p-2 rounded-pill text-primary fw-bold",children:["Se reactivan ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var g;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(g=d.base64)==null?void 0:g.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(u=>u.filter(f=>f!==d.id)),title:"Quitar de la selecci√≥n"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas reactivar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:h,disabled:o,children:o?"Recuperando...":"Confirmar Recuperaci√≥n"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Qt=({data1:s,data2:r})=>{var m;const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),c=(()=>{const j=localStorage.getItem("user");return j?JSON.parse(j):null})(),p=async j=>{if(window.confirm("¬øEst√°s seguro de que deseas recuperar esta persona?"))try{const x=$(F,"db_personas",j.id),h=new Date,d=`${h.getDate().toString().padStart(2,"0")}/${(h.getMonth()+1).toString().padStart(2,"0")}/${h.getFullYear().toString().slice(-2)}`,g="campos_modificados_aqui";await we(x,{...j,recuperado:[...j.recuperado||[],{motivo:"recuperado manual",usuario:c.email,fecha:d,datos_resguardo_baja_previa:[{usuario_baja:j.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:j.usuario_baja_fecha||"fecha_no_disponible"}]}]});const u=$(F,"db_personas_desactivados",j.id);await Ne(u),r(),alert("Persona recuperada y copiada a la colecci√≥n de capturas.")}catch(x){console.error("Error al eliminar persona: ",x)}},b=j=>{p(j),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-recycle"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Persona"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-teal  border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(m=s.base64)==null?void 0:m.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary bg-greenW2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas recuperar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:()=>b(s),children:"Confirmar Recuperaci√≥n"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Xt=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState(!0),[d,g]=a.useState("asc"),u=G(F,"db_personas_desactivados"),f=async()=>{c(!0);try{const C=(await ne(u)).docs.map(y=>({...y.data(),id:y.id}));r(C),n(C)}catch(w){console.error("Error al obtener personas: ",w)}finally{c(!1)}},v=w=>w.sort((C,y)=>d==="asc"?C.nombre_apellido.localeCompare(y.nombre_apellido):y.nombre_apellido.localeCompare(C.nombre_apellido));a.useEffect(()=>{f()},[]),a.useEffect(()=>{const w=s.filter(y=>y.nombre_apellido&&y.nombre_apellido.toLowerCase().includes(p.toLowerCase())||y.documento&&y.documento.includes(p)).filter(y=>m?y.prioridad===parseInt(m,10):!0),C=v(w);n(C)},[p,s,m,d]);const N=w=>{l(C=>C.includes(w)?C.filter(y=>y!==w):[...C,w])},S=()=>{if(i.length===t.length)l([]);else{const w=t.map(C=>C.id);l(w)}},k=w=>{switch(Number(w)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero üîé"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido üö®"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ‚≠ê"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white ",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center mb-5 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Capturas  Desactivadas"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(Ye,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(ma,{prioridadFilter:m,setPrioridadFilter:j})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Ze,{orden:d,setOrden:g})})]}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Zt,{data1:i,data2:s,dataRefresh:f,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close  btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),x&&e.jsx(Je,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>h(!1),color:"blueW2"}),!x&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>h(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"})," ",e.jsxs("small",{className:"text-white",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-white",children:[i.length," üßë"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:S})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(w=>{var C;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(w.id),onChange:()=>N(w.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((C=w.base64)==null?void 0:C.trim())||"https://via.placeholder.com/40",alt:w.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:w.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:w.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:k(w.prioridad)}),e.jsx("td",{children:e.jsx(Qt,{data1:w,data2:f})}),e.jsx("td",{})]},w.id)})})]})})]})})]})},Kt=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1),[o,c]=a.useState(!1),[p,b]=a.useState(""),m=r.filter(k=>s.includes(k.id)),j=m.every(k=>k.encontrado===!0),x=m.every(k=>!k.encontrado),h=!j&&!x,d=()=>{if(!(s!=null&&s.length))return alert("No hay personas seleccionadas.");if(h)return alert("No puedes realizar una acci√≥n grupal si hay estados mezclados.");l(!0)},g=()=>l(!1),u=()=>n([]),f=async()=>{if(!(!(s!=null&&s.length)||!(r!=null&&r.length)||!window.confirm(j?"¬øDeseas quitar el estado de ENCONTRADA a estas personas?":"¬øDeseas informar a estas personas como ENCONTRADAS?"))){c(!0);try{const w=m.map(async C=>{const y=$(F,"db_personas",C.id);await K(y,{encontrado:!j})});await Promise.all(w),t(),u(),b(j?"Personas marcadas nuevamente como BUSCADAS.":"Personas marcadas como ENCONTRADAS.")}catch(w){console.error("Error al actualizar estado de b√∫squeda:",w),b("Hubo un error al actualizar algunas personas.")}setTimeout(()=>b(""),3e3),c(!1),g()}};if(h||m.length===0)return null;const v=j?"btn-primary text-white":"btn-blue text-white",N=j?"bi-person-fill-slash":"bi-person-check-fill",S=j?"Quitar estado de encontradas":"Informar personas encontradas";return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:`btn btn-sm rounded-circle  ${v}`,onClick:d,disabled:o,title:S,children:e.jsx("i",{className:`bi ${N}`})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-capitalize",children:j?"Quitar estado de encontradas":"Informar personas encontradas"}),e.jsx("button",{type:"button",className:"btn-close",onClick:g})]}),e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-blue-50 text-primary p-2 rounded fw-bold",children:["Se actualizar√°n ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:m.map(k=>{var w;return e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(w=k.base64)==null?void 0:w.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),k.nombre_apellido||"NN"]},k.id)})}),e.jsxs("p",{className:"text-primary bg-blue-50 rounded my-2 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"}),j?"¬øDeseas quitar el estado de ENCONTRADA a todas estas personas?":"¬øDeseas informar a estas personas como ENCONTRADAS?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:g,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:f,disabled:o,children:o?"Actualizando...":"Confirmar Cambio"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"}),p&&e.jsx("div",{className:"alert alert-success mt-2",children:p})]})},ei=()=>{const[s,r]=a.useState(2),{personas:t,loading:n,fetchPersonas:i}=Es(s),[l,o]=a.useState([]),[c,p]=a.useState(""),[b,m]=a.useState(""),[j,x]=a.useState(!0),[h,d]=a.useState("asc"),{selectedDocs:g,setSelectedDocs:u,toggleSelectDoc:f,toggleSelectAll:v}=Fs(l||[]),N=c||b;return g.every(S=>{const k=t.find(w=>w.id===S);return(k==null?void 0:k.captura)===!0}),g.every(S=>{const k=t.find(w=>w.id===S);return(k==null?void 0:k.captura)===!1||(k==null?void 0:k.captura)===void 0}),a.useEffect(()=>{let S=ws(t,c,b);const k=Cs(S,h);o(k)},[c,t,b,h]),e.jsxs("div",{className:"container-lg my-5 text-light",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0",children:"Listado B√∫squeda de Paradero"}),e.jsxs("div",{className:"card my-5 bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(ys,{prioridadFilter:b,setPrioridadFilter:m,personas:t})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Ze,{orden:h,setOrden:d})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>Ss(p,m,d),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})]}),e.jsx("div",{className:"col-12",children:e.jsx(Ye,{searchTerm:c,setSearchTerm:p})}),n?e.jsx(se,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[g.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Kt,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),e.jsx(ts,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>u([])})]}),j&&e.jsx(Je,{Date1:g,Date2:t,setSelectedDocs:u,onCerrar:()=>x(!1),color:"blueW2"}),!j&&g.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"}),e.jsxs("small",{className:"text-light",children:["Ver Resumen (",e.jsxs("span",{children:[g.length," üßë"]}),")"]})]})})]}),e.jsx(ks,{personas:l,selectedDocs:g,toggleSelectDoc:f,toggleSelectAll:v,getPrioridadLabel:_s,fetchPersonas:i,isFiltered:N,color:"bg-blueW",prioridad:s})]})})]})},si=({alertaFilter:s,setAlertaFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos los Estados"}),e.jsx("option",{value:"capturado",children:"Capturado"}),e.jsx("option",{value:"evadido",children:"Evadido"})]}),e.jsx("label",{children:"Seleccione un Estado"})]}),ai=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1);a.useState("");const[o,c]=a.useState(!1);a.useState(""),a.useState("");const p=()=>l(!0),b=()=>l(!1),m=()=>{n([])},x=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas DESACTIVAR SU ESTADO DE ALERTA EVADIDO üö® a este grupo de  personas ?"))){c(!0);try{const u=r.filter(f=>s.includes(f.id)).map(async f=>{const v=$(F,"db_personas",f.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await K(v,{...f,prioridad:1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"desactivar alerta",captura_informa_usuario:x.email,captura_fecha:S}]})});await Promise.all(u),alert("Alrta Modificada Exitosas"),t(),m()}catch(g){console.error("Error al modificar personas:",g),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-secondaryMuiRed btn-sm w-100 text-white",onClick:p,disabled:o,children:["Desactivar Alerta (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border titilar",children:"üö®"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Desactivar Alerta Evadido"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var g;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(g=d.base64)==null?void 0:g.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(u=>u.filter(f=>f!==d.id)),title:"Quitar de la selecci√≥n"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center  titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas desactivar el estado evadido ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:h,disabled:o,children:o?"Trabajando...":"Desactivar Evadido"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ti=()=>{const[s,r]=a.useState(3),{personas:t,loading:n,fetchPersonas:i}=Es(s),[l,o]=a.useState([]),[c,p]=a.useState(""),[b,m]=a.useState(""),[j,x]=a.useState(!0),[h,d]=a.useState("asc"),{selectedDocs:g,setSelectedDocs:u,toggleSelectDoc:f,toggleSelectAll:v}=Fs(l||[]),N=c||b,[S,k]=a.useState(""),w=g.every(_=>{const M=t.find(E=>E.id===_);return(M==null?void 0:M.captura)===!0}),C=g.every(_=>{const M=t.find(E=>E.id===_);return(M==null?void 0:M.captura)===!1||(M==null?void 0:M.captura)===void 0}),y=!w&&!C;return a.useEffect(()=>{let _=ws(t,c,b);_=Gt(_,S);const M=Cs(_,h);o(M)},[c,t,b,h,S]),e.jsxs("div",{className:"container-lg my-5 text-light",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  ",children:"Listado de Evasiones"}),e.jsxs("div",{className:"card my-5  bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-4 col-md-8 col-lg-4",children:e.jsx(ys,{prioridadFilter:b,setPrioridadFilter:m,personas:t})}),e.jsx("div",{className:"col-12 col-sm-4 col-md-8 col-lg-4",children:e.jsx(si,{alertaFilter:S,setAlertaFilter:k})}),e.jsx("div",{className:"col-12 col-sm-3 col-md-8 col-lg-2",children:e.jsx(Ze,{orden:h,setOrden:d})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>Ss(p,m,d,k),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})]}),e.jsx("div",{className:"col-12 ",children:e.jsx(Ye,{searchTerm:c,setSearchTerm:p})}),n?e.jsx(se,{}):e.jsx(e.Fragment,{children:l.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[g.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx("div",{className:"d-flex gap-2 mb-2 justify-content-end mb-2",children:!y&&e.jsxs(e.Fragment,{children:[w&&e.jsx(ua,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),C&&e.jsx(ha,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u})]})}),e.jsx(ai,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),e.jsx(ts,{data1:g,data2:t,dataRefresh:i,setSelectedDocs:u}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>u([])})]}),j&&e.jsx(Je,{Date1:g,Date2:t,setSelectedDocs:u,onCerrar:()=>x(!1),color:"blueW2"}),!j&&g.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>x(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-ligh",children:[g.length," üßë"]}),")"]})]})})]}),e.jsx(ks,{personas:l,selectedDocs:g,toggleSelectDoc:f,toggleSelectAll:v,getPrioridadLabel:_s,fetchPersonas:i,isFiltered:N,color:"bg-redW",prioridad:s})]})})]})},ii=()=>{const[s,r]=a.useState("dashboard"),[t,n]=a.useState([]),[i,l]=a.useState(!1),o=localStorage.getItem("user"),c=o?JSON.parse(o):null;console.log("Usuario actual en Panel Control:",c.rol);const p=async()=>{try{l(!0);const u=await ne(G(F,"db_personas")),f=[];u.forEach(v=>{f.push({id:v.id,...v.data()})}),n(f)}catch(u){console.error("Error al obtener los documentos: ",u)}finally{l(!1)}};a.useEffect(()=>{p()},[]);const b=t.filter(u=>u.prioridad===3).length,m=t.filter(u=>u.prioridad===1).length,j=t.filter(u=>u.prioridad===2).length,x=t.filter(u=>u.prioridad===4).length,h=t.filter(u=>u.captura===!0).length,d=t.length,g=()=>{switch(s){case"dashboard":return e.jsx(Ot,{});case"reportes":return e.jsx(Ut,{loading:i});case"graficos":return e.jsx(It,{totalCapturas:d,totalPrioridadNormal:m,totalParadero:j,totalEvasiones:b,totalPrioritaria:x,totalEvasionesCapturados:h});case"Desactivados":return e.jsx(Xt,{});case"personas":return e.jsx(Vt,{});case"evasiones":return e.jsx(ti,{});case"csv":return e.jsx(Mt,{});case"paradero":return e.jsx(ei,{});case"prioritaria":return e.jsx(Yt,{});case"notificaciones":return e.jsx($t,{loading:i});default:return e.jsx("p",{children:"Selecciona una opci√≥n del men√∫."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row ",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 ",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill"}),"Men√∫ Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenido"}),(c==null?void 0:c.rol)==="admin"&&e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="reportes"?"active":""}`,onClick:()=>r("reportes"),children:"Exportaci√≥n"}),(c==null?void 0:c.rol)==="admin"&&e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="personas"?"active":""}`,onClick:()=>r("personas"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Personas",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-purpleUi rounded-pill",children:["Activas ",d]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="evasiones"?"active":""}`,onClick:()=>r("evasiones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Evasiones",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-primary rounded-pill",children:["Activas ",b]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="paradero"?"active":""}`,onClick:()=>r("paradero"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Busqueda Paradero",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-primary rounded-pill",children:["Activas ",j]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="prioritaria"?"active":""}`,onClick:()=>r("prioritaria"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Prioritarias",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-primary2 rounded-pill",children:["Activas ",x]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="Desactivados"?"active":""}`,onClick:()=>r("Desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Desactivados",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryMuiRed rounded-pill",children:"Reactivar"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:g()})]})})},ri=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Panel de Control ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(ii,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},li=()=>e.jsx(e.Fragment,{children:e.jsx(ri,{})}),ni=({showModal:s,closeModal:r})=>{const t={Rosario:["Comisaria 1ra. - Secci√≥n Centro","Comisaria 2da. - Secci√≥n Puerto Norte","Comisaria 3ra. - Secci√≥n Tucuman","Comisaria 4ta. - Secci√≥n Echesortu","Comisaria 5ta. - Secci√≥n Pichincha","Comisaria 6ta. - Secci√≥n Zona Sur","Comisaria 7ma. - Secci√≥n La Florida","Comisaria 8va. - Secci√≥n Zona Oeste"]},n=["CRE Rosario","CRE Baigorria","BOU","BOP","AUOP","MOTORIZADA","CGI","PAT","CYP","VIAL","PUMAS","OTROS"],[i,l]=a.useState("Rosario"),[o,c]=a.useState(""),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState(""),[d,g]=a.useState(""),[u,f]=a.useState(""),[v,N]=a.useState(""),[S,k]=a.useState(!1),w=/^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë\s]+$/,[C,y]=a.useState([]),[_,M]=a.useState(""),[E,I]=a.useState(""),[P,q]=a.useState([]),Z=new Date().toLocaleString(),H=R=>w.test(R),A=()=>{if(!H(m)){f("El nombre y apellido solo deben contener letras y espacios.");return}if(x.length!==8||isNaN(x)){N("El DNI debe ser un n√∫mero de 8 caracteres.");return}q([...P,{nombreApellido:m,dni:x}]),j(""),h(""),f("")},V=()=>{if(E.length!==6||isNaN(E)){N("El NI debe ser un n√∫mero de 6 caracteres.");return}if(!H(_)){N("El nombre no debe contener n√∫meros.");return}y([...C,{nombre:_,ni:E}]),M(""),I(""),N("")},J=async R=>{if(R.preventDefault(),!o){g("Por favor, selecciona una comisar√≠a.");return}if(!p){g("Por favor, selecciona una unidad.");return}if(P.length===0){g("Debes agregar al menos una persona.");return}if(C.length===0){g("Debes agregar al menos una persona para la entrega.");return}if(!window.confirm("¬øEst√°s seguro de que deseas agregar Art. 10 Bis?")){alert("La operaci√≥n fue cancelada.");return}g(""),k(!0);try{const le=JSON.parse(localStorage.getItem("user"));for(let de=0;de<P.length;de++){const he=P[de];await Ie(G(F,"db_art_diez_bis"),{nombre_apellido:he.nombreApellido,dni:he.dni,selectedLocalidad:i,comisaria:o.split(".")[0].trim(),unidad:p,timestamp:Z,usuario:(le==null?void 0:le.email)||"Usuario desconocido",visualidad:!1,comisaria_recibe:!1,personal_entrega:C})}alert("Se agregaron las personas con Art. 10 Bis."),j(""),h(""),c(""),b(""),l("Rosario"),y([]),r()}catch(le){console.error("Error al enviar notificaci√≥n: ",le),g("Error al enviar la notificaci√≥n. Int√©ntalo de nuevo.")}finally{k(!1)}},ee=R=>{const Y=P.filter((le,de)=>de!==R);q(Y)},z=R=>{const Y=C.filter((le,de)=>de!==R);y(Y)};return s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-dark",children:[e.jsx("h5",{className:"modal-title text-center fw-semibold text-white",children:"Agregar Persona - Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close bg-white",onClick:r})]}),e.jsx("div",{className:"modal-body",children:e.jsx("form",{onSubmit:J,children:e.jsxs("div",{className:"container ",children:[e.jsxs("div",{className:"mb-3 text-center",children:[d&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),d]}),u&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar "}),u]}),v&&e.jsxs("div",{className:"alert alert-light text-danger shadow mb-4",children:[e.jsx("i",{className:"me-2 text-danger bi bi-exclamation-circle-fill titilar"}),v]})]}),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-primary fw-semibold shadow-sm text-white py-2 rounded",children:"Agregar personas 10 Bis"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${u&&!w.test(m)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:m,onChange:R=>j(R.target.value)}),e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido"}),u&&!w.test(m)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${u&&(x.length!==8||isNaN(Number(x)))?"is-invalid":""}`,maxLength:"8",placeholder:"DNI",value:x,onChange:R=>h(R.target.value.replace(/[^\d]/g,""))}),e.jsx("label",{htmlFor:"dni",children:"DNI"}),u&&(x.length!==8||isNaN(Number(x)))&&e.jsx("div",{className:"invalid-feedback",children:"El DNI debe ser un n√∫mero de hasta 8 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>A(),children:"+"})})]}),P.map((R,Y)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),R.nombreApellido," - ",R.dni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>ee(Y),children:e.jsx("i",{className:"bi bi-trash"})})]},Y)),e.jsxs("div",{className:"row g-2 mb-4 mt-4 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-pink fw-semibold shadow-sm text-white py-2 rounded",children:"Dependencia Destino"}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("select",{className:`form-select ${d&&!i?"is-invalid":""}`,value:i,onChange:R=>l(R.target.value),children:e.jsx("option",{value:"Rosario",children:"Rosario"})}),e.jsx("label",{htmlFor:"localidad",children:"Localidad"}),d&&!i&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una localidad."})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:`form-select ${d&&!o?"is-invalid":""}`,value:o,onChange:R=>c(R.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Comisar√≠a"}),(t[i]||[]).map(R=>e.jsx("option",{value:R,children:R},R))]}),e.jsx("label",{htmlFor:"comisaria",children:"Comisar√≠a"}),d&&!o&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una comisar√≠a."})]})})]}),e.jsxs("div",{className:"mb-3 text-center",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-blue fw-semibold shadow-sm text-white py-2 rounded",children:"Unidad Procede a la Entrega"}),e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{id:"unidad",className:`form-select ${d&&!p?"is-invalid":""}`,value:p,onChange:R=>b(R.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar Unidad"}),n.map(R=>e.jsx("option",{value:R,children:R},R))]}),e.jsx("label",{htmlFor:"unidad",children:"Unidad Procede a la Entrega"}),d&&!p&&e.jsx("div",{className:"invalid-feedback",children:"Selecciona una unidad."})]})]}),e.jsxs("div",{className:"mb-3 text-center mt-4",children:[e.jsx("h6",{className:"fw-semibold text-capitalize text-center bg-secondaryM fw-semibold shadow-sm text-white py-2 rounded",children:"Mi Unidad de Trabajo"}),e.jsxs("div",{className:"row g-2 mb-2",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${v&&!w.test(_)?"is-invalid":""}`,placeholder:"Nombre y Apellido",value:_,onChange:R=>M(R.target.value)}),e.jsx("label",{htmlFor:"nombreEntrega",children:"Nombre y Apellido"}),v&&!w.test(_)&&e.jsx("div",{className:"invalid-feedback",children:"El nombre y apellido solo deben contener letras y espacios."})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control shadow-sm ${v&&(E.length!==6||isNaN(E))?"is-invalid":""}`,placeholder:"N.I",maxLength:"6",value:E,onChange:R=>I(R.target.value)}),e.jsx("label",{htmlFor:"niEntrega",children:"N.I"}),v&&(E.length!==6||isNaN(E))&&e.jsx("div",{className:"invalid-feedback",children:"El N.I debe ser un n√∫mero de 6 caracteres."})]})}),e.jsx("div",{className:"col-2",children:e.jsx("button",{type:"button",className:"btn btn-primary shadow-sm rounded-circle",onClick:()=>V(),children:"+"})})]}),C.map((R,Y)=>e.jsxs("li",{className:"list-group-item py-1 d-flex align-items-center justify-content-center mb-2 p-2 rounded shadow-sm bg-light mt-3",children:[e.jsx("i",{className:"bi bi-person-circle text-primary me-3 "}),R.nombre," - ",R.ni,e.jsx("i",{className:"ms-3 bi bi-check text-teal"}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-white rounded-circle ms-3",onClick:()=>z(Y),children:e.jsx("i",{className:"bi bi-trash"})})]},Y))]}),e.jsx("div",{className:"text-center mb-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary shadow",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-arrow-repeat me-2"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirmar"]})})})," "]})})})]})})}):null},oi=({showModal:s,closeModal:r})=>{const[t,n]=a.useState(!1),i=Ve(),l=()=>{n(!1),r()},o=()=>{n(!t)};return a.useEffect(()=>{if(i.pathname==="/dashboard"){const c=p=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",c),()=>{window.removeEventListener("popstate",c)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Herramientas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("button",{className:`btn btn-${t?"secondary":"purple"}`,onClick:o,children:[t?"Ocultar Formulario":"Ingresar Nuevo Art. 10 Bis",e.jsx("i",{className:`ms-2 bi ${t?"bi-x-circle":"bi-person-add"}`})]})}),t&&e.jsx("div",{className:"container my-4",children:e.jsx(ni,{showModal:s,closeModal:l})})]})]})})}):null},ci=({recepciones:s,loading:r})=>e.jsx("div",{className:" text-center mt-4",children:r?e.jsx("div",{className:"spinner-border text-primary",role:"status"}):Object.keys(s).length>0?e.jsxs("div",{className:"alert",children:[e.jsx("strong",{children:"Recepciones pendientes por comisar√≠a:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,n],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-primary",role:"status"}),e.jsx("span",{children:t}),e.jsxs("span",{className:"badge bg-primary",children:[n," pendientes"]})]},i))})]}):e.jsx("div",{className:"alert alert-primary",children:e.jsx("strong",{children:"No hay recepciones pendientes en este momento."})})}),di=({notificaciones:s,loading:r,aceptarRecepcion:t,rechazarRecepcion:n})=>{const[i,l]=a.useState(""),[o,c]=a.useState(!1),[p,b]=a.useState(null),[m,j]=a.useState(""),[x,h]=a.useState(!1),d=async()=>{if(!p)return;h(!0);const{id:u,comisaria:f}=p,v=as[f];setTimeout(()=>{m&&m===v?(t(u),l(""),c(!1),j("")):l(`El c√≥digo ingresado "${m}" es incorrecto.`),h(!1)},1e3)},g=u=>{b(u),c(!0),l(""),j("")};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("p",{className:"text-center  text-center mb-4 bg-primary text-white rounded p-2 mt-4 mb-3",children:["       ",e.jsx("span",{className:"text-capitalize fs-3  ",children:" validaci√≥n Recepci√≥n Art. 10 Bis "}),"  ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-4",children:e.jsx("div",{className:"position-relative",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border ",role:"status","aria-label":"Cargando...",children:" "})]}):e.jsxs("div",{className:"list-group",children:[i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i}),s&&s.length>0?s.map(u=>e.jsxs("div",{className:"list-group-item mb-3 shadow",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:u.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:u.dni})]}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-end row",children:[e.jsx("div",{className:"col mb-1",children:e.jsxs("button",{className:"btn btn-primary btn-sm me-2 mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>g(u),"aria-label":`Aceptar recepci√≥n para ${u.nombre_apellido} en la Comisar√≠a ${u.comisaria}`,children:["Aceptar ",e.jsx("i",{className:"bi bi-check-all ms-2"})]})}),e.jsx("div",{className:"col",children:e.jsxs("button",{className:"btn btn-pink btn-sm mb-2 mb-md-0 w-100 w-md-auto",onClick:()=>n(u.id),"aria-label":`Cancelar recepci√≥n para ${u.nombre_apellido}`,children:["Cancelar ",e.jsx("i",{className:"bi bi-trash ms-2"})]})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{children:e.jsxs("small",{children:[u.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:u.comisaria})," -"," ",u.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:u.unidad})]})})})]},u.id)):e.jsx("div",{className:"alert alert-info shadow",role:"alert",children:"No se encontraron notificaciones para validar."})]})})})]}),o&&p&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar C√≥digo"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el c√≥digo para la Comisar√≠a ",e.jsx("strong",{children:p.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:m,onChange:u=>j(u.target.value),placeholder:"C√≥digo"}),i&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:i})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,disabled:!m||x,children:x?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:"Cancelar"})]})]})})})]})},mi=()=>{const[s,r]=a.useState([]),[t,n]=a.useState(!1),[i,l]=a.useState(""),o=async()=>{try{n(!0);const j=ye(G(F,"db_art_diez_bis"),Oe("comisaria_recibe","==",!1)),h=(await ne(j)).docs.map(d=>({id:d.id,...d.data()}));r(h)}catch(j){console.error("Error al obtener las recepciones pendientes: ",j)}finally{n(!1)}};a.useEffect(()=>{o()},[]);const c=async j=>{try{const x=JSON.parse(localStorage.getItem("user")),h=$(F,"db_art_diez_bis",j);await K(h,{comisaria_recibe:!0,visualidad:!0,fecha_ingreso_validado:Ae(),usuario_validado_ingreso:x.email}),r(d=>d.filter(g=>g.id!==j)),alert("Recepci√≥n aceptada correctamente.")}catch(x){console.error("Error al aceptar la recepci√≥n: ",x),alert("Hubo un error al aceptar la recepci√≥n.")}},p=async j=>{if(window.confirm("¬øEst√°s seguro de que deseas rechazar esta recepci√≥n?"))try{const h=$(F,"db_art_diez_bis",j);await Ne(h),r(d=>d.filter(g=>g.id!==j)),alert("Recepci√≥n rechazada correctamente.")}catch(h){console.error("Error al rechazar la recepci√≥n: ",h),alert("Hubo un error al rechazar la recepci√≥n.")}},b=s.reduce((j,x)=>{const h=x.comisaria||"Comisar√≠a desconocida";return j[h]=(j[h]||0)+1,j},{}),m=i?s.filter(j=>j.comisaria===i):s;return e.jsx("div",{className:"container-lg mt-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 mb-4",children:[e.jsx(ci,{recepciones:b,loading:t}),e.jsxs("div",{className:"mt-4 card p-3 shadow-sm",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize fw-bold text-muted",children:"Filtrar por comisar√≠a"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select",value:i,onChange:j=>l(j.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(b).map((j,x)=>e.jsx("option",{value:j,children:j},x))]})]})]}),e.jsx("div",{className:"col-12 col-md-8 mt-4 mt-md-0",children:e.jsx(di,{notificaciones:m,loading:t,aceptarRecepcion:c,rechazarRecepcion:p})})]})})},ui=({showModal:s,closeModal:r})=>{const[t,n]=a.useState(!1),i=Ve(),l=()=>{n(!1),r()};return a.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const o=c=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Recepci√≥n Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(mi,{})})})]})})}):null},hi=({recepciones:s,loading:r})=>e.jsx("div",{className:"text-center mt-4",children:r?e.jsx("div",{className:"spinner-border text-primary",role:"status","aria-label":"Cargando..."}):Object.keys(s).length>0?e.jsxs("div",{className:"alert",children:[e.jsx("strong",{children:"Personas visibles por comisar√≠a:"}),e.jsx("ul",{className:"list-group mt-3",children:Object.entries(s).map(([t,n],i)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"spinner-grow text-teal",role:"status","aria-label":"Comisar√≠a con personas visibles"}),e.jsx("span",{className:"text-truncate",children:t}),e.jsxs("span",{className:"badge bg-teal",children:[n," personas"]})]},i))})]}):e.jsx("div",{className:"alert alert-primary shadow",children:e.jsx("strong",{children:"No hay personas visibles en este momento."})})}),xi=as,bi=({dataInfo:s,loading:r,actualizarListado:t})=>{const[n,i]=a.useState("");console.log(r);const[l,o]=a.useState(null),[c,p]=a.useState(""),[b,m]=a.useState(!1),[j,x]=a.useState(null),[h,d]=a.useState({}),[g,u]=a.useState(!1),f=w=>xi[w]||"",v=(w,C)=>{const y=new Date(C.seconds*1e3).getTime()+216e5,_=setInterval(()=>{const M=Date.now(),E=y-M;if(E<=0){clearInterval(_),d(H=>({...H,[w]:"00:00:00"}));return}const I=Math.floor(E/36e5),P=Math.floor(E%36e5/6e4),q=Math.floor(E%6e4/1e3),Z=`${I.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`;d(H=>({...H,[w]:Z}))},1e3);return _},N=async w=>{for(const C of w){const y=C.fecha_ingreso_validado;if(y&&y.seconds){const _=new Date(y.seconds*1e3);if(new Date().getTime()-_.getTime()>36e5){console.log(`Han pasado m√°s de 1 hora desde la salida de ${C.nombre_apellido}`),alert(`Han pasado m√°s de 1 hora el sistema da como salida a  ${C.nombre_apellido} del Articulo 10 bis`);const I=$(F,"db_art_diez_bis",C.id),P=await De(I);if(P.exists()){const q=$(F,"db_art_diez_bis_desactivados",C.id);await we(q,P.data()),await Ne(I),await K(q,{visualidad:!1,salida_art:Ae(),salida_art_usuario:"sistema"}),t(),console.log(`Documento copiado, actualizado y eliminado para ${C.nombre_apellido}`)}}}}};a.useEffect(()=>{s&&s.length>0&&(N(s),s.forEach(w=>{w.fecha_ingreso_validado&&w.fecha_ingreso_validado.seconds&&v(w.id,w.fecha_ingreso_validado)}))},[s]);const S=async()=>{if(!j)return;u(!0);const{id:w,comisaria:C}=j,y=f(C);setTimeout(async()=>{if(c&&c===y)try{const _=JSON.parse(localStorage.getItem("user")),M=$(F,"db_art_diez_bis",w),E=await De(M);if(E.exists()){const I=E.data();await we($(F,"db_art_diez_bis_desactivados",w),{...I,visualidad:!1,salida_art:Ae(),salida_art_usuario:(_==null?void 0:_.email)||"sistema"}),await Ne(M),i(""),alert("Recepci√≥n aceptada correctamente."),m(!1),p(""),t()}else alert("El documento no existe.")}catch(_){console.error("Error al aceptar la recepci√≥n: ",_),alert("Hubo un error al aceptar la recepci√≥n.")}finally{u(!1)}else i(`El c√≥digo ingresado (${c}) es incorrecto.`),u(!1)},1e3)},k=w=>{x(w),m(!0)};return e.jsxs("div",{className:"container-lg text-center",children:[e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("p",{className:"text-center  text-center mb-4 bg-secondaryM text-white rounded p-2 mt-4 mb-3",children:["       ",e.jsx("span",{className:"text-capitalize fs-3  ",children:" Salida Art. 10 Bis "}),"  ",e.jsx("i",{className:"bi bi-people-fill  ms-3 fs-1 "})]}),e.jsx("div",{className:"col-12 col-md-12 col-lg-12 mt-4",children:r?e.jsxs("div",{className:"text-primary",children:["      ",e.jsx("div",{className:"spinner-border ",role:"status","aria-label":"Cargando...",children:" "}),"  "]}):e.jsxs("div",{className:"list-group",children:[n&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:n}),s&&s.length>0?s.map(w=>e.jsxs("div",{className:"list-group-item mb-3 shadow",children:[e.jsx("div",{className:"text-end me-2",children:e.jsxs("span",{className:"badge bg-primary",children:[e.jsx("i",{className:"bi bi-clock titilar me-1"})," ",h[w.id]||"Cargando..."]})}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex flex-column w-100 text-truncate",children:[e.jsx("strong",{className:"text-truncate",children:w.nombre_apellido}),e.jsx("span",{className:"text-truncate",children:w.dni})]}),e.jsx("button",{className:"btn btn-teal text-white btn-sm w-25",onClick:()=>k(w),disabled:l===w.id,children:l===w.id?"Procesando...":"Finalizar"})]}),e.jsxs("small",{className:"mt-2",children:[w.selectedLocalidad," -"," ",e.jsx("span",{className:"badge bg-pink",children:w.comisaria})," - ",w.timestamp," -"," ",e.jsx("span",{className:"badge bg-primary",children:w.unidad})]})]},w.id)):e.jsxs("div",{className:"alert alert-info text-capitalize shadow",role:"alert",children:["No se encontraron Personas en dependencias.",e.jsx("i",{className:"bi bi-hand-thumbs-up ms-2"})]})]})})]}),b&&j&&e.jsx("div",{className:"modal show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Ingresar C√≥digo"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>m(!1),"aria-label":"Cerrar"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:["Ingresa el c√≥digo para la Comisar√≠a ",e.jsx("strong",{children:j.comisaria}),":"]}),e.jsx("input",{type:"text",className:"form-control",value:c,onChange:w=>p(w.target.value),placeholder:"C√≥digo"}),n&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:n})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:S,disabled:!c||g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Validando..."]}):"Aceptar"}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:"Cancelar"})]})]})})})]})},pi=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState(""),[i,l]=a.useState({}),[o,c]=a.useState([]),p=async()=>{try{r(!0);const m=ye(G(F,"db_art_diez_bis"),Oe("visualidad","==",!0)),x=(await ne(m)).docs.map(d=>({id:d.id,...d.data()}));c(x);const h=x.reduce((d,g)=>{const u=g.comisaria||"Comisar√≠a desconocida";return d[u]=(d[u]||0)+1,d},{});l(h)}catch(m){console.error("Error al obtener datos: ",m)}finally{r(!1)}};a.useEffect(()=>{p()},[]);const b=t?o.filter(m=>(m.comisaria||"").toLowerCase()===t.toLowerCase()):o;return e.jsxs("div",{className:"container-lg mt-5",children:[e.jsx("div",{className:"row"}),e.jsxs("div",{className:"row gy-4",children:[e.jsxs("div",{className:"col-12 col-lg-4",children:[e.jsx(hi,{recepciones:i,loading:s}),e.jsxs("div",{className:"mt-4 card p-3 shadow-sm",children:[e.jsx("label",{htmlFor:"filtroComisaria",className:"form-label text-center text-capitalize fw-bold text-muted",children:"Filtrar por comisar√≠a"}),e.jsxs("select",{id:"filtroComisaria",className:"form-select",value:t,onChange:m=>n(m.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),Object.keys(i).map((m,j)=>e.jsx("option",{value:m,children:m},j))]})]})]}),e.jsx("div",{className:"col-12 col-lg-8",children:e.jsx(bi,{dataInfo:b,loading:s,actualizarListado:p})})]})]})},gi=({showModal:s,closeModal:r})=>{const[t,n]=a.useState(!1),i=Ve(),l=()=>{n(!1),r()};return a.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const o=c=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Salida / Egreso Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(pi,{})})})]})})}):null},ji=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState("nombre"),p=async()=>{try{const g=(await ne(G(F,"db_comisarias"))).docs.map(u=>({id:u.id,...u.data()})).filter(u=>u.disponibilidad===!0);r(g)}catch(d){console.error("Error al obtener las comisar√≠as: ",d)}},b=async()=>{try{const g=(await ne(G(F,"db_art_diez_bis"))).docs.map(v=>({id:v.id,...v.data()})),u=g.filter(v=>v.visualidad===!0&&v.comisaria_recibe===!0),f=g.filter(v=>v.visualidad===!1&&v.comisaria_recibe===!1);n(u),l(f)}catch(d){console.error("Error al obtener las notificaciones: ",d)}};a.useEffect(()=>{p(),b()},[]);const m=t.reduce((d,g)=>{const u=g.comisaria;return u&&(d[u]=(d[u]||0)+1),d},{}),j=i.reduce((d,g)=>{const u=g.comisaria;return u&&(d[u]=(d[u]||0)+1),d},{}),x=d=>{const g=s.find(u=>u.comisaria===d);if(g){const u=g.plazas_art_10_bis||0;return(m[d]||0)>=u?{estado:"Llena",clase:"badge bg-danger"}:{estado:"Disponible",clase:"badge bg-info"}}return{estado:"Desconocido",clase:"badge bg-secondary"}},h=()=>o==="nombre"?[...s].sort((d,g)=>d.comisaria.localeCompare(g.comisaria)):o==="plaza"?[...s].sort((d,g)=>(g.plazas_art_10_bis||0)-(d.plazas_art_10_bis||0)):s;return e.jsxs("div",{children:[e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select",id:"filtroOrden",value:o,onChange:d=>c(d.target.value),"aria-label":"Ordenar por",children:[e.jsx("option",{value:"nombre",children:"Nombre (A-Z)"}),e.jsx("option",{value:"plaza",children:"Plazas Disponibles"})]}),e.jsx("label",{htmlFor:"filtroOrden",children:"Ordenar por"})]}),e.jsx("div",{className:"list-group",children:h().map(d=>{const{estado:g,clase:u}=x(d.comisaria),f=m[d.comisaria]||0,v=j[d.comisaria]||0;return e.jsx("div",{className:"list-group-item mb-3 shadow",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary",style:{fontSize:"1.5rem"}}),e.jsxs("div",{children:[e.jsx("strong",{children:d.comisaria}),e.jsxs("div",{children:[e.jsx("small",{className:u,children:`${f} / ${d.plazas_art_10_bis||0} Plazas - ${g}`}),e.jsx("div",{children:e.jsx("small",{className:"badge bg-primary",children:`${v} Pendientes ( Por Validar )`})})]})]})]})},d.comisaria)})})]})},fi=({showModal:s,closeModal:r})=>{const[t,n]=a.useState(!1),i=Ve(),l=()=>{n(!1),r()};return a.useEffect(()=>{if(i.pathname==="/panelcontrol10bis"){const o=c=>{l()};return window.history.pushState(null,document.title),window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[]),s?e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog modal-md",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",id:"modalTitle",children:"Plazas Art. 10 Bis"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsx(ji,{})})})]})})}):null},Ni=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState({search:"",estado:"",comisaria:""}),[p,b]=a.useState(!1),[m,j]=a.useState(!1),[x,h]=a.useState(""),d=async()=>{r(!0);try{let N=G(F,"db_art_diez_bis");if(o.estado==="desactivado")N=G(F,"db_art_diez_bis_desactivados");else if(o.estado===""){const w=await ne(G(F,"db_art_diez_bis")),C=await ne(G(F,"db_art_diez_bis_desactivados")),y=w.docs.map(E=>({id:E.id,...E.data()})),_=C.docs.map(E=>({id:E.id,...E.data()})),M=[...y,..._];n(M),l(M),r(!1);return}const k=(await ne(N)).docs.map(w=>({id:w.id,...w.data()}));n(k),l(k)}catch(N){console.error("Error al obtener las notificaciones: ",N)}finally{r(!1)}};a.useEffect(()=>{d()},[o.estado]);const g=N=>{const{name:S,value:k}=N.target;c(w=>({...w,[S]:k}))};a.useEffect(()=>{const{search:N,estado:S,comisaria:k}=o,w=t.filter(C=>{var E,I,P;const y=N===""||((E=C.nombre_apellido)==null?void 0:E.toLowerCase().includes(N.toLowerCase()))||((I=C.dni)==null?void 0:I.toString().includes(N)),_=S===""||(S==="activado"?C.visualidad:!C.visualidad),M=k===""||((P=C.comisaria)==null?void 0:P.toLowerCase())===k.toLowerCase();return y&&_&&M});l(w),w.length===0?b(!0):b(!1)},[o,t]);const u=async(N,S,k)=>{try{if(S){const w=$(F,"db_art_diez_bis",N);await K(w,{visualidad:!1}),await we($(F,"db_art_diez_bis_desactivados",N),k),await Ne(w),d(),alert("Estado desactivado y documento movido a desactivados")}else{const w=$(F,"db_art_diez_bis_desactivados",N),C=k;await we($(F,"db_art_diez_bis",N),{...C,visualidad:!0}),await Ne(w),d(),alert("Estado activado y documento movido a activados")}}catch(w){console.error("Error al actualizar la visualidad: ",w),alert("Hubo un error al cambiar la visualidad.")}},f=()=>j(!1),v=N=>{h(N),j(!0)};return e.jsxs("div",{className:"container-lg text-center mt-5  mt-sm-5 mt-md-0 ms-lg-0",children:[e.jsxs("div",{className:"alert alert-light text-danger text-center bg-white border border-2 shadow-sm",role:"alert",children:["Recuerda que las personas est√°n dentro del contexto ",e.jsx("strong",{children:" 6 horas cumplidas como maximo ( Art. 10 Bis ) desde su Ingreso . "}),"Por lo tanto el sistema da salida autom√°ticamente a esas personas cumplido el plazo."]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-4 mb-3  mb-sm-5 mb-md-0 mb-lg-0",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:"form-control shadow-sm",name:"search",value:o.search,onChange:g,placeholder:"Buscar por nombre o DNI"}),e.jsx("label",{htmlFor:"search",children:"Buscar por nombre o DNI"})]})}),e.jsx("div",{className:"col-md-4  mb-3 mb-sm-5 mb-md-0 mb-lg-0",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm",name:"estado",value:o.estado,onChange:g,children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"activado",children:"Activado"}),e.jsx("option",{value:"desactivado",children:"Desactivado"})]}),e.jsx("label",{htmlFor:"estado",children:"Filtrar por estado"})]})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm",name:"comisaria",value:o.comisaria,onChange:g,children:[e.jsx("option",{value:"",children:"Todas las comisar√≠as"}),[...new Set(t.map(N=>N.comisaria).filter(Boolean))].map(N=>e.jsx("option",{value:N,children:N},N))]}),e.jsx("label",{htmlFor:"comisaria",children:"Filtrar por comisar√≠a"})]})})]}),p&&e.jsx("div",{className:"alert alert-danger",children:"No se encontraron coincidencias"}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-6 col-md-3 mt-4",children:[e.jsxs("button",{className:"btn btn-primary text-white fw-semibold mt-3 w-100",onClick:()=>v("panel"),children:["Nuevo 10 Bis"," ",e.jsx("i",{className:"bi bi-person-add rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-teal text-white fw-semibold mt-3 w-100",onClick:()=>v("recepcion"),children:["Recepci√≥n 10 Bis"," ",e.jsx("i",{className:"bi bi-people-fill rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-secondaryMuiRed text-white fw-semibold mt-3 w-100",onClick:()=>v("estadio"),children:["Alojados 10 Bis"," ",e.jsx("i",{className:"bi bi-person-raised-hand rounded-circle border border-2 p-1 m-1"})]}),e.jsxs("button",{className:"btn btn-orange text-white fw-semibold mt-3 w-100",onClick:()=>v("plazas"),children:["Plazas 10 Bis"," ",e.jsx("i",{className:"bi bi-shield-lock rounded-circle border border-2 p-1 m-1"})]})]}),e.jsx("div",{className:"col-12 col-md-9 mt-4",children:e.jsxs("div",{className:"position-relative",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h3",{children:"Actividad Art 10 Bis"})}),s?e.jsx(se,{}):e.jsx("div",{className:"list-group",children:i.map(N=>e.jsxs("div",{className:`list-group-item mb-3 shadow ${N.visualidad?"bg-greenW2":"bg-redW"}`,children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:N.nombre_apellido||"Sin nombre"})," -"," ",N.dni||"Sin DNI"]}),e.jsx("button",{className:`btn fw-semibold btn-sm ${N.visualidad?"btn-pink text-white rounded-pill":"btn-teal text-white rounded-pill"}`,onClick:()=>u(N.id,N.visualidad,N),children:N.visualidad?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-eye-slash me-1"})," Ocultar"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-eye me-2"})," Activar"]})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{children:[N.selectedLocalidad||"Localidad desconocida"," -"," ",N.comisaria||"Comisar√≠a desconocida"," -"," ",N.timestamp?N.timestamp.split(",")[0]+" "+N.timestamp.split(",")[1].trim().slice(0,5)+" hs":"Fecha no disponible"]})})]},N.id))})]})})]}),m&&x==="panel"&&e.jsx(oi,{showModal:m,closeModal:f}),m&&x==="recepcion"&&e.jsx(ui,{showModal:m,closeModal:f}),m&&x==="estadio"&&e.jsx(gi,{showModal:m,closeModal:f}),m&&x==="plazas"&&e.jsx(fi,{showModal:m,closeModal:f})]})},vi=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState(!0),o=["comisaria","fecha_ingreso_validado","dni","nombre_apellido","selectedLocalidad","timestamp","unidad","usuario_validado_ingreso","salida_art","salida_art_usuario"],c=async()=>{try{const x=G(F,"db_art_diez_bis"),h=G(F,"db_art_diez_bis_desactivados"),[d,g]=await Promise.all([ne(x),ne(h)]),u=d.docs.map(N=>({id:N.id,...N.data()})),f=g.docs.map(N=>({id:N.id,...N.data()})),v=[...u,...f];r(v),l(!1)}catch(x){console.error("Error al obtener los datos:",x),l(!1)}},p=x=>{n(h=>h.includes(x)?h.filter(d=>d!==x):[...h,x])},b=()=>{n(o)},m=()=>{n([])},j=()=>{if(s.length===0){console.error("No hay datos para descargar");return}if(t.length===0){console.error("Debe seleccionar al menos un campo");return}const x=s.map(g=>{const u={};return t.forEach(f=>{u[f]=g[f]}),u}),h=ke.json_to_sheet(x),d=ke.book_new();ke.book_append_sheet(d,h,"Datos Seleccionados"),qe(d,"Datos_Seleccionados.xlsx")};return a.useEffect(()=>{c()},[]),e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center text-white",style:{minHeight:"55vh"},children:[e.jsxs("h2",{className:"text-center mb-4",children:["Exportar Datos  ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"text-center mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportaci√≥n."}),i?e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm text-light mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-light mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-light mx-2",role:"status"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar Todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:m,children:"Limpiar Selecci√≥n"})]}),e.jsx("form",{className:"mb-4 w-100 px-3",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border-1 border",children:o.map(x=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",style:{display:"flex",alignItems:"center"},children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input ",id:x,value:x,onChange:()=>p(x),checked:t.includes(x)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:x,children:x})]})},x))})}),t.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn btn-green text-white fw-semibold",onClick:j,children:["Descargar Datos Seleccionados ",e.jsx("i",{className:"bi bi-filetype-xml"})]})})]})]})},yi=({chartType:s,onChange:r})=>e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-white ",id:"inputGroup-sizing-sm",children:"Tipo de gr√°fico:"}),e.jsxs("select",{className:"form-select text-center ",onChange:r,value:s,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"L√≠nea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"})]})]}),wi=({agrupacion:s,onChange:r})=>e.jsxs("div",{className:"input-group input-group-sm",children:[e.jsxs("span",{className:"input-group-text bg-purpleUi bg-opacity-50 text-white",children:[e.jsx("i",{className:"bi bi-diagram-3-fill me-1"})," Agrupar por"]}),e.jsxs("select",{className:"form-select text-center shadow-sm bg-dark bg-opacity-50 text-white",value:s,onChange:r,children:[e.jsx("option",{value:"comisaria",children:"Comisar√≠a"}),e.jsx("option",{value:"unidad",children:"Unidad"})]})]}),Ci=({coleccionesSeleccionadas:s,onChange:r})=>{const t=["db_art_diez_bis","db_art_diez_bis_desactivados"],n=o=>{const c=s.includes(o);c&&s.length===1||r(c?s.filter(p=>p!==o):[...s,o])},i=o=>o==="db_art_diez_bis"?"Activos":"Hist√≥ricos",l=o=>o==="db_art_diez_bis"?"bi-person-fill-check":"bi-person-fill-slash";return e.jsx("div",{className:"d-flex justify-content-center gap-3 flex-wrap my-3",children:t.map(o=>{const c=s.includes(o);return e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Registros "}),e.jsxs("button",{type:"button",className:`btn d-flex align-items-center gap-2 px-4 py-1 rounded-3 shadow-sm fw-semibold ${c?"btn-light":"btn-outline-light"}`,onClick:()=>n(o),children:[e.jsx("i",{className:`bi ${l(o)} fs-5`}),i(o)]},o)]})})})},Si=({chartType:s,data:r,options:t})=>{switch(s){case"line":return e.jsx(es,{data:r,options:t});case"pie":return e.jsx(fs,{data:r,options:t});case"doughnut":return e.jsx(Ns,{data:r,options:t});case"bar":default:return e.jsx(js,{data:r,options:t})}},ki=(s,r)=>{const[t,n]=a.useState({}),[i,l]=a.useState(!0),[o,c]=a.useState(null);return a.useEffect(()=>{const p=async()=>{try{const b={};for(const m of r)(await ne(G(F,m))).forEach(x=>{const h=x.data()[s];h&&(b[h]=(b[h]||0)+1)});n(b)}catch(b){c(b),console.error("Error fetching data:",b)}finally{l(!1)}};r.length>0?(l(!0),p()):(n({}),l(!1))},[s,r]),{data:t,loading:i,error:o}},_i=()=>{const[s,r]=a.useState("bar"),[t,n]=a.useState("comisaria"),[i,l]=a.useState(["db_art_diez_bis","db_art_diez_bis_desactivados"]),{data:o,loading:c,error:p}=ki(t,i);if(c)return e.jsxs("p",{className:"text-center",children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm text-white mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-white mx-2",role:"status"}),e.jsx("span",{className:"spinner-grow spinner-grow-sm text-white mx-2",role:"status"})]});if(p)return e.jsx("p",{className:"alert alert-danger text-center",children:"Error cargando datos."});if(!o)return null;const b=Object.values(o).reduce((f,v)=>f+v,0),j=[" #1de9b6"," #ffca28"," #f73378"," #16B1FF"," #7e57c2"," #e353d3"," #c7f7d4"," #ffef62"," #05F2D4"].slice(0,9),x=Object.keys(o),h=Object.values(o),d={labels:x,datasets:[{label:`Total por ${t[0].toUpperCase()+t.slice(1)} (${b})`,data:h,backgroundColor:j,borderColor:"white",borderWidth:2,color:"#ffffff"}]},g={duration:1e3,easing:"easeOutBounce"},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff"}},title:{display:!0,text:`Total de Casos por ${t[0].toUpperCase()+t.slice(1)}`,color:"#ffffff",font:{size:20}},tooltip:{bodyColor:"#ffffff",titleColor:"#ffffff"}},animation:g,scales:s==="pie"||s==="doughnut"?{}:{y:{beginAtZero:!0,ticks:{stepSize:1,color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}},x:{beginAtZero:!0,ticks:{stepSize:1,color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}}}};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-center my-5 text-light",children:"Estad√≠sticas / Gr√°ficos"}),e.jsxs("div",{className:"row justify-content-center mb-3",children:[e.jsx("div",{className:"col-12 col-md-5 mb-2",children:e.jsx(yi,{chartType:s,onChange:f=>r(f.target.value)})}),e.jsx("div",{className:"col-12 col-md-5 mb-2",children:e.jsx(wi,{agrupacion:t,onChange:f=>n(f.target.value)})}),e.jsx("div",{className:"col-12 col-md-10",children:e.jsx(Ci,{coleccionesSeleccionadas:i,onChange:l})})]}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:e.jsx(Si,{chartType:s,data:d,options:u})})})]})},Ei=()=>{const[s,r]=a.useState([]),[t,n]=a.useState({totalDocumentos:0,personalEntrega:{},promedioTiempo:null,documentosPorComisaria:{},unidades:[],comisarias:[],salidasArtUsuarioMap:[]});a.useEffect(()=>{(async()=>{const c=(await ne(G(F,"db_art_diez_bis_desactivados"))).docs.map(p=>p.data());r(c),i(c)})()},[]);const i=l=>{const o={},c={},p={},b={};let m=0,j=0;l.forEach(u=>{if(u.personal_entrega.forEach(f=>{const v=f.nombre.split(" ")[0],N=`${f.ni} - ${v}`;o[N]=(o[N]||0)+1}),c[u.comisaria]=(c[u.comisaria]||0)+1,u.unidad&&(p[u.unidad]=(p[u.unidad]||0)+1),u.salida_art_usuario&&(b[u.salida_art_usuario]=(b[u.salida_art_usuario]||0)+1),u.fecha_ingreso_validado&&u.salida_art){const f=u.fecha_ingreso_validado.toDate(),v=u.salida_art.toDate();!isNaN(f)&&!isNaN(v)?(m+=(v-f)/(1e3*60*60),j++):console.warn("Fecha inv√°lida: ",u.fecha_ingreso_validado,u.salida_art)}});const x=Object.entries(p).map(([u,f])=>({unidad:u,cantidad:f})).sort((u,f)=>f.cantidad-u.cantidad),h=Object.entries(c).map(([u,f])=>({comisaria:u,cantidad:f})).sort((u,f)=>f.cantidad-u.cantidad),d=Object.entries(o).map(([u,f])=>({key:u,value:f})).sort((u,f)=>f.value-u.value),g=Object.entries(b).map(([u,f])=>({usuario:u,cantidad:f})).sort((u,f)=>f.cantidad-u.cantidad);n({totalDocumentos:l.length,personalEntrega:d,promedioTiempo:j>0?(m/j).toFixed(2):null,documentosPorComisaria:c,unidades:x,comisarias:h,salidasArtUsuarioMap:g})};return e.jsxs("div",{className:"container ",children:[e.jsxs("h3",{className:"text-center mb-4 bg-secondaryM text-white rounded p-2 ",children:["Estad√≠sticas Art. 10 Bis ",e.jsx("i",{className:"ms-2 bi bi-bar-chart-fill"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2  ",children:"Total Art 10 Bis"}),e.jsxs("p",{className:"card-text fs-3",children:["    ",e.jsx("i",{className:"bi bi-clipboard-data mx-3",style:{fontSize:"1.5rem",color:"#007bff"}})," ",t.totalDocumentos," Total "]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2 ",children:"Promedio Salida"}),e.jsx("i",{className:"bi bi-clock mx-3",style:{fontSize:"1.5rem",color:"#007bff"}}),e.jsxs("span",{className:"card-text fs-3",children:[t.promedioTiempo!==null?t.promedioTiempo:"N/A"," Horas"]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card mb-4 shadow-sm mt-2",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:"Comisar√≠as"}),e.jsx("ul",{className:"list-unstyled mb-0 text-center",children:Object.entries(t.documentosPorComisaria).map(([l,o])=>e.jsxs("li",{children:[l,": ",o]},l))}),e.jsx("hr",{}),e.jsxs("div",{className:"text-center",children:[e.jsx("strong",{children:"Total Art. por  Comisar√≠as: "}),Object.values(t.documentosPorComisaria).reduce((l,o)=>l+o,0)]})]})})})]}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento en Personal Entrega ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"Posici√≥n"}),e.jsx("th",{scope:"col",children:"Personal Entrega"}),e.jsx("th",{scope:"col",children:"Procedimientos"}),e.jsx("th",{scope:"col",children:"Distinci√≥n"})]})}),e.jsx("tbody",{children:t.personalEntrega.length>0?t.personalEntrega.map(({key:l,value:o},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsx("td",{children:c===0?"üëë 1":c===1?"ü•à 2":c===2?"ü•â 3":c+1}),e.jsx("td",{children:l}),e.jsxs("td",{children:[o," Procedimientos"]}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Unidades ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Unidad"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinci√≥n"})]})}),e.jsx("tbody",{children:t.unidades.length>0?t.unidades.map(({unidad:l,cantidad:o},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsxs("td",{children:[c===0?"üëë 1":c===1?"ü•à 2":c===2?"ü•â 3":c+1," ",l]}),e.jsx("td",{children:o}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Comisar√≠as ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Comisar√≠a"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinci√≥n"})]})}),e.jsx("tbody",{children:t.comisarias.length>0?t.comisarias.map(({comisaria:l,cantidad:o},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsxs("td",{children:[c===0?"üëë 1":c===1?"ü•à 2":c===2?"ü•â 3":c+1," ",l]}),e.jsx("td",{children:o}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})}),e.jsx("div",{className:"card mt-4",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title text-center mb-4 bg-primary text-white rounded p-2",children:["Rendimiento Salida Art Usuario ",e.jsx("i",{className:"ms-2 bi bi-graph-up-arrow"})]}),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Usuario"}),e.jsx("th",{children:"Cantidad"}),e.jsx("th",{children:"Distinci√≥n"})]})}),e.jsx("tbody",{children:t.salidasArtUsuarioMap.length>0?t.salidasArtUsuarioMap.map(({usuario:l,cantidad:o},c)=>e.jsxs("tr",{className:c===0?"table-warning":"",children:[e.jsxs("td",{children:[c===0?"üëë 1":c===1?"ü•à 2":c===2?"ü•â 3":c+1," ",l]}),e.jsx("td",{children:o}),e.jsx("td",{children:c===0?e.jsx("span",{className:"badge bg-warning text-dark",children:"Destacado"}):c===1?e.jsx("span",{className:"badge bg-secondary",children:"Notable"}):c===2?e.jsx("span",{className:"badge bg-dark",children:"Relevante"}):null})]},l)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center",children:"No hay datos disponibles"})})})]})]})})]})};ds.register(xs,bs,ps,gs,ms,us,hs);const xa=({personas:s,visible:r,setVisible:t})=>{const n=a.useMemo(()=>{const l={};s.forEach(p=>{var m,j;const b=(j=(m=p.fecha_ingreso_validado)==null?void 0:m.toDate)==null?void 0:j.call(m);if(b){const x=b.getDate().toString().padStart(2,"0"),h=(b.getMonth()+1).toString().padStart(2,"0"),d=b.getFullYear(),g=`${x}-${h}-${d}`;l[g]=(l[g]||0)+1}});const o=Object.keys(l).sort(),c=o.map(p=>l[p]);return{labels:o,datasets:[{label:"Ingresos por d√≠a",data:c,fill:!1,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgb(75, 192, 192)",tension:.2}]}},[s]),i={responsive:!0,plugins:{legend:{position:"top"},title:{display:!1},datalabels:{anchor:"end",align:"top",color:"#000",font:{weight:"bold"},formatter:l=>l}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto m",onClick:()=>t(!r)})}),e.jsx("div",{className:"card shadow-sm  mt-1",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-center",children:"üìÜ Ingresos en el tiempo"}),e.jsx(es,{data:n,options:i})]})})]})},ba=({personas:s,seleccionadas:r=[],visible:t,setVisible:n})=>{const i=a.useMemo(()=>{const l=s.length,o=r.length,c={},p={};return s.forEach(b=>{const m=b.unidad||"Sin unidad",j=b.comisaria||"Sin comisar√≠a";c[m]=(c[m]||0)+1,p[j]=(p[j]||0)+1}),{total:l,totalSeleccionadas:o,porUnidad:c,porComisaria:p}},[s,r]);return e.jsx("div",{className:"mb-4",children:t&&e.jsxs("div",{className:"text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg ",children:[e.jsx("div",{className:"d-flex justify-content-end my-2 ",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white ms-auto mb-2",onClick:()=>n(!t)})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-3 ",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3 bg-light",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-people fs-3 text-dark"})}),e.jsx("h6",{className:"card-title mb-1",children:"Total registros"}),e.jsx("span",{className:"badge bg-primary fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.total})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#0d6efd",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center text-ligh",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3 bg-light",style:{width:"60px",height:"60px"},children:e.jsx("i",{className:"bi bi-check-circle fs-3 text-secondaryM"})}),e.jsx("h6",{className:"card-title mb-1",children:"Seleccionados"}),e.jsx("span",{className:"badge bg-secondaryM fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.totalSeleccionadas})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#03dac6",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-car-front  me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Unidades"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porUnidad).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsx("span",{cl:!0,children:l}),e.jsx("span",{className:"badge bg-indigo mb-2",children:o})]},l))})]})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card border-0 shadow-sm h-100 bg-dark bg-opacity-50 text-light ",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-shield-lock me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Comisar√≠as"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porComisaria).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:l}),e.jsx("span",{className:"badge bg-blue mb-2",children:o})]},l))})]})})})]})]})})},pa=({searchTerm:s,setSearchTerm:r,orden:t,setOrden:n,prioridadFilter:i,setPrioridadFilter:l,comisariaFilter:o,setComisariaFilter:c,fechaInicio:p,setFechaInicio:b,fechaFin:m,setFechaFin:j,personas:x=[],visible:h,setVisible:d})=>{const g=[...new Set(x.map(N=>N.unidad))],u=[...new Set(x.map(N=>N.comisaria))],f=s||t!=="asc"||i||o||p||m,v=()=>{r(""),n("asc"),l(""),c(""),b(""),j("")};return h&&e.jsxs("div",{className:"text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"d-flex justify-content-end mt-2",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white  ms-auto",onClick:()=>d(!h)})}),e.jsxs("div",{className:"card shadow-sm border-0 my-2 text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"card-header text-center bg-light bg-opacity-50 rounded-4 shadow-lg text-white p-1 rounded-2 mx-3 my-2",children:e.jsxs("h5",{children:[e.jsx("i",{className:"bi bi-funnel-fill me-2"}),"Filtros"]})}),e.jsxs("div",{className:"card-body px-4",children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-12 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Buscar por Nombre"}),e.jsx("input",{type:"text",className:"form-control",value:s,onChange:N=>r(N.target.value),placeholder:"Ej: Juan P√©rez"})]}),e.jsxs("div",{className:"col-12 col-md-2 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Orden"}),e.jsxs("select",{className:"form-select",value:t,onChange:N=>n(N.target.value),children:[e.jsx("option",{value:"asc",children:"Ascendente (A-Z)"}),e.jsx("option",{value:"desc",children:"Descendente (Z-A)"})]})]}),e.jsxs("div",{className:"col-12 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Unidad"}),e.jsxs("select",{className:"form-select",value:i,onChange:N=>l(N.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),g.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{className:"col-12 col-md-3 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Comisar√≠a"}),e.jsxs("select",{className:"form-select",value:o,onChange:N=>c(N.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),u.map(N=>e.jsx("option",{value:N,children:N},N))]})]}),e.jsxs("div",{className:"col-12 col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-semibold small text-light",children:"Rango de fechas (Ingreso)"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"date",className:"form-control",value:p,onChange:N=>b(N.target.value)}),e.jsx("span",{className:"input-group-text",children:"a"}),e.jsx("input",{type:"date",className:"form-control",value:m,onChange:N=>j(N.target.value)})]})]})]}),f&&e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{className:"btn btn-danger text-white rounded-circle d-flex align-items-center justify-content-center",style:{width:"45px",height:"45px",boxShadow:"0 0.5rem 1rem rgba(0,0,0,0.15)"},onClick:v,title:"Restaurar filtros",children:e.jsx("i",{className:"bi bi-trash"})})})]})]})," "]})},ga=({columnasVisibles:s,setColumnasVisibles:r,visible:t,setVisible:n})=>t&&e.jsxs("div",{className:"text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"d-flex justify-content-end mt-2",children:e.jsx("button",{type:"button",className:"btn-close btn-close-white  ms-auto",onClick:()=>n(!t)})}),e.jsx("div",{className:"card shadow-sm border-0 my-2 text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:e.jsxs("div",{className:"card-body text-light",children:[e.jsxs("h5",{className:"card-title mb-3 text-center bg-primary text-white p-1 rounded-2 bg-light bg-opacity-50 rounded-4 shadow-lg text-white p-2",children:[e.jsx("i",{className:"bi bi-sliders me-2"}),"Mostrar / Ocultar columnas"]}),e.jsx("div",{className:"row",children:Object.entries(s).map(([i,l])=>e.jsx("div",{className:"col-6 col-md-4 mb-2",children:e.jsxs("div",{className:"form-check form-switch ",children:[e.jsx("input",{className:"form-check-input bg-light bg-opacity-50",type:"checkbox",id:`columna-${i}`,checked:l,onChange:()=>r(o=>({...o,[i]:!o[i]}))}),e.jsx("label",{className:"form-check-label",htmlFor:`columna-${i}`,children:i==="usuarioSalida"?"Usuario salida":i.charAt(0).toUpperCase()+i.slice(1)})]})},i))})]})})]}),ja=({filteredPersonas:s,selectedDocs:r,toggleSelectAll:t,toggleSelectDoc:n,columnasVisibles:i})=>{const[l,o]=a.useState(!0);return e.jsx(e.Fragment,{children:s.length===0?e.jsx("div",{className:"alert alert-light text-danger shadow text-center titilar mt-3",children:"Sin registro encontrado."}):e.jsx("div",{className:"table-responsive-sm d-none d-sm-block my-4",children:e.jsxs("div",{className:"card text-center p-2 bg-transparent bg-opacity-50 rounded-4 shadow-lg  ",children:[e.jsxs("div",{className:"card-header bg-dark bg-opacity-50  text-white px-3 p-1 d-flex justify-content-between align-items-center rounded-2 mx-2 my-2",children:[e.jsx("div",{style:{width:"32px"}}),e.jsxs("h5",{className:"mb-0 text-center flex-grow-1",children:[e.jsx("i",{className:"bi bi-view-list me-2"}),"Tabla"]}),e.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>o(!l),children:[e.jsx("i",{className:`bi ${l?"bi-arrows-collapse":"bi-arrows-expand"} me-1`}),l?"Contraer":"Expandir"]})]}),l&&e.jsx("div",{className:"px-3 pb-3",children:e.jsxs("table",{className:"table table-striped table-hover text-center small mb-0 table-info",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===s.length,onChange:t})}),e.jsx("th",{children:"Nombre"}),i.unidad&&e.jsx("th",{children:"Unidad"}),i.dni&&e.jsx("th",{children:"Documento"}),i.comisaria&&e.jsx("th",{children:"Comisar√≠a"}),i.ingreso&&e.jsx("th",{children:"F Ingreso"}),i.salida&&e.jsx("th",{children:"F Salida"}),i.usuarioSalida&&e.jsx("th",{children:"Salida"})]})}),e.jsx("tbody",{children:s.map(c=>{var p,b,m;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:r.includes(c.id),onChange:()=>n(c.id)})}),e.jsx("td",{className:"text-center",children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("div",{className:"rounded-circle bg-primary text-white d-flex justify-content-center align-items-center",style:{width:"30px",height:"30px",fontSize:"0.9rem"},children:((p=c.unidad)==null?void 0:p.charAt(0).toUpperCase())||"?"}),e.jsx("span",{role:"button",onClick:()=>{var f,v,N;const j=((f=c.personal_entrega)==null?void 0:f.map(S=>`${S.nombre} (NI: ${S.ni})
üè¢ Unidad: ${c.unidad||"No informada"}`).join(`

`))||"Sin datos",x=((v=c.fecha_ingreso_validado)==null?void 0:v.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"}))||"Sin fecha",h=((N=c.salida_art)==null?void 0:N.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"}))||"Sin fecha",d=c.usuario_validado_ingreso||"Desconocido",g=c.comisaria||"No informada",u=c.salida_art_usuario||"No informada";alert(`üë§ Personal que entreg√≥:
${j}

üè¢ Comisar√≠a: ${g}
üìÖ Fecha validaci√≥n: ${x}
üëÆ Usuario que valid√≥: ${d}
üìÖ Fecha salida: ${h}
üëÆ Usuario que valid√≥ salida: ${u}`)},className:"text-decoration-none",children:c.nombre_apellido})]})}),i.unidad&&e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:c.unidad})}),i.dni&&e.jsx("td",{children:c.dni}),i.comisaria&&e.jsx("td",{children:e.jsxs("div",{className:"d-flex flex-column align-items-center gap-1",children:[e.jsx("span",{className:"badge bg-pink",children:c.comisaria}),c.comisaria_recibe===!1&&e.jsx("span",{className:"badge bg-secondaryM titilar",children:"Pendiente Validar"})]})}),i.ingreso&&e.jsx("td",{children:(b=c.fecha_ingreso_validado)==null?void 0:b.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"medium",timeZone:"America/Argentina/Buenos_Aires"})}),i.salida&&e.jsx("td",{children:(m=c.salida_art)==null?void 0:m.toDate().toLocaleString("es-AR",{dateStyle:"full",timeStyle:"medium",timeZone:"America/Argentina/Buenos_Aires"})}),i.usuarioSalida&&e.jsx("td",{children:e.jsx("span",{className:"badge bg-teal",children:c.salida_art_usuario})})]},c.id)})})]})})]})})})},Fi=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState("asc"),[d,g]=a.useState(""),[u,f]=a.useState(""),[v,N]=a.useState(""),[S,k]=a.useState(!1),[w,C]=a.useState(!1),[y,_]=a.useState(!1),[M,E]=a.useState(!1),I=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotales"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"tabla",componente:"TablaDatos"}],[P,q]=a.useState(I),[Z,H]=a.useState(null),[A,V]=a.useState({unidad:!0,dni:!0,comisaria:!0,ingreso:!1,salida:!1,usuarioSalida:!1}),J=G(F,"db_art_diez_bis_desactivados"),ee=async()=>{c(!0);try{const B=(await ne(J)).docs.map(te=>({...te.data(),id:te.id}));r(B),n(B)}catch(T){console.error("Error al obtener personas: ",T)}finally{c(!1)}},z=T=>T.sort((B,te)=>x==="asc"?B.nombre_apellido.localeCompare(te.nombre_apellido):te.nombre_apellido.localeCompare(B.nombre_apellido)),R=T=>{H(T)},Y=T=>{T.preventDefault()},le=T=>{const B=[...P],te=B.findIndex(D=>D.id===Z),ae=B.findIndex(D=>D.id===T),[O]=B.splice(te,1);B.splice(ae,0,O),q(B)};a.useEffect(()=>{ee()},[]),a.useEffect(()=>{const T=s.filter(B=>B.nombre_apellido&&B.nombre_apellido.toLowerCase().includes(p.toLowerCase())).filter(B=>m?B.unidad===m:!0).filter(B=>d?B.comisaria===d:!0).filter(B=>{var D;if(!u&&!v)return!0;const te=(D=B.fecha_ingreso_validado)==null?void 0:D.toDate();if(!te)return!1;const ae=u?new Date(u):null,O=v?new Date(v):null;return!(ae&&te<ae||O&&te>O)});n(z(T))},[p,m,d,u,v,x,s]);const de=T=>{l(B=>B.includes(T)?B.filter(te=>te!==T):[...B,T])},he=()=>{if(i.length===t.length)l([]);else{const T=t.map(B=>B.id);l(T)}},ie=()=>{const T=s.filter(O=>i.includes(O.id));if(T.length===0){alert("No hay personas seleccionadas para exportar.");return}const B=T.map(O=>{var D,W;return{Nombre:O.nombre_apellido,Documento:O.dni,Unidad:O.unidad,Comisar√≠a:O.comisaria,"Fecha Ingreso":(D=O.fecha_ingreso_validado)==null?void 0:D.toDate().toLocaleString("es-AR"),"Fecha Salida":(W=O.salida_art)==null?void 0:W.toDate().toLocaleString("es-AR"),"Usuario Salida":O.salida_art_usuario}}),te=ke.json_to_sheet(B),ae=ke.book_new();ke.book_append_sheet(ae,te,"Seleccionados"),qe(ae,"personas_seleccionadas.xlsx")};return e.jsxs("div",{className:"container my-0 my-5 my-sm-5 my-md-0 my-lg-5 text-light",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Art. 10 Bis Historicos"})}),e.jsxs("div",{className:"container mb-4",children:[e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${w?"btn-light":"btn-outline-light"}`,onClick:()=>C(!w),children:[e.jsx("i",{className:`bi ${w?"bi-eye-slash":"bi-eye"} me-1`}),w?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${y?"btn-light":"btn-outline-light"}`,onClick:()=>_(!y),children:[e.jsx("i",{className:`bi ${y?"bi-eye-slash":"bi-eye"} me-1`}),y?"Ocultar filtro":"Ver filtro"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${M?"btn-light":"btn-outline-light"}`,onClick:()=>E(!M),children:[e.jsx("i",{className:`bi ${M?"bi-eye-slash":"bi-eye"} me-1`}),M?"Ocultar columnas":"Ver columnas"]})})]}),e.jsxs("div",{className:"row my-3 row g-2 align-items-center justify-content-center",children:["  ",e.jsx("div",{className:"col-12 col-md-auto",children:e.jsxs("button",{className:"btn btn-green w-100  bg-dark bg-opacity-50 text-light ",onClick:ie,disabled:i.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Exportar seleccionados a Excel"]})}),e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("button",{className:"btn btn-primary w-100  bg-light bg-opacity-75 text-dark ",onClick:()=>k(!S),children:S?"Cerrar gr√°fico üìâ":" Gr√°fico Fechas üìà"})})]})]}),o?e.jsx(se,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-sm-none",children:t.map(T=>{var B,te;return e.jsx("div",{className:"card mb-3 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:T.nombre_apellido}),e.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:()=>de(T.id)})]}),A.unidad&&e.jsx("div",{children:e.jsx("span",{className:"badge bg-primary",children:T.unidad})}),A.dni&&e.jsxs("div",{children:["DNI: ",T.dni]}),A.comisaria&&e.jsxs("div",{children:["Comisar√≠a: ",e.jsx("span",{className:"badge bg-pink",children:T.comisaria})]}),A.ingreso&&e.jsxs("div",{children:["Ingreso: ",(B=T.fecha_ingreso_validado)==null?void 0:B.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),A.salida&&e.jsxs("div",{children:["Salida: ",(te=T.salida_art)==null?void 0:te.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),A.usuarioSalida&&e.jsxs("div",{children:["Usuario salida: ",e.jsx("span",{className:"badge bg-teal",children:T.salida_art_usuario})]})]})},T.id)})}),P.map(({id:T,componente:B})=>e.jsxs("div",{draggable:!0,onDragStart:()=>R(T),onDragOver:Y,onDrop:()=>le(T),className:"my-3 ",children:[B==="ColumnasVisiblesPanel"&&e.jsx(ga,{columnasVisibles:A,setColumnasVisibles:V,visible:M,setVisible:E}),B==="ResumenTotales"&&e.jsx(ba,{personas:t,seleccionadas:i,visible:w,setVisible:C}),B==="FiltrosPanel"&&e.jsx(pa,{searchTerm:p,setSearchTerm:b,orden:x,setOrden:h,prioridadFilter:m,setPrioridadFilter:j,comisariaFilter:d,setComisariaFilter:g,fechaInicio:u,setFechaInicio:f,fechaFin:v,setFechaFin:N,personas:s,visible:y,setVisible:_}),B==="GraficoPorFechaIngreso"&&S&&e.jsx(xa,{personas:t,visible:S,setVisible:k}),B==="TablaDatos"&&e.jsx(ja,{filteredPersonas:t,selectedDocs:i,toggleSelectAll:he,toggleSelectDoc:de,columnasVisibles:A})]},T))]})]})},Di=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState("asc"),[d,g]=a.useState(""),[u,f]=a.useState(""),[v,N]=a.useState(""),[S,k]=a.useState(!1),[w,C]=a.useState(!1),[y,_]=a.useState(!1),[M,E]=a.useState(!1),I=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotales"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"tabla",componente:"TablaDatos"}],[P,q]=a.useState(I),[Z,H]=a.useState(null),[A,V]=a.useState({unidad:!0,dni:!0,comisaria:!0,ingreso:!1,salida:!1,usuarioSalida:!1}),J=G(F,"db_art_diez_bis"),ee=async()=>{c(!0);try{const B=(await ne(J)).docs.map(te=>({...te.data(),id:te.id}));r(B),n(B)}catch(T){console.error("Error al obtener personas: ",T)}finally{c(!1)}},z=T=>T.sort((B,te)=>x==="asc"?B.nombre_apellido.localeCompare(te.nombre_apellido):te.nombre_apellido.localeCompare(B.nombre_apellido)),R=T=>{H(T)},Y=T=>{T.preventDefault()},le=T=>{const B=[...P],te=B.findIndex(D=>D.id===Z),ae=B.findIndex(D=>D.id===T),[O]=B.splice(te,1);B.splice(ae,0,O),q(B)};a.useEffect(()=>{ee()},[]),a.useEffect(()=>{const T=s.filter(B=>B.nombre_apellido&&B.nombre_apellido.toLowerCase().includes(p.toLowerCase())).filter(B=>m?B.unidad===m:!0).filter(B=>d?B.comisaria===d:!0).filter(B=>{var D;if(!u&&!v)return!0;const te=(D=B.fecha_ingreso_validado)==null?void 0:D.toDate();if(!te)return!1;const ae=u?new Date(u):null,O=v?new Date(v):null;return!(ae&&te<ae||O&&te>O)});n(z(T))},[p,m,d,u,v,x,s]);const de=T=>{l(B=>B.includes(T)?B.filter(te=>te!==T):[...B,T])},he=()=>{if(i.length===t.length)l([]);else{const T=t.map(B=>B.id);l(T)}},ie=()=>{const T=s.filter(O=>i.includes(O.id));if(T.length===0){alert("No hay personas seleccionadas para exportar.");return}const B=T.map(O=>{var D,W;return{Nombre:O.nombre_apellido,Documento:O.dni,Unidad:O.unidad,Comisar√≠a:O.comisaria,"Fecha Ingreso":(D=O.fecha_ingreso_validado)==null?void 0:D.toDate().toLocaleString("es-AR"),"Fecha Salida":(W=O.salida_art)==null?void 0:W.toDate().toLocaleString("es-AR"),"Usuario Salida":O.salida_art_usuario}}),te=ke.json_to_sheet(B),ae=ke.book_new();ke.book_append_sheet(ae,te,"Seleccionados"),qe(ae,"personas_seleccionadas.xlsx")};return e.jsxs("div",{className:"container-lg my-5 my-sm-5 my-md-0 my-lg-5 text-light",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Art. 10 Bis Activos"})}),e.jsxs("div",{className:"container mb-4",children:[e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${w?"btn-light":"btn-outline-light"}`,onClick:()=>C(!w),children:[e.jsx("i",{className:`bi ${w?"bi-eye-slash":"bi-eye"} me-1`}),w?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${y?"btn-light":"btn-outline-light"}`,onClick:()=>_(!y),children:[e.jsx("i",{className:`bi ${y?"bi-eye-slash":"bi-eye"} me-1`}),y?"Ocultar filtro":"Ver filtro"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${M?"btn-light":"btn-outline-light"}`,onClick:()=>E(!M),children:[e.jsx("i",{className:`bi ${M?"bi-eye-slash":"bi-eye"} me-1`}),M?"Ocultar columnas":"Ver columnas"]})})]}),e.jsxs("div",{className:"row my-3 row g-2 align-items-center justify-content-center",children:["  ",e.jsx("div",{className:"col-12 col-md-auto",children:e.jsxs("button",{className:"btn btn-green w-100",onClick:ie,disabled:i.length===0,children:[e.jsx("i",{className:"bi bi-file-earmark-excel me-2"}),"Exportar seleccionados a Excel"]})}),e.jsx("div",{className:"col-12 col-md-auto",children:e.jsx("button",{className:"btn btn-primary w-100",onClick:()=>k(!S),children:S?"Cerrar gr√°fico üìâ":" Gr√°fico Fechas üìà"})})]})]}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-info mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-block d-sm-none",children:t.map(T=>{var B,te;return e.jsx("div",{className:"card mb-3 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:T.nombre_apellido}),e.jsx("input",{type:"checkbox",checked:i.includes(T.id),onChange:()=>de(T.id)})]}),A.unidad&&e.jsx("div",{children:e.jsx("span",{className:"badge bg-primary",children:T.unidad})}),A.dni&&e.jsxs("div",{children:["DNI: ",T.dni]}),A.comisaria&&e.jsxs("div",{children:["Comisar√≠a: ",e.jsx("span",{className:"badge bg-pink",children:T.comisaria})]}),A.ingreso&&e.jsxs("div",{children:["Ingreso: ",(B=T.fecha_ingreso_validado)==null?void 0:B.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),A.salida&&e.jsxs("div",{children:["Salida: ",(te=T.salida_art)==null?void 0:te.toDate().toLocaleString("es-AR",{dateStyle:"short",timeStyle:"short",timeZone:"America/Argentina/Buenos_Aires"})]}),A.usuarioSalida&&e.jsxs("div",{children:["Usuario salida: ",e.jsx("span",{className:"badge bg-teal",children:T.salida_art_usuario})]})]})},T.id)})}),P.map(({id:T,componente:B})=>e.jsxs("div",{draggable:!0,onDragStart:()=>R(T),onDragOver:Y,onDrop:()=>le(T),className:"my-3 ",children:[B==="ColumnasVisiblesPanel"&&e.jsx(ga,{columnasVisibles:A,setColumnasVisibles:V,visible:M,setVisible:E}),B==="ResumenTotales"&&e.jsx(ba,{personas:t,seleccionadas:i,visible:w,setVisible:C}),B==="FiltrosPanel"&&e.jsx(pa,{searchTerm:p,setSearchTerm:b,orden:x,setOrden:h,prioridadFilter:m,setPrioridadFilter:j,comisariaFilter:d,setComisariaFilter:g,fechaInicio:u,setFechaInicio:f,fechaFin:v,setFechaFin:N,personas:s,visible:y,setVisible:_}),B==="GraficoPorFechaIngreso"&&S&&e.jsx(xa,{personas:t,visible:S,setVisible:k}),B==="TablaDatos"&&e.jsx(ja,{filteredPersonas:t,selectedDocs:i,toggleSelectAll:he,toggleSelectDoc:de,columnasVisibles:A})]},T))]})})]})},Ai="/img/Perfiles/9.png",Mi=()=>{const[s,r]=a.useState([]),[t,n]=a.useState(""),[i,l]=a.useState("plazas"),[o,c]=a.useState(!0),[p,b]=a.useState(!1),[m,j]=a.useState({comisariaNombre:"",comisariaNumero:"",disponibilidad:!0,plazas_art_10_bis:""}),[x,h]=a.useState({}),[d,g]=a.useState({comisariaNombre:!1,plazas_art_10_bis:!1}),u="1234",f=async()=>{c(!0);try{const I=(await ne(G(F,"db_comisarias"))).docs.map(P=>({id:P.id,...P.data()}));r(I)}catch(E){console.error("Error al obtener las comisar√≠as: ",E)}finally{c(!1)}};a.useEffect(()=>{f()},[]);const v=E=>{const{name:I,value:P,type:q,checked:Z}=E.target;if(!(I==="comisariaNombre"&&(!/^[A-Za-z√Å√â√ç√ì√ö√ë√°√©√≠√≥√∫√±\s]*$/.test(P)||P.startsWith(" ")))){if(I==="comisariaNumero"){if(P===""||/^\d+$/.test(P)&&Number(P)<=40&&Number(P)>=0){j({...m,[I]:P});return}return}if(I==="plazas_art_10_bis"){const H=parseInt(P,10);P!==""&&(isNaN(H)||H<0||H>99)?g({...d,plazas_art_10_bis:!0}):g({...d,plazas_art_10_bis:!1})}j({...m,[I]:q==="checkbox"?Z:P})}},N=(E,I,P)=>{h({...x,[E]:{...x[E],[I]:I==="disponibilidad"?P==="true":P}})},S=async E=>{const{plazas_art_10_bis:I,disponibilidad:P}=x[E]||{};if(window.confirm("¬øEst√°s seguro de que quieres guardar los cambios?"))try{const Z=$(F,"db_comisarias",E),H={};if(I!==void 0){const A=parseInt(I,10);if(isNaN(A)||A<0||A>30){alert("Por favor, ingresa un n√∫mero v√°lido de plazas entre 0 y 30.");return}H.plazas_art_10_bis=A}P!==void 0&&(H.disponibilidad=P),await K(Z,H),h(A=>{const V={...A};return delete V[E],V}),f()}catch(Z){console.error("Error al actualizar comisar√≠a: ",Z)}},w=(()=>{const E=localStorage.getItem("user");return E?JSON.parse(E):null})(),C=async E=>{E.preventDefault();const I=m.comisariaNombre.trim(),P=m.comisariaNumero.trim(),q=parseInt(m.plazas_art_10_bis,10),Z={comisariaNombre:!I,plazas_art_10_bis:isNaN(q)||q<0||q>99};if(g(Z),Object.values(Z).some(z=>z)||!window.confirm("¬øEst√°s seguro de agregar esta comisar√≠a?"))return;if(prompt("‚ö†Ô∏è Para continuar, ingres√° el c√≥digo llave:")!==u){alert("‚ùå C√≥digo incorrecto. No se agrego la comisar√≠a.");return}const V=P?`${I} ${parseInt(P,10)}`.toLowerCase():I.toLowerCase(),J=new Date,ee=`${J.getDate().toString().padStart(2,"0")}/${(J.getMonth()+1).toString().padStart(2,"0")}/${J.getFullYear().toString().slice(-2)}`;try{await Ie(G(F,"db_comisarias"),{comisaria:V,plazas_art_10_bis:q,disponibilidad:m.disponibilidad,usuario:w.email,fecha:ee}),j({comisariaNombre:"",comisariaNumero:"",disponibilidad:!0,plazas_art_10_bis:""}),f(),alert("Comisar√≠a agregada con √©xito.")}catch(z){console.error("Error al agregar comisar√≠a: ",z)}},y=async E=>{if(!window.confirm("¬øEst√°s seguro de que quieres eliminar esta comisar√≠a?"))return;if(prompt("‚ö†Ô∏è Para continuar, ingres√° el c√≥digo llave:")!==u){alert("‚ùå C√≥digo incorrecto. No se eliminar√° la comisar√≠a.");return}try{const q=$(F,"db_comisarias",E);await Ne(q),f(),alert("‚úÖ Comisar√≠a eliminada correctamente.")}catch(q){console.error("Error al eliminar comisar√≠a: ",q)}},M=[...s.filter(E=>E.comisaria.toLowerCase().includes(t.toLowerCase()))].sort((E,I)=>i==="plazas"?I.plazas_art_10_bis-E.plazas_art_10_bis:i==="nombre"?E.comisaria.localeCompare(I.comisaria):i==="estado"?E.disponibilidad===I.disponibilidad?0:E.disponibilidad?-1:1:0);return e.jsxs("div",{className:"container mt-0 mt-5 mt-sm-5 mt-md-0 my-lg-5 ",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0 mt-5",children:"Comisarias / Plazas"}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"card shadow position-relative  d-flex align-items-start gap-3  p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",style:{overflow:"visible"},children:[e.jsx("div",{className:"bg-red",children:e.jsx("img",{src:Ai,alt:"Asistente",className:"position-absolute rounded-circle shadow p-2",style:{width:"130px",height:"auto",objectFit:"contain",top:"-15px",left:"-10px"}})}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:"Bienvenido üëÆ‚Äç‚ôÇÔ∏è "}),e.jsx("p",{className:"mb-3 text-capitalize m-0",children:"Puedes crear una nueva comisar√≠a, administrando sus plazas disponibles y estado"}),e.jsx("div",{className:"d-flex justify-content-end align-items-center",children:e.jsxs("button",{className:`btn fw-semibold  ${p?"btn-outline-light":"btn-light"}`,onClick:()=>b(!p),children:[e.jsx("i",{className:"bi bi-shield-plus me-2"}),p?"Cancelar":"Nueva Comisar√≠a"]})})]})]})}),p&&e.jsx("form",{onSubmit:C,className:"my-5",children:e.jsxs("div",{className:"row g-3 justify-content-center p-4 bg-light bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("div",{className:"col-12 col-md-5",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"text",className:`form-control ${d.comisariaNombre?"is-invalid":""}`,id:"comisariaNombre",name:"comisariaNombre",value:m.comisariaNombre,onChange:v}),e.jsx("label",{htmlFor:"comisariaNombre",children:"Nombre Comisar√≠a"}),d.comisariaNombre&&e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras y espacios (no al inicio)."})]})}),e.jsx("div",{className:"col-12 col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:`form-control ${d.comisariaNumero?"is-invalid":""}`,id:"comisariaNumero",name:"comisariaNumero",value:m.comisariaNumero,onChange:v}),e.jsx("label",{htmlFor:"comisariaNumero",children:"N√∫mero Comisar√≠a"}),d.comisariaNumero&&e.jsx("div",{className:"invalid-feedback",children:"Solo n√∫meros."})]})}),e.jsx("div",{className:"col-12 col-md-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("input",{type:"number",className:`form-control ${d.plazas_art_10_bis?"is-invalid":""}`,id:"plazas_art_10_bis",name:"plazas_art_10_bis",value:m.plazas_art_10_bis,onChange:v}),e.jsx("label",{htmlFor:"plazas_art_10_bis",children:"Plazas Art. 10 Bis"}),d.plazas_art_10_bis&&e.jsx("div",{className:"invalid-feedback",children:"Debe ingresar un n√∫mero v√°lido de plazas."})]})}),e.jsx("div",{className:"col-12 col-md-1 d-flex align-items-center justify-content-center",children:e.jsx("button",{type:"submit",className:"btn btn-primary fw-semibold rounded-circle shadow-sm",children:e.jsx("i",{className:"bi bi-plus titilar"})})})]})}),e.jsxs("h3",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-white mt-5",children:["Administrar Comisar√≠as ",e.jsx("i",{className:"ms-2 bi bi-list"})]}),e.jsx("div",{className:"container my-4",children:e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4 mb-md-0",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-white",children:e.jsx("i",{className:"bi bi-search text-white"})}),e.jsx("input",{type:"text",className:"form-control bg-light bg-opacity-50",placeholder:"Buscar por nombre de comisar√≠a...",value:t,onChange:E=>n(E.target.value)})]})}),e.jsx("div",{className:"col-12 col-md-5",children:e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{id:"sortOrder",className:"form-select ",value:i,onChange:E=>l(E.target.value),children:[e.jsx("option",{value:"plazas",children:"Plazas"}),e.jsx("option",{value:"nombre",children:"Nombre"}),e.jsx("option",{value:"estado",children:"Estado"})]}),e.jsx("label",{htmlFor:"sortOrder",children:"Ordenar por:"})]})})]})}),o?e.jsx(se,{}):e.jsx("ul",{className:"list-group justify-content-center p-4  bg-opacity-50 rounded-4 shadow-lg",children:M.length===0?e.jsxs("li",{className:"list-group-item text-center text-muted  ",children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-danger"}),e.jsx("span",{className:"text-danger",children:" No hay comisar√≠as registradas."})]}):M.map(({id:E,comisaria:I,plazas_art_10_bis:P,disponibilidad:q})=>{var Z,H;return e.jsxs("li",{className:"list-group-item mb-3 justify-content-center p-4 bg-light bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-3 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("div",{className:"spinner-grow spinner-grow-sm me-2 text-purple",role:"status"}),e.jsxs("span",{className:"badge Gradiante25 me-2 text-capitalize",children:[I,"¬∞"]})]}),e.jsxs("div",{className:"col-12 col-md-3 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("span",{className:"badge bg-primaryMuiBlue me-2",children:"Plazas"}),e.jsx("input",{type:"number",value:((Z=x[E])==null?void 0:Z.plazas_art_10_bis)??P,onChange:A=>N(E,"plazas_art_10_bis",A.target.value),className:"form-control d-inline-block  bg-light bg-opacity-50",style:{maxWidth:"120px"}})]}),e.jsxs("div",{className:"col-12 col-md-4 d-flex align-items-center mb-2 mb-md-0",children:[e.jsx("span",{className:`badge ${q?"bg-teal":"bg-danger"} me-2`,children:"Estado"}),e.jsxs("select",{value:((H=x[E])==null?void 0:H.disponibilidad)??q,onChange:A=>N(E,"disponibilidad",A.target.value),className:"form-select d-inline-block  bg-light bg-opacity-50",children:[e.jsx("option",{value:!0,children:"Disponible üëç"}),e.jsx("option",{value:!1,children:"Llena ‚úã "})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-start justify-content-md-end w-100 mt-2 mt-md-0",children:[x[E]&&e.jsx("button",{className:"btn btn-sm btn-primary me-2 rounded-circle",onClick:()=>S(E),children:e.jsx("i",{className:"bi bi-floppy2"})}),e.jsx("button",{className:"btn btn-sm btn-danger rounded-circle text-white",onClick:()=>y(E),children:e.jsx("i",{className:"bi bi-trash"})})]})]},E)})})]})},Pi=({personas:s,seleccionadas:r=[],visible:t,setVisible:n})=>{a.useEffect(()=>{},[s,r]);const i=a.useMemo(()=>{var x,h;const l=s.length,o=r.length,c={},p={},b={};s.forEach(d=>{const g=d.unidad||"Sin unidad",u=d.comisaria||"Sin comisar√≠a",f=d.salida_art_usuario||"Sin usuario";c[g]=(c[g]||0)+1,p[u]=(p[u]||0)+1,b[f]=(b[f]||0)+1});const m=((x=Object.entries(c).sort((d,g)=>g[1]-d[1])[0])==null?void 0:x[0])||null,j=((h=Object.entries(p).sort((d,g)=>g[1]-d[1])[0])==null?void 0:h[0])||null;return{total:l,totalSeleccionadas:o,porUnidad:c,porComisaria:p,topUnidad:m,topComisaria:j,salidaUsuarios:b}},[s,r]);return e.jsx("div",{className:"mb-4",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>n(!t)})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-3",children:[e.jsx("div",{className:"col ",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100 ",children:[e.jsxs("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center mb-3",style:{width:"60px",height:"60px",backgroundColor:"rgba(13, 110, 253, 0.1)"},children:e.jsx("i",{className:"bi bi-people fs-3 text-primary"})}),e.jsx("h6",{className:"card-title text-muted mb-1",children:"Total registros"}),e.jsx("span",{className:"badge bg-primary fs-5 px-3 py-2 rounded-pill shadow-sm",children:i.total})]}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#0d6efd",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"card border-0 shadow-sm h-100",children:[e.jsx("div",{className:"card-body text-center d-flex flex-column justify-content-center align-items-center",children:e.jsx("img",{src:"img/trophy.png",alt:"Trofeo",className:"rounded-circle shadow p-4",style:{width:"150px",height:"150px",objectFit:"contain"}})}),e.jsx("div",{className:"w-100",style:{height:"5px",backgroundColor:"#03dac6",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem"}})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-car-front text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Unidades"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porUnidad).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:[l," ",l===i.topUnidad&&"üèÜ"]}),e.jsx("span",{className:"badge bg-primary mb-2",children:o})]},l))})]})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"card shadow-sm border-0 h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("i",{className:"bi bi-shield-lock text-primary me-2 fs-4"}),e.jsx("h6",{className:"card-title mb-0",children:"Comisar√≠as"})]}),e.jsx("ul",{className:"list-unstyled small mb-0",children:Object.entries(i.porComisaria).map(([l,o])=>e.jsxs("li",{className:"d-flex justify-content-between",children:[e.jsxs("span",{children:[l," ",l===i.topComisaria&&"üèÜ"]}),e.jsx("span",{className:"badge bg-secondary mb-2",children:o})]},l))})]})})})]})]})})},Ii=({personas:s,visible:r,setVisible:t})=>{const n=a.useMemo(()=>{const l={},o={};return s.forEach(c=>{const p=c.salida_art_usuario;if(p){l[p]=(l[p]||0)+1;const b=c.comisaria||"Sin comisar√≠a";o[p]||(o[p]={}),o[p][b]=(o[p][b]||0)+1}}),{conteo:l,comisariasPorUsuario:o}},[s]),i=a.useMemo(()=>{const l=Object.entries(n.conteo);return l.length===0?null:l.sort((o,c)=>c[1]-o[1])[0][0]},[n]);return r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>t(!1)})}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3",children:[e.jsx("i",{className:"bi bi-person-check-fill text-primary2 me-2"}),"Personal Comisar√≠a Salida"]}),Object.keys(n.conteo).length===0?e.jsx("p",{className:"text-muted",children:"No hay registros de salida."}):e.jsx("ul",{className:"list-group list-group-flush",children:Object.entries(n.conteo).sort((l,o)=>o[1]-l[1]).map(([l,o])=>{let c="";if(l==="sistema")c="Autom√°tico DG OJO ‚ö†Ô∏è";else{const p=n.comisariasPorUsuario[l];c=Object.entries(p).sort((b,m)=>m[1]-b[1]).map(([b,m])=>`${b} (${m})`).join(", ")}return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-semibold",children:[l===i&&"üèÜ","  ",l]}),e.jsxs("div",{className:"text-muted small",children:["üè¢ ",c]})]}),e.jsx("span",{className:"badge bg-primary2 rounded-pill",children:o})]},l)})})]})})]}):null},Li=({visible:s,setVisible:r})=>{const[t,n]=a.useState([]);a.useEffect(()=>{(async()=>{const p=(await ne(G(F,"db_art_diez_bis_desactivados"))).docs.map(b=>b.data());n(p)})()},[]);const i=a.useMemo(()=>{const o={};return t.forEach(c=>{Array.isArray(c.personal_entrega)&&c.personal_entrega.forEach(p=>{var x;const b=p.ni,m=((x=p.nombre)==null?void 0:x.split(" ")[0])||p.nombre,j=c.comisaria;o[b]||(o[b]={nombre:m,count:0,comisarias:{}}),o[b].count+=1,j&&(o[b].comisarias[j]=(o[b].comisarias[j]||0)+1)})}),o},[t]);if(!s)return null;const l=Object.entries(i).sort((o,c)=>c[1].count-o[1].count);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx("button",{type:"button",className:"btn-close bg-white ms-auto mb-2",onClick:()=>r(!1)})}),e.jsx("div",{className:"card shadow-sm border-0",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h5",{className:"card-title mb-3",children:[e.jsx("i",{className:"bi bi-award-fill text-primaryMuiBlue me-2"}),"Personal Entregas Destacadas"]}),l.length===0?e.jsx("p",{className:"text-muted",children:"No hay registros de entrega."}):e.jsx("ul",{className:"list-group list-group-flush",children:l.map(([o,c],p)=>{const{nombre:b,count:m,comisarias:j}=c,x=t.find(u=>(u.personal_entrega||[]).some(f=>`${f.ni}`===o)),h=(x==null?void 0:x.unidad)||"OTROS";let d="",g="bg-primaryMuiBlue";return p===0?(d="üëë",g="bg-yellowMui"):p===1?(d="ü•à",g="bg-yellowMui"):p===2&&(d="ü•â",g="bg-yellowMui"),e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-semibold",children:[d," ",b," - ",o]}),e.jsxs("div",{className:"text-muted small",children:[h.toUpperCase().includes("MOTORIZADA")?"üèçÔ∏è":"üöì"," ",h]})]}),e.jsxs("div",{className:"text-end",children:[e.jsx("span",{className:`badge ${g} rounded-pill`,children:m}),e.jsxs("div",{className:"mt-2 text-muted small text-start",children:[e.jsx("strong",{children:"üìç Comisar√≠as:"}),e.jsx("ul",{className:"mb-0 ps-3",children:Object.entries(j).map(([u,f])=>e.jsxs("li",{children:[u,": ",f," ",f===1?"vez":"veces"]},u))})]})]})]},`${o}-${p}`)})})]})})]})},Ri=({personas:s})=>{const[r,t]=a.useState(null);return a.useEffect(()=>{let n=0,i=0;if(s.forEach(l=>{var p,b;const o=(p=l.fecha_ingreso_validado)==null?void 0:p.toDate(),c=(b=l.salida_art)==null?void 0:b.toDate();if(o&&c&&!isNaN(o)&&!isNaN(c)){const m=c-o;m>=0&&(n+=m,i++)}}),i>0){const l=n/i,o=Math.floor(l/(1e3*60*60)),c=Math.floor(l%(1e3*60*60)/(1e3*60)),p=Math.floor(l%(1e3*60)/1e3);t({horas:o,minutos:c,segundos:p})}else t(null)},[s]),e.jsx("div",{className:"card shadow my-5 border-0 p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg text-white",children:e.jsxs("div",{className:"card-body  ",children:[e.jsx("h5",{className:"card-title rounded-3",children:"‚è±Ô∏è Tiempo Promedio entre Ingreso y Salida"}),r?e.jsx("div",{className:" d-flex justify-content-end align-items-end",children:e.jsxs("p",{className:"mb-0 fs-5 me-3 ",children:[e.jsxs("strong",{children:[r.horas,"h ",r.minutos,"m ",r.segundos,"s"]})," ",e.jsx("span",{className:"titilar",children:" ‚è≥ "})]})}):e.jsx("p",{className:"text-muted mb-0 ",children:"No hay datos v√°lidos para calcular."})]})})},$i=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState("asc"),[d,g]=a.useState(""),[u,f]=a.useState(""),[v,N]=a.useState(""),[S,k]=a.useState(!1),[w,C]=a.useState(!1),[y,_]=a.useState(!1),M=[{id:"columnas",componente:"ColumnasVisiblesPanel"},{id:"resumen",componente:"ResumenTotalesRendimiento"},{id:"personalEntregaCard",componente:"PersonalEntregaCard"},{id:"personalSalidaCard",componente:"PersonalSalidaCard"},{id:"filtros",componente:"FiltrosPanel"},{id:"grafico",componente:"GraficoPorFechaIngreso"},{id:"card",componente:"CardInfo"},{id:"cardComisaria",componente:"ComisariaCardInfo"},{id:"tablaRendimiento",componente:"TablaDatosRendimiento"}],[E,I]=a.useState(M),[P,q]=a.useState(null),Z=G(F,"db_art_diez_bis_desactivados"),H=async()=>{c(!0);try{const R=(await ne(Z)).docs.map(Y=>({...Y.data(),id:Y.id}));r(R),n(R)}catch(z){console.error("Error al obtener personas: ",z)}finally{c(!1)}},A=z=>z.sort((R,Y)=>x==="asc"?R.nombre_apellido.localeCompare(Y.nombre_apellido):Y.nombre_apellido.localeCompare(R.nombre_apellido)),V=z=>{q(z)},J=z=>{z.preventDefault()},ee=z=>{const R=[...E],Y=R.findIndex(he=>he.id===P),le=R.findIndex(he=>he.id===z),[de]=R.splice(Y,1);R.splice(le,0,de),I(R)};return a.useEffect(()=>{H()},[]),a.useEffect(()=>{const z=s.filter(R=>R.nombre_apellido&&R.nombre_apellido.toLowerCase().includes(p.toLowerCase())).filter(R=>m?R.unidad===m:!0).filter(R=>d?R.comisaria===d:!0).filter(R=>{var he;if(!u&&!v)return!0;const Y=(he=R.fecha_ingreso_validado)==null?void 0:he.toDate();if(!Y)return!1;const le=u?new Date(u):null,de=v?new Date(v):null;return!(le&&Y<le||de&&Y>de)});n(A(z))},[p,m,d,u,v,x,s]),e.jsxs("div",{className:"  my-sm-5 my-md-5 my-lg-5 my-5 text-light ",children:[e.jsx("div",{className:"row",children:e.jsx("h1",{className:"text-center  animate__animated animate__bounce mt-sm-0 ",children:"Rendimiento Art. 10 Bis"})}),e.jsx("div",{className:"container my-4",children:e.jsxs("div",{className:"row g-2 align-items-center justify-content-center",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${S?"btn-light":"btn-outline-light"}`,onClick:()=>k(!S),children:[e.jsx("i",{className:`bi ${S?"bi-eye-slash":"bi-eye"} me-1`}),S?"Ocultar resumen":"Ver resumen"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${w?"btn-light":"btn-outline-light"}`,onClick:()=>C(!w),children:[e.jsx("i",{className:`bi ${w?"bi-eye-slash":"bi-eye"} me-1`}),w?"Ocultar Persdonal Salida":"Ver Personal Salida"]})}),e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-auto",children:e.jsxs("button",{className:`btn w-100 ${y?"btn-light":"btn-outline-light"}`,onClick:()=>_(!y),children:[e.jsx("i",{className:`bi ${y?"bi-eye-slash":"bi-eye"} me-1`}),y?"Ocultar Personal Entrada":"Ver Personal Entrada"]})})]})}),e.jsx(Ri,{personas:s,visible:y,setVisible:_}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:E.map(({id:z,componente:R})=>e.jsxs("div",{draggable:!0,onDragStart:()=>V(z),onDragOver:J,onDrop:()=>ee(z),className:"my-3 ",children:[R==="ResumenTotalesRendimiento"&&e.jsx(Pi,{personas:t,seleccionadas:i,visible:S,setVisible:k}),R==="PersonalEntregaCard"&&e.jsx(Li,{personas:s,visible:y,setVisible:_}),R==="PersonalSalidaCard"&&e.jsx(Ii,{personas:s,visible:w,setVisible:C})]},z))})]})},zi="/gif/dash3.gif",Ti=()=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center text-white",style:{minHeight:"55vh"},children:[e.jsx("h5",{className:" fs-1 mb-5 text-greenW ",children:"Bienvenido al Panel 10 Bis !!!"}),e.jsxs("div",{className:"row justify-content-center my-4  ",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"p-2 text-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-greenOn text-indigo"}),"Aqu√≠ podr√°s administrar los recursos del sistema de forma f√°cil y sencilla."]}),e.jsxs("p",{className:"p-2 text-center",children:[e.jsx("i",{className:"bi bi-lightbulb p-3 rounded-circle me-3 bg-greenOn text-indigo"}),"Recuerda que, ante cualquier problema, puedes solicitar asistencia t√©cnica."]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:zi,alt:"Descripci√≥n de la imagen",className:"img-fluid p-2 rounded-circle shadow ",style:{maxWidth:"300px",height:"auto"}})})]})]}),Bi=()=>{const[s,r]=a.useState("dashboard"),[t,n]=a.useState(!1),i=()=>{switch(s){case"dashboard":return e.jsx(Ti,{});case"administar":return e.jsx(Ni,{});case"exportacion":return e.jsx(vi,{});case"graficos":return e.jsx(_i,{});case"comisarias2":return e.jsx(Mi,{});case"rendimiento":return e.jsx(Ei,{});case"rendimientoApp":return e.jsx($i,{});case"desactivados":return e.jsx(Fi,{});case"activados":return e.jsx(Di,{});default:return e.jsx("p",{children:"Selecciona una opci√≥n del men√∫."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 text-white",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill"}),"Men√∫ Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenidos"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="exportacion"?"active":""}`,onClick:()=>r("exportacion"),children:"Exportaci√≥n"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action${s==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="rendimientoApp"?"active":""}`,onClick:()=>r("rendimientoApp"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Rendimiento Art.10 Bis",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"",children:" üèÜ "})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="comisarias2"?"active":""}`,onClick:()=>r("comisarias2"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Comisarias",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-primaryMuiBlue rounded-pill",children:"Administar"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="activados"?"active":""}`,onClick:()=>r("activados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Art 10 Bis Activos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryM rounded-pill",children:"Panel"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="desactivados"?"active":""}`,onClick:()=>r("desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Art 10 Bis Historicos",t?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-secondaryM rounded-pill",children:"Panel"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:i()})]})})},Oi=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Panel de Control 10 Bis",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(Bi,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Ui=()=>e.jsx(e.Fragment,{children:e.jsx(Oi,{})}),qi={nombre:"Santa Fe Tema",valor:"linear-gradient(135deg, #ec4899, #8b5cf6)",tipo:"gradiente"},Vi=[{nombre:"üé® Santa Fe Theme",valor:"linear-gradient(135deg, #ec4899, #8b5cf6)"},{nombre:"üíó Rosa Chicle",valor:"#f73378"},{nombre:"üåû Amarillo Sol",valor:"#ffef62"},{nombre:"üí¶ Celeste Aqua",valor:"#16B1FF"},{nombre:"üîÆ Violeta M√°gico",valor:"#8C57FF"},{nombre:"üçä Naranja Fuego",valor:"#ff8f00"},{nombre:"üçá P√∫rpura Uva",valor:"#7e57c2"},{nombre:"üíô Azul Profundo",valor:"#3c3ae5"},{nombre:"‚ö° Azul El√©ctrico",valor:"#0d6efd"},{nombre:"üåø Verde Menta",valor:"#03dac6"},{nombre:"üçµ Verde T√©",valor:"#20c997"},{nombre:"üß™ Verde Ne√≥n",valor:"#05F2D4"},{nombre:"üö® Rojo Alerta",valor:"#f50057"},{nombre:"ü™® Gris Urbano",valor:"#757575"},{nombre:"üå´Ô∏è Gris Niebla",valor:"#f9f9f983"},{nombre:"üåå Negro Noche",valor:"#212121"}],fa=({setThemeBackgroundColor:s})=>{const[r,t]=a.useState(!1),[n,i]=a.useState(()=>localStorage.getItem("theme")==="dark"),[l,o]=a.useState(()=>localStorage.getItem("bgColor")||qi.valor),c=b=>{t(!0),i(b==="dark"),localStorage.setItem("theme",b),setTimeout(()=>t(!1),500)},p=b=>{o(b),s(b),localStorage.setItem("bgColor",b)};return a.useEffect(()=>{const b=n?"dark":"light";document.body.setAttribute("data-bs-theme",b)},[n]),a.useEffect(()=>{s(l)},[l,s]),e.jsxs("div",{children:[r&&e.jsx(se,{}),e.jsxs("div",{className:"dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle",children:[e.jsxs("button",{className:"btn btn-greenUi py-2 dropdown-toggle d-flex align-items-center rounded-4",id:"bd-theme",type:"button","aria-expanded":"false","data-bs-toggle":"dropdown","aria-label":"Toggle theme",children:[e.jsx("i",{className:n?"bi bi-moon-stars-fill":"bi bi-brightness-high-fill"}),e.jsx("span",{className:"visually-hidden",id:"bd-theme-text",children:"Toggle theme"})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end shadow","aria-labelledby":"bd-theme-text",children:[e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${n?"":"active"}`,onClick:()=>c("light"),children:[e.jsx("i",{className:"bi bi-brightness-high-fill me-2 opacity-50"}),"Modo Luz"]})}),e.jsx("li",{children:e.jsxs("button",{type:"button",className:`dropdown-item d-flex align-items-center ${n?"active":""}`,onClick:()=>c("dark"),children:[e.jsx("i",{className:"bi bi-moon-stars-fill me-2 opacity-50"}),"Modo Nocturno"]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{className:"px-3",children:e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Vi.map(({nombre:b,valor:m})=>e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>p(m),className:"rounded-circle border-0",style:{background:m,width:"24px",height:"24px",outline:m===l?"2px solid white":"none",cursor:"pointer"},title:b,"aria-label":b})},b))})})]})]})]})},Gi=()=>{const[s,r]=a.useState(0);return a.useEffect(()=>{const t=[],n=()=>{r(0),t.push(setTimeout(()=>r(1),0)),t.push(setTimeout(()=>r(2),3e3)),t.push(setTimeout(()=>r(3),6e3))};n();const i=setInterval(()=>{n()},9e3);return()=>{t.forEach(clearTimeout),clearInterval(i)}},[]),e.jsx(e.Fragment,{children:e.jsx("div",{className:" text-white px-3",children:e.jsx("div",{className:"container d-flex justify-content-center align-items-center  ",children:e.jsxs("div",{className:"row align-items-center text-center text-md-start",children:[e.jsxs("div",{className:"col-12 col-md-6 mb-5 mb-md-0  ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4",children:[e.jsx("h1",{className:"fw-bold display-1",children:"Cx2"}),e.jsx("h2",{className:"fw-semibold fs-4",children:"Santa Fe - Gesti√≥n diaria"}),e.jsx("div",{className:"badge bg-white text-dark fw-semibold px-3 py-1 my-2 ",children:" APP DIARIA, SIMPLE Y EFICIENTE.   "})]}),e.jsxs("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsx("p",{className:"fs-5 mt-3 text-center",children:"Tu herramienta √°gil para controlar, organizar y comunicar informaci√≥n de forma simple y eficiente."}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("a",{href:"/denunciasimple",className:"btn btn-light  fw-semibold px-4 me-3",children:"Denuncia Simple "}),e.jsx("a",{className:"btn btn-outline-light fw-semibold px-4",children:"Administar"})]})]}),e.jsxs("div",{className:"mt-5 small ",children:[e.jsx("p",{children:"Versi√≥n: 1.0.0 | Actualizaci√≥n: 05/05/2025"}),e.jsxs("p",{children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})]})]}),e.jsx("div",{className:"col-12 col-md-6 d-flex justify-content-center",children:e.jsx("div",{className:"phone-frame bg-black rounded-4 p-2 shadow",children:e.jsxs("div",{className:"bg-white w-100 h-100 rounded-4 d-flex flex-column align-items-center pt-4 position-relative",children:[e.jsx("div",{className:"rounded-circle bg-gradiante2 d-flex align-items-center justify-content-center text-white fw-bold fs-3",style:{width:"80px",height:"80px"},children:e.jsx("span",{className:"shake",children:"üöÄ"})}),e.jsx("div",{className:"mt-1 fw-semibold text-dark",children:"Inicio App"}),e.jsxs("div",{className:"d-flex flex-column gap-3 mt-3",style:{width:"230px"},children:[s>=1&&e.jsxs("div",{className:"message-card bg-white text-dark rounded shadow p-2 align-self-start",children:[e.jsx("div",{className:"badge bg-primary text-white mb-1",children:"Usuario"}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("span",{className:"me-2 fs-4",children:"üó£Ô∏è"}),e.jsx("p",{className:"mb-0 small",children:"¬øD√≥nde debo registrar la denuncia?"})]})]}),s>=2&&e.jsxs("div",{className:"message-card bg-white text-dark rounded shadow p-2 align-self-end",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("div",{className:"badge bg-danger text-white mb-1",children:"Sistema BootSF"})}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("span",{className:"me-2 fs-4",children:"ü§ñ"}),e.jsx("p",{className:"mb-0 small",children:"¬°Hola! üôå Inici√° la denuncia simple y te voy guiando paso a paso üëãüòâ"})]}),e.jsxs("p",{className:"mb-0 small text-center mt-",children:["Tema a tratar: ",e.jsx("strong",{children:"Robo"})," ‚Ä¢ ",e.jsx("strong",{children:"Violencia"})," ‚Ä¢ ",e.jsx("strong",{children:"Otro"})," ‚ùì"]})]}),s>=3&&e.jsxs("div",{className:"message-card bg-white text-dark rounded shadow p-2 align-self-start",children:[e.jsx("div",{className:"badge bg-primary text-white mb-1",children:"Usuario"}),e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx("span",{className:"me-2 fs-4",children:"üó£Ô∏è"}),e.jsx("p",{className:"mb-0 small",children:"Entendido. Iniciar√© una denuncia simple ahora."})]})]})]}),e.jsx("div",{className:"position-absolute text-center small text-muted",style:{bottom:"40px",padding:"0 1rem"},children:"‚ÄúSimplific√° tu jornada con Cx2‚Äù"})]})})})]})})})})},Hi=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),a.useEffect(()=>{const i=l=>{l.preventDefault(),l.returnValue="Est√°s a punto de dejar la p√°gina. ¬øQuieres continuar?"};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Menu Inicio - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Denuncia Simple App ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsxs("div",{className:" d-flexjustify-content-center  text-white gap-5",children:[e.jsx(Gi,{}),e.jsx(je,{})]})]}),e.jsx(fa,{setThemeBackgroundColor:n})]})})},Wi=()=>e.jsx(e.Fragment,{children:e.jsx(Hi,{})}),Ji=({showModalNot:s,closeModalNot:r})=>{var v;const t=Ve(),[n,i]=a.useState(""),[l,o]=a.useState(""),[c,p]=a.useState("1"),[b,m]=a.useState(""),[j,x]=a.useState(!1),h=()=>{const N=new Date,S=String(N.getDate()).padStart(2,"0"),k=String(N.getMonth()+1).padStart(2,"0"),w=N.getFullYear().toString().slice(-2);return`${S}/${k}/${w}`};a.useEffect(()=>{if(t.pathname==="/informe"){const N=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",N),()=>{window.removeEventListener("popstate",N)}}},[t,r]);const g=(()=>{const N=localStorage.getItem("user");return N?JSON.parse(N):null})();(v=g==null?void 0:g.email)!=null&&v.split("@")[0];const u=async N=>{if(N.preventDefault(),n.trim()===""){m("El informe no puede estar vac√≠o.");return}if(n.length>500){m("El mensaje no puede exceder los 500 caracteres.");return}if(c===""){m("Por favor, selecciona una car√°tula.");return}m(""),x(!0);try{await Ie(G(F,"db_informes"),{titulo:l,contenido:n,timestamp:Ae(),leido:!1,fecha:h(),caratula:c,usuario_posteo:g.email,perfil:"oficial",difusion:"privado"}),o(""),i(""),p("1"),r()}catch(S){console.error("Error al enviar notificaci√≥n: ",S),m("Error al enviar la notificaci√≥n. Int√©ntalo de nuevo.")}finally{x(!1)}},f=()=>{i(""),p("1"),m(""),r()};return e.jsx("div",{className:`modal bg-dark ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header text-center   text-dark",children:[e.jsxs("h3",{className:"modal-title text-center ",id:"modalTitle",children:["Crear Informe ",e.jsx("i",{className:"bi bi-code-slash ms-2 titilar ",style:{fontSize:"1.8rem"}})]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:f})]}),e.jsx("div",{className:"modal-body bg-light  ",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("form",{onSubmit:u,children:[e.jsx("div",{className:"mb-3 text-center  ",children:e.jsxs("div",{className:"form-floating ",children:[e.jsx("textarea",{className:"form-control shadow-sm ",placeholder:"Escribe el mensaje aqu√≠",id:"titulo",value:l,onChange:N=>o(N.target.value)}),e.jsx("label",{className:"text-dark",children:"Titulo del Informe "})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aqu√≠",id:"mensaje",value:n,onChange:N=>i(N.target.value),style:{minHeight:"150px"}}),e.jsx("label",{className:"text-dark",children:"Contenido"})]})}),b&&e.jsx("div",{className:"alert alert-danger mt-5",children:b}),j?e.jsx(se,{}):e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn bg-primary border-white border-3 text-white rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Informe ",e.jsx("i",{className:"bi bi-code-slash p-1  text-white"})]})})})]})})})]})})})};function Yi({notificaciones:s,setNotificaciones:r,order:t,setOrder:n}){const i=o=>{n(o.target.value),l(o.target.value)},l=(o,c)=>{let p=[...s];o==="asc"?p.sort((b,m)=>{var j,x;return((j=b.timestamp)==null?void 0:j.seconds)-((x=m.timestamp)==null?void 0:x.seconds)}):p.sort((b,m)=>{var j,x;return((j=m.timestamp)==null?void 0:j.seconds)-((x=b.timestamp)==null?void 0:x.seconds)}),r(p)};return e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-3 gap-2 text-white",children:[e.jsx("label",{className:"mx-4",children:"Orden"}),e.jsxs("select",{className:"form-select bg-light bg-opacity-25 text-dark text-center rounded-3 text-white",value:t,onChange:i,children:[e.jsx("option",{value:"desc",children:"M√°s recientes primero"}),e.jsx("option",{value:"asc",children:"M√°s antiguos primero"})]})]})}const Zi=()=>{const[s,r]=a.useState([]),[t,n]=a.useState(!0);return a.useEffect(()=>{const i=ye(G(F,"db_informes"),Le("timestamp","desc")),l=Me(i,o=>{const c=o.docs.map(p=>({id:p.id,...p.data()}));r(c),n(!1)},o=>{console.error("Error al obtener informes:",o),n(!1)});return()=>l()},[]),{informes:s,loadingDb:t}},Qi=({showModalLink:s,setShowModalLink:r,selectedNotifId:t,newLink:n,setNewLink:i})=>{const[l,o]=a.useState(!0),[c,p]=a.useState(""),b=()=>{r(!1),i(""),o(!0),p("")},m=async()=>{if(!n){o(!1),p("Por favor, ingresa un enlace.");return}if(!t){o(!1),p("Por favor, selecciona un enlace.");return}try{await K($(F,"db_informes",t),{enlace:Pe(n)}),i(""),o(!0),p(""),alert("Enlace agregado correctamente."),b()}catch(j){console.error("Error al agregar el enlace:",j.code,j.message),alert("Hubo un error al agregar el enlace: "+j.message)}};return s&&e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content text-white",children:[e.jsxs("div",{className:"modal-header bg-primary bg-opacity-75 ",children:[e.jsxs("h5",{className:"modal-title ",id:"modalLabel",children:["Agregar Enlace a la Notificaci√≥n ",e.jsx("i",{className:"bi bi-share-fill mx-1"})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white ",onClick:b,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"link",className:"form-label fw-semibold badge bg-primary ",children:"Ingrese el enlace"}),e.jsx("input",{type:"url",id:"link",className:`form-control text-center ${l?"":"is-invalid"}`,placeholder:"ejemplo.com",value:n,onChange:j=>i(j.target.value),"aria-describedby":"linkHelp"}),e.jsxs("div",{id:"linkHelp",className:"form-text text-center",children:["El enlace no incluyas  ",e.jsx("code",{children:" www. o  similares"})]}),!l&&e.jsx("div",{className:"invalid-feedback",children:c})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:b,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:m,children:"Guardar Enlace"})]})]})})})},Xi=({show:s,onClose:r,selectedNotifId:t})=>{const[n,i]=a.useState(null),[l,o]=a.useState(!1);a.useEffect(()=>{s&&(async()=>{if(t){o(!0);try{const b=$(F,"db_informes",t),m=await De(b);m.exists()&&i(m.data().chat||!1)}catch(b){console.error("Error al obtener el estado del chat:",b)}finally{o(!1)}}})()},[t,s]);const c=async()=>{if(t!=null){o(!0);try{await K($(F,"db_informes",t),{chat:!n}),i(!n),r()}catch(p){console.error("Error al actualizar el estado del chat:",p),alert("Ocurri√≥ un error al actualizar el chat.")}finally{o(!1)}}};return s?e.jsx(e.Fragment,{children:l?e.jsx(se,{}):e.jsx("div",{className:"modal d-block bg-dark bg-opacity-75 ",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered  ",children:e.jsxs("div",{className:"modal-content shadow  ",children:[e.jsxs("div",{className:"modal-header bg-light text-dark border-0 border",children:[e.jsxs("h5",{className:"modal-title ",children:[e.jsx("i",{className:"bi bi-chat-dots-fill me-2"})," Estado del Chat"]}),e.jsx("button",{type:"button",className:"btn-close  ",onClick:r})]}),e.jsxs("div",{className:"modal-body text-center  bg-light text-dark",children:[e.jsxs("p",{className:"fw-semibold m-0 ",children:["Estado actual: "," ",e.jsx("span",{className:n?"badge bg-teal mx-3":"badge bg-danger mx-3",children:n?"Activo ":"Inactivo "})]}),e.jsxs("p",{children:["¬øDese√°s ",n?"desactivar":"activar"," el chat para esta notificaci√≥n?"]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-between  bg-light text-dark  border-0 border",children:[e.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancelar"}),e.jsxs("button",{className:`btn ${n?"btn-secondaryMuiRed text-light":"btn-blue"}`,onClick:c,disabled:l,children:[n?"Desactivar Chat":"Activar Chat",e.jsx("i",{className:`ms-2 bi ${n?"bi-x-circle":"bi-check-circle"}`})]})]})]})})})}):null},Ki=({showModal:s,closeModal:r,selectedNotifId:t,setSelectedNotifId:n,selectedPersona:i,setSelectedPersona:l,personas:o})=>{const[c,p]=a.useState(""),[b,m]=a.useState(!1),j=()=>{r(!1),n(null),l("")},x=async()=>{if(t&&i){m(!0);try{const d=ye(G(F,"db_personas"),Oe("nombre_apellido","==",i)),g=await ne(d);if(g.empty)alert("No se encontr√≥ la persona seleccionada.");else{const u=g.docs[0];await Promise.all([K($(F,"db_informes",t),{asociada:Pe(i)}),K($(F,"db_personas",u.id),{asociada_notificacion_id:Pe(t)})]),alert(`La persona ${i} se asoci√≥ a la notificaci√≥n.`),r()}}catch(d){console.error("Error al asociar captura:",d),alert("Hubo un error al asociar la captura.")}finally{m(!1)}}else alert("Por favor, selecciona una persona para asociar.")},h=d=>{switch(d){case 1:return"Normal";case 2:return"Paradero üîé";case 3:return"Evasi√≥n üëÆüèª";case 4:return"Prioritaria ‚≠ê";default:return"No definida"}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:`modal fade bg-dark  ${s?"show":""}`,style:{display:s?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog text-white ",children:e.jsxs("div",{className:"modal-content ",children:[e.jsxs("div",{className:"modal-header bg-primary bg-opacity-75 ",children:[e.jsx("h5",{className:"modal-title ",id:"modalLabel",children:"Asociar Persona a la Notificaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:j,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body ",children:[e.jsx("label",{htmlFor:"persona",className:"form-label mt-3 fw-semibold fw-semibold badge bg-primary ",children:"Selecciona una persona:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control dropdown-toggle w-100 bg-light bg-opacity-50 ",placeholder:"Buscar por nombre o DNI",value:c,onChange:d=>p(d.target.value)}),e.jsx("button",{className:"btn btn-secondaryMuiRed text-white ms-2",onClick:()=>p(""),disabled:!c,children:e.jsx("i",{className:"bi bi-trash"})})]}),c&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-start fw-bold",children:"Resultados:"}),e.jsx("ul",{className:"list-group",style:{maxHeight:"150px",overflowY:"auto"},children:o.filter(d=>`${d.nombre_apellido} ${d.documento}`.toLowerCase().includes(c.toLowerCase())).map(d=>{var g;return e.jsxs("li",{className:"list-group-item d-flex align-items-center",onClick:()=>{l(d.nombre_apellido),p("")},style:{cursor:"pointer"},children:[e.jsx("img",{src:((g=d.base64)==null?void 0:g.trim())||$e,alt:d.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-0",children:[d.nombre_apellido," - ",d.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[d.prioridad]||"bg-warning text-dark"}`,children:h(d.prioridad)})]})]},d.id)})})]}),e.jsxs("div",{className:"dropdown ",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 bg-light bg-opacity-50 ",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",children:i||"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"300px",overflowY:"auto"},children:o.filter(d=>`${d.nombre_apellido} ${d.documento}`.toLowerCase().includes(c.toLowerCase())).map(d=>{var g;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center",onClick:()=>l(d.nombre_apellido),children:[e.jsx("img",{src:((g=d.base64)==null?void 0:g.trim())||$e,alt:d.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),d.nombre_apellido," - ",d.documento," -",e.jsx("span",{className:`badge rounded-pill border border-white border-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[d.prioridad]||"bg-warning text-dark"}`,children:h(d.prioridad)})]})},d.id)})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:x,disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Asociando..."]}):e.jsxs(e.Fragment,{children:["Asociar Captura ",e.jsx("i",{className:"bi bi-person-plus-fill mx-2"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:j,disabled:b,children:"Cerrar"})]})]})})})})},er=({showModalFotos:s,setShowModalFotos:r,selectedNotifId:t,newFoto:n,setNewFoto:i})=>{const[l,o]=a.useState(null),[c,p]=a.useState(!0),[b,m]=a.useState(""),[j,x]=a.useState(null),h=()=>{r(!1),o(null),x(null),p(!0),m(""),i(null)},d=async()=>{if(!n){p(!1),m("Debes seleccionar una imagen.");return}if(!t){p(!1),m("No se ha seleccionado una notificaci√≥n v√°lida.");return}try{await K($(F,"db_informes",t),{imagenes:Pe(n)}),i(n),alert("Imagen agregada correctamente."),h()}catch(u){console.error("Error al subir la imagen:",u.message),alert("Hubo un error al subir la imagen: "+u.message)}},g=u=>{const f=u.target.files[0];if(f){o(f);const v=new FileReader;v.onloadend=()=>{const N=new Image;N.onload=()=>{const S=document.createElement("canvas"),k=S.getContext("2d"),w=640,C=480;let y=N.width,_=N.height;y>_?y>w&&(_*=w/y,y=w):_>C&&(y*=C/_,_=C),S.width=y,S.height=_,k.drawImage(N,0,0,y,_);const M=S.toDataURL("image/jpeg",.8);i(M),x(M)},N.src=v.result},v.readAsDataURL(f)}else x(null),i(null)};return s&&e.jsx("div",{className:"modal fade show bg-dark",style:{display:"block"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!s,children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content  text-white",children:[e.jsxs("div",{className:"modal-header bg-primary bg-opacity-75",children:[e.jsxs("h5",{className:"modal-title",id:"modalLabel",children:["Agregar Imagen a la Notificaci√≥n ",e.jsx("i",{className:"bi bi-image mx-1"})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:h,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"fileInput",className:"form-label fw-semibold badge bg-primary",children:"Selecciona una imagen"}),e.jsx("input",{type:"file",id:"fileInput",className:`form-control ${c?"":"is-invalid"}`,accept:".jpg, .jpeg",onChange:g}),!c&&e.jsx("div",{className:"invalid-feedback",children:b})]}),j&&e.jsx("div",{className:"mb-3 text-center",children:e.jsx("img",{src:j,alt:"Vista previa",className:"img-fluid rounded shadow",style:{maxHeight:"300px",objectFit:"contain"}})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:h,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:d,children:"Guardar Imagen"})]})]})})})};function sr(){const[s,r]=a.useState([]),[t,n]=a.useState(!1),[i,l]=a.useState(!1),[o,c]=a.useState(!1),[p,b]=a.useState(null),[m,j]=a.useState(null),[x,h]=a.useState(null),[d,g]=a.useState(""),[u,f]=a.useState(""),[v,N]=a.useState([]),[S,k]=a.useState(!1),[w,C]=a.useState(null),[y,_]=a.useState(""),[M,E]=a.useState(""),[I,P]=a.useState("desc"),{informes:q,loadingDb:Z}=Zi(),[H,A]=a.useState([]),[V,J]=a.useState([]),[ee,z]=a.useState(!1),R=L=>{L!=null&&L.asociada_notificacion_id&&Array.isArray(L.asociada_notificacion_id)&&alert(`Esta persona est√° asociada a las siguientes notificaciones: ${L.asociada_notificacion_id.join(", ")}`)},Y=L=>{J(re=>re.includes(L)?re.filter(U=>U!==L):[...re,L])},le=L=>V.includes(L);a.useEffect(()=>{A(q)},[q]),a.useEffect(()=>{(async()=>{const re=ye(G(F,"db_personas"),Le("nombre_apellido","asc")),ce=(await ne(re)).docs.map(oe=>({id:oe.id,...oe.data()}));r(ce)})()},[]);const de=async(L,re)=>{try{if(!window.confirm("¬øDesea eliminar este enlace?"))return;const ce=$(F,"db_informes",re),oe=await De(ce);if(oe.exists()){const xe=oe.data();if(Array.isArray(xe.enlace)){const Se=xe.enlace.filter((Ge,Q)=>Q!==L);await K(ce,{enlace:Se}),alert("Enlace eliminado con exito ")}else alert("El campo 'enlace' no existe o no es un array.")}else alert("No se encontr√≥ el documento con el ID proporcionado.")}catch(U){alert.error("Error al eliminar el enlace:",U)}},he=async L=>{if(window.confirm("¬øEst√°s seguro de que deseas eliminar esta notificaci√≥n?")){k(!0);try{await Ne($(F,"db_informes",L)),A(U=>U.filter(ce=>ce.id!==L)),alert("Se elimin√≥ el informe")}catch(U){console.error("Error al eliminar el informe:",U),alert("Hubo un error al eliminar el informe.")}finally{k(!1)}}},ie=L=>{b(L),n(!0)},T=L=>{b(L),l(!0)},B=L=>{b(L),c(!0)},te=async(L,re,U)=>{if(window.confirm(`¬øEst√°s seguro de que deseas eliminar la imagen n√∫mero ${U+1}?`)){k(!0);try{const oe=$(F,"db_informes",L);await K(oe,{imagenes:Re(re)}),N(xe=>xe.filter(Se=>Se!==re)),alert(`Se elimin√≥ la imagen ${U+1} correctamente.`)}catch(oe){console.error("Error al eliminar la imagen:",oe),alert("Hubo un error al eliminar la imagen.")}finally{k(!1)}}else alert("La imagen no fue eliminada.")},ae=async(L,re,U)=>{if(window.confirm(`¬øEst√°s seguro de que deseas eliminar la asociaci√≥n de la persona ${U} con la notificaci√≥n?`)){k(!0);try{const oe=$(F,"db_informes",L);await K(oe,{asociada:Re(U)});const xe=$(F,"db_personas",re);await K(xe,{asociada_notificacion_id:Re(L)}),alert(`Se elimin√≥ la asociaci√≥n de la persona ${U} con la notificaci√≥n.`)}catch(oe){console.error("Error al eliminar la asociaci√≥n:",oe),alert("Hubo un error al eliminar la asociaci√≥n.")}finally{k(!1)}}else alert(`La asociaci√≥n de la persona ${U} no fue eliminada.`)},O=L=>{switch(L){case"1":return"Activo";case"2":return"Paradero üîé";case"3":return"Evasi√≥n üëÆüèª";case"4":return"Prioritaria ‚≠ê";default:return"No definida"}},D=L=>/^https?:\/\//.test(L)?L:`https://${L}`,W=async L=>{if(y.trim()){k(!0);try{const re=$(F,"db_notificaciones",L);await K(re,{contenido:y}),alert("Contenido actualizado correctamente"),j(null)}catch(re){console.error("Error al actualizar contenido:",re),alert("Hubo un error al actualizar el contenido.")}finally{k(!1)}}else alert("El contenido no puede estar vac√≠o")},X=async L=>{if(M.trim()){k(!0);try{const re=$(F,"db_informes",L);await K(re,{titulo:M}),alert("titulo actualizado correctamente"),h(null)}catch(re){console.error("Error al actualizar titulo:",re),alert("Hubo un error al actualizar el titulo.")}finally{k(!1)}}else alert("El titulo no puede estar vac√≠o")};return e.jsxs("div",{children:[e.jsx(Yi,{notificaciones:H,setNotificaciones:A,order:I,setOrder:P}),e.jsx("div",{className:"row g-3 justify-content-center align-items-center mt-1"}),e.jsx(e.Fragment,{children:Z?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"300px"},children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}),e.jsx("div",{className:"spinner-grow text-light spinner-grow-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})]})}):e.jsx("div",{className:"row justify-content-center  ",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"list-group",children:H.length===0?e.jsx("div",{className:"text-center p-4 text-center tex-light bg-light bg-opacity-25 rounded text-white",children:e.jsx("span",{className:"display-6",children:"No hay Informes üëéüèª"})}):H.map(L=>{var re,U,ce;return e.jsxs("div",{className:"list-group-item shadow mt-5 bg-light bg-opacity-75 rounded-4",children:[e.jsxs("div",{className:"d-flex align-items-center shadow-sm text-center bg-dark bg-opacity-50 p-3 rounded-4 text-light position-relative",children:[e.jsx("button",{className:"btn bg-purple bg-opacity-75 px-5 border-white border-3 text-white rounded-pill position-absolute top-0 start-50 shadow-sm translate-middle d-none d-md-block",children:e.jsxs("span",{children:["       ",new Date(((re=L.timestamp)==null?void 0:re.seconds)*1e3).toLocaleString()," "]})}),e.jsx("span",{className:`badge rounded-pill me-3 ${{1:"bg-teal titilar",2:"bg-primaryMuiBlue",3:"bg-danger"}[L.caratula]||"bg-warning text-dark"}`,children:O(L.caratula)}),((U=L.asociada)==null?void 0:U.length)>0&&e.jsx("span",{className:"text-light ms-2",title:"Personas asociadas",children:e.jsx("i",{className:"bi bi-person-check-fill"})}),((ce=L.enlace)==null?void 0:ce.length)>0&&e.jsx("span",{className:"text-light ms-2",title:"Enlaces adjuntos",children:e.jsx("i",{className:"bi bi-link-45deg"})}),L.chat&&e.jsx("span",{className:"text-light ms-2",title:"Chat activo",children:e.jsx("i",{className:"bi bi-chat-dots-fill"})}),Array.isArray(L.imagenes)&&L.imagenes.length>0&&e.jsxs("span",{className:"text-light ms-2",title:"Fotos adjuntas",children:[e.jsx("i",{className:"bi bi-image-fill"})," "]}),e.jsx("div",{className:"flex-grow-1"}),e.jsx("button",{className:"btn btn-outline-light btn-sm rounded-circle ms-2",onClick:()=>Y(L.id),children:e.jsx("i",{className:`bi ${le(L.id)?"bi-chevron-up":"bi-chevron-down"}`})})]}),!le(L.id)&&e.jsx("h6",{className:"text-center  fw-bold my-3",children:L.titulo}),le(L.id)&&e.jsxs("div",{className:"p-3",children:[e.jsx("h6",{className:"shadow-sm text-center bg-light bg-opacity-75 p-2 rounded-4 text-dark",children:"T√≠tulo"}),L.id===x?e.jsxs("div",{className:"text-center ",children:[e.jsx("input",{type:"text",value:M,onChange:oe=>E(oe.target.value),className:"form-control mt-3 text-center"}),e.jsx("button",{className:"btn btn-primary mt-4 ",onClick:()=>X(L.id),disabled:S,children:S?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1 "})]})})]}):e.jsx("div",{className:"mt-3 text-center fw-semibold",children:e.jsx("small",{className:"mb-2 text-muted ",children:L.titulo})}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${L.id===x?"btn-danger":"btn-primary"}`,onClick:()=>{L.id===x?h(null):(E(L.titulo),h(L.id))},children:e.jsx("i",{className:`bi ${L.id===x?"bi-x-circle":"bi-pencil"}`})})}),e.jsx("h6",{className:"shadow-sm text-center bg-dark bg-opacity-50 p-2 rounded-4 text-light my-3",children:"Contenido"}),L.id===m?e.jsxs("div",{className:"text-center",children:[e.jsx("textarea",{value:y,onChange:oe=>_(oe.target.value),className:"form-control",rows:"5"}),e.jsx("button",{className:"btn btn-primary mt-4",onClick:()=>W(L.id),disabled:S,children:S?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("div",{className:"mt-3 text-center fw-semibold",children:e.jsx("small",{className:"mb-2 text-muted ",children:L.contenido})}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${L.id===m?"btn-danger":"btn-primary"}`,onClick:()=>{L.id===m?j(null):(_(L.contenido),j(L.id))},children:e.jsx("i",{className:`bi ${L.id===m?"bi-x-circle":"bi-pencil"}`})})}),L.enlace&&L.enlace.length>0?e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-center bg-light bg-opacity-50 fw-semibold shadow-sm  py-1 rounded my-3 ",children:"Enlaces Asociados"}),e.jsx("ul",{className:"list-unstyled",children:L.enlace.map((oe,xe)=>e.jsxs("li",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow",children:[e.jsxs("span",{className:"badge bg-primary text-white d-flex align-items-center gap-2 px-2 py-2 ",style:{maxWidth:"250px"},children:[e.jsx("i",{className:"bi bi-browser-chrome"}),e.jsx("a",{href:D(oe),target:"_blank",rel:"noopener noreferrer",className:"text-white text-decoration-none text-truncate mx-2",style:{maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:oe})]}),e.jsx("button",{className:"btn btn-redUi1 btn-sm rounded-circle ms-2",onClick:()=>de(xe,L.id),children:e.jsx("i",{className:"bi bi-x-circle text-white"})})]},xe))})]}):e.jsx("span",{className:"bg-dark bg-opacity-25 p-3 rounded-3 text-light text-center d-block my-2",children:"No hay enlaces asociados"}),L.asociada&&L.asociada.length>0?e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-center bg-light bg-opacity-50 fw-semibold shadow-sm py-1 rounded mt-3",children:"Personas Asociadas"}),L.asociada.map((oe,xe)=>{var Ge,Q;const Se=s.find(me=>me.nombre_apellido===oe);return Se?e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow ",children:[e.jsx("img",{src:((Ge=Se.base64)==null?void 0:Ge.trim())||$e,alt:Se.nombre_apellido||"Imagen no disponible",onClick:()=>{var me;return C((me=Se.base64)==null?void 0:me.trim())},className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[xe+1,". ",oe]}),((Q=Se.asociada_notificacion_id)==null?void 0:Q.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>R(Se),children:["Asociado ",Se.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>ae(L.id,Se.id,oe),children:e.jsx("i",{className:"bi bi-trash"})})]},xe):null})]}):e.jsx("span",{className:"bg-dark bg-opacity-25 p-3 rounded-3 text-light text-center d-block",children:"No hay personas asociadas"}),L.imagenes&&L.imagenes.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"text-center bg-light bg-opacity-50 fw-semibold shadow-sm py-1 rounded",children:"Im√°genes Asociadas"}),e.jsx("div",{className:"row mt-3",children:L.imagenes.map((oe,xe)=>e.jsxs("div",{className:"col-6 col-md-4 mb-3 position-relative",children:[e.jsx("button",{className:"btn btn-sm bg-dark bg-opacity-50 text-white position-absolute top-0 end-0 m-1 rounded-circle",style:{zIndex:2},onClick:()=>te(L.id,oe,xe),title:"Eliminar imagen",children:"√ó"}),e.jsx("img",{src:oe,alt:`Imagen ${xe+1}`,className:"img-fluid rounded shadow-sm w-100",style:{height:"200px",objectFit:"cover",cursor:"pointer"},onClick:()=>C(oe)})]},xe))})]}):e.jsx("span",{className:"bg-dark bg-opacity-25 p-3 rounded-3 text-light text-center d-block mt-4",children:"No hay im√°genes asociadas"}),w&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{backgroundColor:"rgba(0,0,0,0.85)",zIndex:1050,cursor:"zoom-out"},onClick:()=>C(null),onKeyDown:oe=>{oe.key==="Escape"&&C(null)},tabIndex:0,children:e.jsx("img",{src:w,alt:"Vista completa",className:"img-fluid rounded shadow",style:{maxHeight:"95%",maxWidth:"95%",cursor:"default"},onClick:oe=>oe.stopPropagation()})})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 p-3",children:[e.jsx("button",{className:"btn btn-cyan text-white btn-sm rounded-circle",onClick:()=>ie(L.id),title:"Asociar personas",children:e.jsx("i",{className:"bi bi-person-fill-add"})}),e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle",onClick:()=>T(L.id),title:"Agregar enlace",children:e.jsx("i",{className:"bi bi-link-45deg"})}),e.jsx("button",{className:"btn btn-orangeUi text-white btn-sm rounded-circle",onClick:()=>{b(L.id),z(!0)},title:"Activar chat",children:e.jsx("i",{className:"bi bi-chat-dots-fill"})}),e.jsx("button",{className:"btn btn-purple text-white btn-sm rounded-circle",onClick:()=>B(L.id),title:"Subir Fotos",children:e.jsx("i",{className:"bi bi-image"})}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:()=>he(L.id),disabled:S,title:"Eliminar notificaci√≥n",children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]},L.id)})})})})}),e.jsx(Qi,{showModalLink:i,setShowModalLink:l,selectedNotifId:p,newLink:u,setNewLink:f,setNotificaciones:A}),e.jsx(er,{showModalFotos:o,setShowModalFotos:c,selectedNotifId:p,newFoto:v,setNewFoto:N,setNotificaciones:A}),e.jsx(Xi,{show:ee,onClose:()=>z(!1),selectedNotifId:p}),e.jsx(Ki,{showModal:t,closeModal:n,selectedNotifId:p,setSelectedNotifId:b,selectedPersona:d,setSelectedPersona:g,personas:s})]})}const ar=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState(0),[i,l]=a.useState(0),o=()=>r(!0),c=()=>r(!1);return a.useEffect(()=>{(async()=>{const m=(await ne(G(F,"db_informes"))).size;n(m);const x=(await ne(G(F,"db_personas"))).size;l(x)})()},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsxs("div",{className:"col-12 col-md-6  text-white ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4 text-center text-capitalize",children:[e.jsx("h1",{className:"fw-bold display-6 ",children:"Crear nueva Noticia "}),e.jsx("p",{className:"lead text-white text-center mt-4",children:"¬øQuer√©s registrar una nueva Noticia ? Comenz√° completando los datos necesarios para dar inicio al proceso."}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{className:"btn btn-light fw-semibold px-4",onClick:o,children:"Nueva Noticia"})})]}),e.jsxs("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsx("p",{className:"fs-5 mt-3 text-center",children:"Tu herramienta √°gil para controlar, organizar y comunicar informaci√≥n de forma simple y eficiente."}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsxs("p",{className:"text-light mb-1",children:["Total de Noticias registrados: ",e.jsx("strong",{children:t})]}),e.jsxs("p",{className:"text-light",children:["Total personas registradas : ",e.jsx("strong",{children:i})]})]})]}),e.jsx("div",{className:"mt-3 small d-flex flex-column align-items-end",children:e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})})]}),e.jsx("div",{className:" col-12 col-md-6  ",children:e.jsx(sr,{})})]})}),e.jsx(Ji,{showModalNot:s,closeModalNot:c})]})},tr=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Crear Noticias"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:"Crear Administar Noticias ",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(ar,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},ir=()=>e.jsx(e.Fragment,{children:e.jsx(tr,{})}),rr=({informeId:s})=>{const[r,t]=a.useState(null),[n,i]=a.useState(!1),[l,o]=a.useState(0);a.useEffect(()=>{const b=localStorage.getItem("user");if(b){const m=JSON.parse(b);t(m.email),c(m.email)}},[s]);const c=async b=>{var x,h;const m=$(F,"db_informes",s),j=await De(m);if(j.exists()){const d=j.data();o(((x=d.me_sirve)==null?void 0:x.length)||0),i((h=d.me_sirve)==null?void 0:h.includes(b))}},p=async()=>{if(!r)return;const b=$(F,"db_informes",s);await K(b,{me_sirve:n?Re(r):Pe(r)}),i(!n),o(m=>n?m-1:m+1)};return e.jsxs("div",{onClick:p,style:{cursor:"pointer"},className:`d-flex align-items-center gap-1 ${n?"text-muted fw-bold":"text-muted"}`,children:[e.jsx("i",{className:`bi ${n?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"} mx-1`}),"Me sirve"]})},lr=["üòÄ","üëç","‚ù§Ô∏è","üéâ","üòÑ","üòÅ","üòÜ","üòÖ","üòÇ","ü§£","üòä","üòá","üôÇ","üôÉ","üòâ","üòå","üòç","ü•∞","üòò","üòó","üòô","üòö","üòã","üòú","ü§™","üòù","ü§ë","ü§ó","ü§≠","ü§´","ü§î","ü§ê","ü§®","üòê","üòë","üò∂","üôÑ","üòè","üò£","üò•","üòÆ","üòØ","üò™","üò´","ü•±","üò¥","üòõ","ü§ì","üòé","ü§©","ü•≥","üòï","üòü","üôÅ","‚òπÔ∏è","üòÆ‚Äçüí®","üò§","üò¢","üò≠","üò¶","üòß","üò®","üò©","ü§Ø","üò¨","üò∞","üò±","ü•µ","ü•∂","üò≥","üòµ","üò°","üò†","ü§¨","üò∑","ü§í","ü§ï","ü§¢"],nr=({show:s,onClose:r,informeId:t,count:n,onUpdateCount:i})=>{const[l,o]=a.useState(""),[c,p]=a.useState(!1),b=a.useRef(null),[m,j]=a.useState(null);a.useEffect(()=>{const g=localStorage.getItem("user");if(g){const u=JSON.parse(g);j(u.email)}},[t]);const x=()=>{p(!1),r()},h=async()=>{if(!m)return;if(l.trim()===""){alert("No se puede enviar un comentario vac√≠o");return}const g=$(F,"db_informes",t),u=await De(g);if(u.exists()){const v=u.data().comentarios||[],N={texto:l.trim(),autor:m,timestamp:new Date};await K(g,{comentarios:[...v,N]}),i&&typeof n=="number"&&i(n+1),alert("Comentario enviado"),o(""),p(!1),r()}},d=g=>{const u=b.current;if(!u)return;const f=u.selectionStart,v=u.selectionEnd,N=l.slice(0,f)+g+l.slice(v);o(N),setTimeout(()=>{u.selectionStart=u.selectionEnd=f+g.length,u.focus()},0)};return s?e.jsx("div",{className:"modal d-block",tabIndex:"-1",role:"dialog","aria-modal":"true",onClick:x,style:{backgroundColor:"rgba(0,0,0,0.9)"},children:e.jsx("div",{className:"modal-dialog text-dark",onClick:g=>g.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Comentar"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("textarea",{ref:b,className:"form-control",rows:4,placeholder:"Escribe tu comentario...",value:l,onChange:g=>o(g.target.value)}),e.jsx("button",{type:"button",className:"btn btn-light mt-2",onClick:()=>p(g=>!g),children:c?"Ocultar emojis":"Mostrar emojis"}),c&&e.jsx("div",{className:"mt-2",style:{maxHeight:"150px",overflowY:"auto",border:"1px solid #ddd",padding:"8px",borderRadius:"4px"},children:lr.map(g=>e.jsx("button",{type:"button",className:"btn btn-light me-1 mb-1",onClick:()=>d(g),style:{fontSize:"1.4rem",lineHeight:"1"},children:g},g))})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:h,disabled:!l.trim(),children:"Enviar"})]})]})})}):null},or=({comentarios:s=[],usuarioActual:r})=>{const[t,n]=a.useState(!1);return!s||s.length===0?e.jsx("div",{className:"mt-3 text-end",children:e.jsx("button",{className:"btn btn-sm btn-link p-0 text-decoration-none",disabled:!0,children:"Sin comentarios"})}):e.jsxs("div",{className:"my-3 text-end",children:[e.jsx("button",{className:"btn btn-sm btn-link p-0 text-decoration-none",onClick:()=>n(!t),children:t?"Ocultar comentarios":"Ver comentarios "}),t&&e.jsx("div",{className:"d-flex flex-column gap-2 mt-2",children:s.map((i,l)=>{var o,c;return e.jsxs("div",{className:"border rounded p-2 bg-light",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{className:"text-dark small text-capitalize",children:((o=i.autor)==null?void 0:o.split("@")[0])||"An√≥nimo"}),e.jsx("span",{className:"text-muted small r",children:new Date(((c=i.timestamp)==null?void 0:c.seconds)*1e3).toLocaleString()})]}),e.jsx("div",{className:"text-dark small mt-1 d-flex justify-content-between",children:i.texto}),i.autor===r&&e.jsx("div",{className:"text-end mt-1",children:e.jsx("span",{className:"badge bg-secondary small",children:"Tu comentario"})})]},l)})})]})},cr=({imagenes:s=[],onExpand:r})=>!s||s.length===0?null:s.length===1?e.jsx("div",{className:"text-center mb-3",children:e.jsx("img",{src:s[0],alt:"Imagen",className:"img-fluid rounded shadow-sm",style:{width:"50%",maxWidth:"500px",height:"300px",objectFit:"cover",cursor:"pointer"},onClick:()=>r(s[0])})}):e.jsxs("div",{id:"carouselPublicacion",className:"carousel slide mb-3","data-bs-ride":"carousel",children:[e.jsx("div",{className:"carousel-inner",style:{maxHeight:"300px"},children:s.map((t,n)=>e.jsx("div",{className:`carousel-item ${n===0?"active":""}`,style:{cursor:"pointer"},onClick:()=>r(t),children:e.jsx("img",{src:t,className:"d-block w-100 rounded",alt:`Imagen ${n+1}`,style:{height:"300px",objectFit:"cover",width:"100%",maxWidth:"500px",margin:"0 auto"}})},n))}),e.jsxs("button",{className:"carousel-control-prev ",type:"button","data-bs-target":"#carouselPublicacion","data-bs-slide":"prev",children:[e.jsx("span",{className:"carousel-control-prev-icon bg-dark rounded-circle bg-opacity-75","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden  ",children:"Anterior"})]}),e.jsxs("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselPublicacion","data-bs-slide":"next",children:[e.jsx("span",{className:"carousel-control-next-icon bg-dark rounded-circle bg-opacity-75","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Siguiente"})]})]}),dr=({perfilSeleccionado:s,onFiltrar:r})=>e.jsxs("div",{className:"mb-4  bg-light bg-opacity-25 p-4 rounded text-white",children:[e.jsx("label",{className:"form-label fw-bold",children:"Filtrar tipo de Informaci√≥n :"}),e.jsxs("select",{className:"form-select",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"personal",children:"üëÆ‚Äç‚ôÄÔ∏è Informaci√≥n del Personal"}),e.jsx("option",{value:"oficial",children:"üì¢ Informaci√≥n Oficial"})]})]}),mr=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState(null),[o,c]=a.useState(!1),[p,b]=a.useState(null),[m,j]=a.useState(""),[x,h]=a.useState(0),[d,g]=a.useState(""),u=S=>{b(S),c(!0)},f=s.filter(S=>{var k;return d===""?!0:((k=S.perfil)==null?void 0:k.toLowerCase())===d});a.useEffect(()=>{const S=localStorage.getItem("user");if(S){const k=JSON.parse(S);j(k.email)}},[]),a.useEffect(()=>{(async()=>{try{const w=(await ne(G(F,"db_informes"))).docs.map(C=>{const y=C.data();return{id:C.id,...y,comentarios:y.comentarios||[]}}).sort((C,y)=>{var E,I;const _=((E=C.timestamp)==null?void 0:E.seconds)||0;return(((I=y.timestamp)==null?void 0:I.seconds)||0)-_});r(w)}catch(k){console.error("Error al obtener los informes:",k)}})()},[]);const v=(S=[])=>S.filter(k=>k.autor===m).length,N=S=>{h(S)};return a.useEffect(()=>{(async()=>{const w=(await ne(G(F,"db_personas"))).docs.map(C=>C.data());n(w)})()},[]),a.useEffect(()=>{if(i){window.history.pushState({modalOpen:!0},"");const S=k=>{l(null)};return window.addEventListener("popstate",S),()=>{window.removeEventListener("popstate",S)}}},[i]),e.jsxs("div",{className:"container py-4",children:[e.jsx(dr,{perfilSeleccionado:d,onFiltrar:g}),f.map(S=>{var k,w,C,y,_,M,E,I;return e.jsxs("div",{className:"bg-white rounded-3 shadow p-3 mb-4 mx-auto",style:{maxWidth:"600px"},children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3 shadow-sm",style:{width:"40px",height:"40px",fontWeight:"bold",fontSize:"1rem",textTransform:"uppercase"},children:((k=S.usuario_posteo)==null?void 0:k.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold small text-dark text-capitalize",children:((w=S.usuario_posteo)==null?void 0:w.split("@")[0])||"Usuario"}),e.jsxs("div",{className:"text-muted text-capitalize",style:{fontSize:"0.75rem"},children:[new Date(((C=S.timestamp)==null?void 0:C.seconds)*1e3).toLocaleString()," ¬∑"," ",((y=S.difusion)==null?void 0:y.trim().toLowerCase())==="publico"?"üåç P√∫blico ":((_=S.difusion)==null?void 0:_.trim().toLowerCase())==="privado"?"üîí Privado ":S.difusion?"üîí "+S.difusion:"üåç P√∫blico ",S.perfil==="oficial"?"üì¢ Contenido oficial":"üëÆ‚Äç‚ôÄÔ∏è Personal Policial"]})]})]}),e.jsx("div",{className:"mb-2 text-dark",children:e.jsx("strong",{children:S.titulo})}),e.jsx("div",{className:"mb-2 text-dark ",children:S.contenido}),e.jsx("div",{className:"container ",children:e.jsx("div",{className:"row",children:e.jsx(cr,{imagenes:S.imagenes,onExpand:l})})}),Array.isArray(S.enlace)&&S.enlace.length>0&&e.jsx("div",{className:"mb-2 text-secondary border border-1 bg-opacity-25 rounded  p-2  ",children:e.jsxs("small",{children:["Enlaces Compartidos:",e.jsx("ul",{className:"mb-0 ps-3 ",children:S.enlace.filter(P=>typeof P=="string"&&P.trim()!=="").map((P,q)=>{const Z=P.startsWith("http://")||P.startsWith("https://")?P:`https://${P}`;return e.jsx("li",{children:e.jsx("a",{href:Z,target:"_blank",rel:"noopener noreferrer",children:P})},q)})})]})}),Array.isArray(S.asociada)&&S.asociada.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("small",{className:"text-dark d-block mb-1",children:"Personas asociadas:"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 ",children:S.asociada.map((P,q)=>{const Z=t.find(H=>{var A;return((A=H.nombre_apellido)==null?void 0:A.toLowerCase())===P.toLowerCase()});return Z?e.jsxs("div",{className:"d-flex align-items-center gap-2 border rounded px-2 py-1",children:[e.jsx("div",{onClick:()=>l(Z.base64),className:"rounded-circle",style:{width:"32px",height:"32px",backgroundImage:`url(${Z.base64})`,backgroundSize:"cover",backgroundPosition:"center"}}),e.jsx("span",{className:"small text-dark ",children:Z.nombre_apellido})]},q):null})})]}),e.jsx(or,{comentarios:S.comentarios,usuarioActual:m}),e.jsxs("div",{className:"d-flex justify-content-between text-muted small mb-2",children:[e.jsx("div",{children:((M=S.me_sirve)==null?void 0:M.length)>0&&e.jsxs("div",{children:["üëç ",S.me_sirve.length]})}),e.jsxs("div",{children:[((E=S.comentarios)==null?void 0:E.length)||0," comentario",((I=S.comentarios)==null?void 0:I.length)===1?"":"s"," ¬∑ 0 compartidos"]})]}),e.jsxs("div",{className:"d-flex justify-content-around border-top border-bottom py-2 text-muted",children:[e.jsx(rr,{informeId:S.id}),e.jsxs("div",{className:`d-flex align-items-center gap-1 ${S.chat?"":"text-muted"}`,style:{pointerEvents:S.chat?"auto":"none",opacity:S.chat?1:.6,cursor:S.chat?"pointer":"default"},onClick:()=>S.chat&&u(S.id),children:[e.jsx("i",{className:"bi bi-chat-dots mx-1"}),"Comentar ",v(S.comentarios)>0?`(${v(S.comentarios)})`:""]}),e.jsxs("div",{className:"d-flex align-items-center gap-1 text-muted",style:{pointerEvents:"none",opacity:.6},children:[e.jsx("i",{className:"bi bi-share mx-1"}),"Compartir"]})]})]},S.id)}),i&&e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{backgroundColor:"rgba(0,0,0,0.85)",zIndex:1050,cursor:"zoom-out"},onClick:()=>l(null),onKeyDown:S=>{S.key==="Escape"&&l(null)},tabIndex:0,children:e.jsx("img",{src:i,alt:"Vista completa",className:"img-fluid rounded shadow",style:{maxHeight:"95%",maxWidth:"95%",cursor:"default"},onClick:S=>S.stopPropagation()})}),e.jsx(nr,{show:o,onClose:c,informeId:p,count:x,onUpdateCount:N})]})},ur=()=>{var j,x;const[s,r]=a.useState(null),t=((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"Usuario Sin Registro",[n,i]=a.useState(!1),[l,o]=a.useState(""),[c,p]=a.useState(!1);a.useEffect(()=>{const h=localStorage.getItem("user");if(h){const d=JSON.parse(h);r(d)}},[]);const b=async()=>{if(!l.trim())return alert("El contenido no puede estar vac√≠o");try{i(!0),await Ie(G(F,"db_informes"),{email:(s==null?void 0:s.email)||"invitado",usuario_posteo:(s==null?void 0:s.email)||"invitado",contenido:l,timestamp:Ae(),chat:!0,perfil:"personal",difusion:"publico"}),o(""),alert("Publicaci√≥n fue creada correctamente")}catch(h){console.error("Error al publicar:",h),alert("Error al publicar. Intenta nuevamente.")}finally{i(!1)}},m=h=>{o(d=>d+h),p(!1)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:" rounded-4 my-4 d-flex justify-content-center",children:e.jsxs("div",{className:"bg-light  rounded shadow p-3 w-100",style:{maxWidth:"500px"},children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("div",{className:"rounded-circle bg-purple me-2 d-flex justify-content-center align-items-center text-white",style:{width:"40px",height:"40px",fontSize:"14px"},children:((x=s==null?void 0:s.email)==null?void 0:x.charAt(0).toUpperCase())||"?"}),e.jsx("div",{className:"fw-bold small text-dark",children:t||"Invitado"})]}),e.jsx("textarea",{className:"form-control border-0 text-center ",rows:"2",value:l,onChange:h=>o(h.target.value),placeholder:`¬ø Qu√© quieres informar, ${t||"invitado"} ?`}),e.jsx("hr",{className:"my-3 bg-dark"}),e.jsxs("div",{className:"d-flex justify-content-between flex-wrap text-secondary small",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 px-2 py-1 rounded disabled",style:{cursor:"not-allowed",opacity:.5},children:[e.jsx("img",{src:"ico/camera.png",alt:"Foto/Video",width:"18",height:"18"}),"Foto/Video"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 px-2 py-1 rounded",role:"button",onClick:()=>p(!c),children:[e.jsx("img",{src:"ico/happy--v1.png",alt:"Sentimiento",width:"18",height:"18"}),"Sentimiento"]}),e.jsxs("div",{className:"d-flex align-items-center gap-2 px-2 py-1 rounded disabled",style:{cursor:"not-allowed",opacity:.5},children:[e.jsx("img",{src:"ico/location.png",alt:"Ubicaci√≥n",width:"18",height:"18"}),"Ubicaci√≥n"]})]}),c&&e.jsx("div",{className:"d-flex justify-content-center mt-2",children:e.jsxs("div",{className:"border rounded p-3 bg-light mt-3 text-center text-dark",style:{maxWidth:"500px",margin:"0 auto"},children:[e.jsx("h6",{className:"mb-3",children:"Selecciona un emoji"}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:" M√°s populares"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["üòÇ","‚ù§Ô∏è","üòç","üò≠","üòä","üî•","üòÖ","üëç","ü•∞","ü§î"].map(h=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>m(h),children:h},h))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:" Entidad "}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["üïµÔ∏è‚Äç‚ôÇÔ∏è","üëÆ","üëÆ‚Äç‚ôÄÔ∏è","üë®‚Äç‚öñÔ∏è","üë®‚Äç‚öïÔ∏è","üë®‚Äçüöí","üöí","üöë","üöì","üèçÔ∏è"].map(h=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>m(h),children:h},h))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"üòÄ Emociones"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["üòÄ","üòÇ","üòÖ","üòä","üòç","ü•∞","üò≠","üò°","ü§Ø","ü§î"].map(h=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>m(h),children:h},h))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"‚ù§Ô∏è Sentimientos"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["‚ù§Ô∏è","üíî","üíï","üíñ","üíØ","üëè","üôè","ü§ù","üôå","üí™"].map(h=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>m(h),children:h},h))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"ü•≥ Celebraci√≥n"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["üéâ","ü•≥","üéÇ","üéÅ","üç∞","üçª","ü§©","üòé","üíÉ","üï∫"].map(h=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>m(h),children:h},h))})]}),e.jsxs("div",{className:"mb-2 text-start",children:[e.jsx("strong",{children:"‚ú® √ötiles"}),e.jsx("div",{className:"d-flex flex-wrap gap-2 mt-1",children:["‚ö†Ô∏è","‚úÖ","‚ùå","üîî","üì¢","üì∑","üìç","üìå","üìù","üìé"].map(h=>e.jsx("span",{style:{fontSize:"20px",cursor:"pointer"},onClick:()=>m(h),children:h},h))})]})]})}),e.jsx("button",{className:"btn btn-primary w-100 mt-3 fw-bold",onClick:b,disabled:n,children:n?"Publicando...":"Publicar"})]})})})},hr=()=>{const[s,r]=a.useState([]),[t,n]=a.useState(!0);return a.useEffect(()=>{(async()=>{try{const l=ye(G(F,"db_informes"),Le("timestamp","desc"),Ia(3)),c=(await ne(l)).docs.map(p=>({id:p.id,...p.data()}));r(c)}catch(l){console.error("Error al obtener los informes:",l)}finally{n(!1)}})()},[]),t?e.jsx("div",{className:"d-flex justify-content-center align-items-center my-5",role:"status","aria-live":"polite",children:[...Array(3)].map((i,l)=>e.jsx("div",{className:"spinner-grow text-light mx-2",role:"status",style:{width:"2rem",height:"2rem"},"aria-label":"Cargando veh√≠culos",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})},l))}):s.length===0?e.jsx("div",{className:"alert alert-info my-4 text-center",role:"alert",children:"No hay informes cargados a√∫n."}):e.jsxs("div",{className:"container my-5",style:{maxWidth:"700px"},children:[e.jsx("h5",{className:"mb-3 text-center",children:"√öltimas Publicaciones üî•"}),e.jsx("div",{className:"row g-3",children:s.map(i=>{var l;return e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card shadow-sm shadowh-100",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title text-truncate text-capitalize",title:i.titulo,children:i.perfil==="oficial"?"üì¢ Contenido Oficial ":"üëÆ‚Äç‚ôÄÔ∏è Personal Policial "}),e.jsx("p",{className:"card-text text-truncate",title:i.contenido,children:i.contenido||"Sin descripci√≥n"})]}),e.jsxs("div",{className:"card-footer text-muted d-flex justify-content-between align-items-center small",children:[e.jsx("div",{children:i.usuario_posteo?i.usuario_posteo.split("@")[0]:"Usuario desconocido"}),e.jsx("div",{children:(l=i.timestamp)!=null&&l.seconds?new Date(i.timestamp.seconds*1e3).toLocaleString():"Fecha no disponible"})]})]})},i.id)})})]})},xr=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsxs("div",{className:"col-12 col-md-6   text-white ",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg my-4 text-center text-capitalize",children:[e.jsx("h1",{className:"fw-bold display-6 ",children:"Bienvenido "}),e.jsx("p",{className:"mb-1",children:"Ac√° vas a recibir notificaciones importantes, publicaciones recientes y actualizaciones en tiempo real."})]}),e.jsx(ur,{}),e.jsx(hr,{}),e.jsx("div",{className:"mt-3 small d-flex flex-column align-items-end",children:e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})})]}),e.jsx("div",{className:" col-12 col-md-6  ",children:e.jsx(mr,{})})]})})}),br=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Noticias - Cx2 "})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:" Informes + Noticias ",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(xr,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},pr=()=>e.jsx(e.Fragment,{children:e.jsx(br,{})}),gr=({onCiudadChange:s,onComisariaChange:r,clearSignal:t})=>{const[n,i]=a.useState(null),[l,o]=a.useState(null),c=[{ciudad:"Santa Fe",unidad:"UR I"},{ciudad:"Rosario",unidad:"UR II"},{ciudad:"Rafaela",unidad:"UR V"},{ciudad:"Venado Tuerto",unidad:"UR VIII"},{ciudad:"Reconquista",unidad:"UR IX"},{ciudad:"Villa Gobernador G√°lvez",unidad:"UR II"},{ciudad:"San Lorenzo",unidad:"UR XVII"},{ciudad:"Esperanza",unidad:"UR XI"},{ciudad:"Casilda",unidad:"UR IV"},{ciudad:"Ca√±ada de G√≥mez",unidad:"UR X"},{ciudad:"Sunchales",unidad:"UR V"},{ciudad:"Firmat",unidad:"UR VIII"},{ciudad:"Arroyo Seco",unidad:"UR II"},{ciudad:"Tostado",unidad:"UR XII"},{ciudad:"San Jorge",unidad:"UR XVIII"},{ciudad:"G√°lvez",unidad:"UR XV"},{ciudad:"Coronda",unidad:"UR XV"},{ciudad:"Avellaneda",unidad:"UR IX"},{ciudad:"El Tr√©bol",unidad:"UR XVIII"},{ciudad:"Las Parejas",unidad:"UR X"},{ciudad:"Funes",unidad:"UR II"},{ciudad:"Puerto General San Mart√≠n",unidad:"UR XVII"},{ciudad:"Ceres",unidad:"UR XIII"},{ciudad:"San Justo",unidad:"UR XVI"},{ciudad:"Laguna Paiva",unidad:"UR I"},{ciudad:"Granadero Baigorria",unidad:"UR II"},{ciudad:"Villa Ocampo",unidad:"UR IX"},{ciudad:"Helvecia",unidad:"UR I"},{ciudad:"San Crist√≥bal",unidad:"UR XIII"},{ciudad:"Carcara√±√°",unidad:"UR IV"},{ciudad:"Teodelina",unidad:"UR VIII"},{ciudad:"Humboldt",unidad:"UR XI"}],p={"Santa Fe":["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barranquitas","Comisar√≠a 3ra. - Secci√≥n Rivadavia","Comisar√≠a 4ta. - Secci√≥n Las Flores","Comisar√≠a 5ta. - Secci√≥n El Pozo","Comisar√≠a 6ta. - Secci√≥n Fomento 9 de Julio"],Rosario:["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Puerto Norte","Comisar√≠a 3ra. - Secci√≥n Tucum√°n","Comisar√≠a 4ta. - Secci√≥n Echesortu","Comisar√≠a 5ta. - Secci√≥n Pichincha","Comisar√≠a 6ta. - Secci√≥n Zona Sur","Comisar√≠a 7ma. - Secci√≥n La Florida","Comisar√≠a 8va. - Secci√≥n Zona Oeste"],Rafaela:["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Belgrano","Comisar√≠a 3ra. - Secci√≥n 9 de Julio","Comisar√≠a 4ta. - Secci√≥n Barrio 2 de Abril","Comisar√≠a 5ta. - Secci√≥n Barrio La Ca√±ada"],"Venado Tuerto":["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio Santa Fe","Comisar√≠a 3ra. - Secci√≥n Malabrigo"],"San Lorenzo":["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Zona Norte","Comisar√≠a 3ra. - Secci√≥n Villa Felisa"],Firmat:["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio Las Delicias"],Casilda:["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio San Pedro","Comisar√≠a 3ra. - Secci√≥n Barrio Granaderos"],"Ca√±ada de G√≥mez":["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio Sarmiento"],Reconquista:["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio La Cortada","Comisar√≠a 3ra. - Secci√≥n Barrio El Omb√∫"],Ceres:["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio San Jos√©"],"San Justo":["Comisar√≠a 1ra. - Secci√≥n Centro","Comisar√≠a 2da. - Secci√≥n Barrio El Para√≠so","Comisar√≠a 3ra. - Secci√≥n Barrio San Carlos"],Alcorta:["Comisar√≠a 1ra. - Secci√≥n Centro"],Totoras:["Comisar√≠a 1ra. - Secci√≥n Centro"],"Las Parejas":["Comisar√≠a 1ra. - Secci√≥n Centro"]},b=j=>{const x=c.find(h=>h.ciudad===j.target.value);i(x),s(x)},m=j=>{const x=j.target.value;o(x),r(x)};return a.useEffect(()=>{i(""),o(null),s(null),r(null)},[t]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"row ",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"¬øCu√°l es la Localidad?"}),e.jsxs("select",{className:"form-select text-center",onChange:b,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Elige una ciudad..."}),c.map(j=>e.jsx("option",{value:j.ciudad,children:j.ciudad},j.ciudad))]})]})}),e.jsx("div",{className:"col-6",children:n&&e.jsx("div",{className:"mb-3",children:p[n.ciudad]?e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Comisar√≠as disponibles:"}),e.jsxs("select",{className:"form-select text-center",value:l||"_none_",onChange:m,children:[e.jsx("option",{value:"_none_",disabled:!0,children:"Selecciona una comisar√≠a..."}),p[n.ciudad].map((j,x)=>e.jsx("option",{value:j,children:j},x))]})]}):e.jsx("p",{className:"text-light titilar",children:"No hay comisar√≠as cargadas para esta ciudad."})})})]})})},jr=({ciudadSeleccionada:s,comisariaSeleccionada:r,datosTiempo:t,sumario:n,pdfFile:i,relato:l,people:o})=>{if(!s||!r||!t)return e.jsx("div",{className:"alert alert-danger mt-3 text-center text-dark",children:"Por favor, selecciona la ciudad, comisar√≠a y horario para generar el texto de denuncia."});const c=s.ciudad,p=s.unidad,b=r.split("-")[0].trim(),m=(o==null?void 0:o.filter(x=>x.caridad==="denunciante"))||[],j=m.length>0?m.map((x,h)=>{const d=`${x.nombreApellido} (DNI ${x.dni}, ${x.sexo})`;return m.length===1?d:h===m.length-1?`y ${d}`:d}).join(", ")+(m.length===1?" como denunciante ":" como denunciantes "):"la persona denunciante ";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-light bg-opacity-50 rounded-4 shadow-lg p-4 mt-3",children:[e.jsx("h5",{className:"text-primary mb-3",children:"Denuncia Generada üëÆ"}),e.jsxs("p",{className:"text-dark fs-5",children:["Siendo aproximadamente las ",e.jsxs("strong",{children:[t," hs"]}),", se presenta ",j,"en la ",e.jsx("strong",{children:b})," de la ciudad de ",e.jsx("strong",{children:c}),", correspondiente a la ",e.jsx("strong",{children:p}),n&&e.jsxs(e.Fragment,{children:[" con n√∫mero de sumario ",e.jsx("strong",{children:n})]}),", con el fin de radicar una denuncia por hechos que ser√°n detallados a continuaci√≥n."]}),l&&e.jsx("p",{className:"text-dark mt-2",children:l})]}),e.jsx("div",{className:"mt-4",children:i?e.jsxs("p",{className:"text-secondaryMuiRed fs-6 bg-light bg-opacity-50 rounded-4 shadow-lg p-2",children:["Se ha adjuntado un archivo PDF junto a la denuncia. ",e.jsx("i",{className:"bi bi-file-earmark-pdf ms-1"})]}):e.jsx("p",{className:"text-muted fs-6",children:"No se adjunt√≥ archivo PDF junto a esta denuncia."})})]})},fr=({ciudadSeleccionada:s,comisariaSeleccionada:r,datosTiempo:t,sumario:n,pdfFile:i,relato:l,people:o})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"  text-dark text-center p-2 bg-light bg-opacity-50 rounded-4 shadow-lg  text-capitalize  ",children:[e.jsxs("p",{className:"mt-3",children:[e.jsxs("span",{children:[e.jsx("span",{className:"spinner-grow spinner-grow-sm me-2 text-primary"}),"üëÆ Iniciando Denuncia -"]}),e.jsxs("span",{className:" fw-semibold",children:[" ",s.ciudad," - "]}),e.jsxs("span",{children:[t," hs"]})]}),r&&e.jsxs("span",{className:"badge bg-primary me-3",children:[r.split("-")[0].trim()," ",e.jsxs("span",{className:"text-indigo border border-indigo border-2 bg-white rounded-pill px-2 py-1 ms-2",children:[s.unidad," "]})]}),n&&e.jsxs("span",{className:"badge bg-purpleUi me-3",children:["Sumario: ",n]}),i&&e.jsxs("span",{className:"rounded-circle p-2 bg-secondaryMuiRed  ",children:["  ",e.jsx("i",{className:" bi bi-filetype-pdf fs-5  text-light  ",children:" "})]}),l&&e.jsx("span",{className:"badge  bg-teal mt-2 d-inline-block",children:"Posee Relato"}),e.jsx("p",{})]}),o.length>0&&e.jsxs("div",{className:"mt-0",children:[e.jsxs("div",{className:"text-purple",children:[" ",e.jsx("i",{className:"bi bi-arrow-down fs-3"})]}),e.jsx("div",{className:"  text-dark text-center p-2 bg-light bg-opacity-50 rounded-4 shadow-lg  text-capitalize  ",children:o.map((c,p)=>e.jsxs("div",{children:[e.jsx("span",{children:"üßëüèª"}),e.jsx("small",{className:"me-2",children:c.dni}),"  ",e.jsx("small",{className:"me-2",children:c.nombreApellido}),e.jsxs("small",{className:"ms-2",children:[c.sexo==="femenino"&&e.jsx("i",{className:"bi bi-gender-female  text-pink"}),c.sexo==="masculino"&&e.jsx("i",{className:"bi bi-gender-male  text-blue"}),c.sexo==="otros"&&e.jsx("i",{className:"bi bi-gender-ambiguous  text-teal"})]})," ",e.jsx("small",{className:`badge ms-2 text-capitalize ${c.caridad==="denunciante"?"text-bg-dark bg-opacity-50  text-white ":c.caridad==="imputado"?"text-bg-pink":""}`,children:c.caridad}),e.jsx("button",{type:"button",className:"btn text-danger btn-sm ms-3",onClick:()=>handleRemovePerson(c),children:e.jsx("i",{className:"bi bi-trash3"})})]},p))})]})]}),Nr=({show:s,handleClose:r,people:t,setPeople:n})=>{if(!s)return null;const[i,l]=a.useState({sexo:"otros",nombreApellido:"",dni:"",caridad:"denunciante"}),o=()=>{if(i){const c={sexo:i.sexo||"otros",nombreApellido:i.nombreApellido||"NN",dni:i.dni||"",caridad:i.caridad||"denunciante"};n([...t,c]),console.log("Nueva persona agregada:",c),l({sexo:"otros",nombreApellido:"",dni:"",caridad:"denunciante"}),r()}};return e.jsx("div",{className:"modal fade show bg-dark bg-opacity-75   ",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-gradiante2",children:[e.jsx("h5",{className:"modal-title",children:"Agregar Persona"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body text-dark",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-8",children:[e.jsx("label",{htmlFor:"nombreApellido",children:"Nombre y Apellido:"}),e.jsx("input",{id:"nombreApellido",type:"text",className:"form-control",value:i.nombreApellido,onChange:c=>l({...i,nombreApellido:c.target.value})})]}),e.jsxs("div",{className:"col-4 ",children:[e.jsx("label",{htmlFor:"sexo",children:"Sexo:"}),e.jsxs("select",{id:"sexo",className:"form-control",value:i.sexo,onChange:c=>l({...i,sexo:c.target.value}),children:[e.jsx("option",{disabled:!0,children:"Seleccione"}),e.jsx("option",{value:"masculino",children:"üë® Masculino"}),e.jsx("option",{value:"femenino",children:"üë© Femenino"}),e.jsx("option",{value:"otros",children:"üßë‚Äçü§ù‚Äçüßë Otros"})]})]})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"dni",children:"DNI:"}),e.jsx("input",{id:"dni",type:"text",className:"form-control",value:i.dni,onChange:c=>l({...i,dni:c.target.value})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("label",{htmlFor:"caridad",children:"Caridad:"}),e.jsxs("select",{id:"caridad",className:"form-control",value:i.caridad,onChange:c=>l({...i,caridad:c.target.value}),children:[e.jsx("option",{value:"denunciante",children:"Denunciante"}),e.jsx("option",{value:"victima",children:"Victima"}),e.jsx("option",{value:"imputado",children:"Imputado"})]})]})]})]}),e.jsxs("div",{className:"modal-footer bg-light",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cerrar"}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:o,children:[e.jsx("i",{className:"bi bi-person-fill-add  mx-1 "}),"     Agregar"]})]})]})})})},Vs=[{categoria:"Delitos contra la persona",tipos:["Homicidio","Lesiones","Violencia de g√©nero","Abuso sexual","Secuestro"]},{categoria:"Delitos patrimoniales",tipos:["Robos","Hurtos","Estafas","Fraude"]},{categoria:"Delitos contra la administraci√≥n p√∫blica",tipos:["Abuso de autoridad","Soborno","Corrupci√≥n"]},{categoria:"Delitos contra la propiedad intelectual",tipos:["Contrabando de mercanc√≠as","Violaci√≥n de derechos de autor"]},{categoria:"Delitos ambientales",tipos:["Contaminaci√≥n","Tr√°fico ilegal de especies"]},{categoria:"Delitos contra el orden p√∫blico",tipos:["Disturbios","Desobediencia a la autoridad"]},{categoria:"Delitos contra la fe p√∫blica",tipos:["Falsificaci√≥n de documentos","Falsificaci√≥n de moneda"]},{categoria:"Delitos de √≠ndole federal",tipos:["Narcotr√°fico","Trata de personas","Lavado de activos"]},{categoria:"Acoso laboral",tipos:["Acoso moral","Acoso sexual","Discriminaci√≥n"]},{categoria:"Faltas a la probidad administrativa",tipos:["Soborno","Conflicto de intereses","Uso indebido de fondos p√∫blicos"]},{categoria:"Violaciones de derechos humanos",tipos:["Violencia de g√©nero","Discriminaci√≥n","Explotaci√≥n"]},{categoria:"Violaciones de leyes especiales",tipos:["Delitos electorales","Delitos ambientales"]},{categoria:"Denuncias laborales",tipos:["No pago de salarios","Despido injustificado","Incumplimiento contractual"]},{categoria:"Denuncias relacionadas con la salud",tipos:["Atenci√≥n m√©dica negligente","Falsificaci√≥n de medicamentos"]},{categoria:"Delitos rurales y abigeato",tipos:["Robo de ganado","Invasi√≥n de propiedad rural","Da√±os a instalaciones agropecuarias"]},{categoria:"Narcotr√°fico local",tipos:["Tenencia de estupefacientes","Narcomenudeo","Asociaci√≥n il√≠cita vinculada"]},{categoria:"Violencia institucional/policial",tipos:["Apremios ilegales","Detenciones arbitrarias","Uso excesivo de la fuerza","Tortura o tratos inhumanos"]},{categoria:"Bandas criminales y mafias locales",tipos:["Extorsi√≥n","Balaceras","Intimidaci√≥n p√∫blica","Amenazas"]},{categoria:"Corrupci√≥n local",tipos:["Enriquecimiento il√≠cito","Licitaciones irregulares","Nepotismo","Tr√°fico de influencias"]},{categoria:"Conflictos urbanos/barriales",tipos:["Usurpaci√≥n de viviendas","Toma de terrenos","Violencia vecinal"]},{categoria:"Delitos contra menores",tipos:["Grooming","Abandono de persona","Trabajo infantil"]},{categoria:"Situaciones adicionales",tipos:["Conflicto de intereses","Problemas de salud p√∫blica"]}],vr=({show:s,handleClose:r,onAceptar:t})=>{var b;const[n,i]=a.useState(""),[l,o]=a.useState(""),c=((b=Vs.find(m=>m.categoria===n))==null?void 0:b.tipos)||[],p=()=>{n&&l?(t(n,l),r()):alert("Debe seleccionar una categor√≠a y un tipo.")};return s?e.jsx("div",{className:"modal fade show bg-dark ",style:{display:"block"},tabIndex:"-1","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-gradiante2",children:[e.jsx("h5",{className:"modal-title text-light",children:"Agregar Categor√≠a del Hecho"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})]}),e.jsxs("div",{className:"modal-body text-dark",children:[e.jsxs("div",{className:"mb-3 ",children:[e.jsx("label",{className:"form-label ",children:"Categor√≠a"}),e.jsxs("select",{className:"form-select ",value:n,onChange:m=>{i(m.target.value),o("")},children:[e.jsx("option",{value:"",children:"Seleccionar categor√≠a..."}),Vs.map((m,j)=>e.jsx("option",{value:m.categoria,children:m.categoria},j))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Tipo"}),e.jsxs("select",{className:"form-select",value:l,onChange:m=>o(m.target.value),disabled:!n,children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),c.map((m,j)=>e.jsx("option",{value:m,children:m},j))]})]})]}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:p,children:"Aceptar"})]})]})})}):null},yr=({show:s,handleClose:r,onAceptar:t})=>{const[n,i]=a.useState(""),l=c=>{i(c.target.value)},o=()=>{n.trim()?(t(n),r()):alert("Debe escribir un relato.")};return s?e.jsx("div",{className:"modal fade show bg-dark bg-opacity-75",style:{display:"block"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-gradiante2",children:[e.jsx("h5",{className:"modal-title text-light",children:"Agregar Relato de la Denuncia"}),e.jsx("button",{type:"button",className:"btn-close btn-close-white","aria-label":"Close",onClick:r})]}),e.jsx("div",{className:"modal-body text-dark",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-floating text-dark",children:[e.jsx("textarea",{className:"form-control",placeholder:"Completa",id:"relatoDenuncia",value:n,onChange:l,style:{height:"150px"}}),e.jsx("label",{htmlFor:"relatoDenuncia",children:"Relato de la denuncia"})]})})}),e.jsxs("div",{className:"modal-footer d-flex justify-content-end",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:r,children:"Cancelar"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:o,children:"Aceptar"})]})]})})}):null},wr=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState(!1),[i,l]=a.useState(null),[o,c]=a.useState(null),p=(m,j)=>{l({categoria:m,tipo:j}),r(!1)},b=m=>{const j=m;console.log("Relato recibido:",m),c(j),n(!1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-3",children:i&&e.jsx("div",{className:"card text-dark text-center p-2 bg-light bg-opacity-75 rounded-4 shadow-lg my-3",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("span",{className:"card-title",children:"Categor√≠a Seleccionada"}),e.jsxs("p",{className:"card-text fs-5",children:[e.jsx("span",{className:"fw-bold",children:i.categoria})," - ",i.tipo]})]})})}),e.jsx("div",{className:"mb-3",children:o&&e.jsx("div",{className:"card text-dark text-center p-2 bg-light bg-opacity-75 rounded-4 shadow-lg my-3",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("span",{className:"card-title",children:"Realto del Hecho"}),e.jsxs("p",{className:"card-text fs-5",children:[e.jsx("span",{className:"fw-bold",children:o})," - ",o]})]})})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3 flex-wrap text-white text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Agregar Categor√≠a",onClick:()=>r(!0),children:e.jsx("i",{className:"bi bi-tags fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Categoria"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Agregar Lugar",children:e.jsx("i",{className:"bi bi-geo-alt-fill fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Lugar"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Agregar Relato",onClick:()=>n(!0),children:e.jsx("i",{className:"bi bi-chat-left-text fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Relato"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",title:"Herramienta  Asociar",children:e.jsx("i",{className:"bi bi-person-lines-fill fs-5"})}),e.jsx("div",{className:"mt-1 small text-white",children:"Asociar"})]})]}),e.jsx(vr,{show:s,handleClose:()=>r(!1),onAceptar:p}),e.jsx(yr,{show:t,handleClose:()=>n(!1),onAceptar:b})]})},Cr=()=>{const[s,r]=a.useState([]),t=()=>{r([...s,{categoria:"",tipo:"",lugar:""}])},n=i=>{const l=s.filter((o,c)=>c!==i);r(l)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"form-footer d-flex flex-row-reverse my-5 ",children:e.jsxs("button",{type:"button",className:"btn text-light text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg   ",onClick:t,children:[e.jsx("i",{className:"bi bi-puzzle mx-2"})," Agregar Hecho/s"]})}),e.jsx("div",{className:"container",children:s.map((i,l)=>e.jsxs("div",{className:"text-dark text-center p-4 bg-light bg-opacity-75 rounded-4 shadow-lg mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsx("div",{className:"flex-grow-1 text-start fw-bold ",children:e.jsxs("span",{className:"bg-light bg-opacity-75 p-2 rounded-4",children:[" Hecho N¬∞ ",l+1]})}),e.jsx("button",{type:"button",className:"btn-close ms-2",onClick:()=>n(l)})]}),e.jsx("div",{className:"mb-3",children:e.jsx(wr,{})})]},l))})]})},Sr=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(null),[i,l]=a.useState(null),[o,c]=a.useState(null),[p,b]=a.useState(""),[m,j]=a.useState(null),[x,h]=a.useState(""),[d,g]=a.useState(!1),[u,f]=a.useState([]),[v,N]=a.useState(!1),S=()=>{N(!0)},k=()=>{N(!1)},w=_=>{if(!_)return"";const M=new Date(_),E=M.getHours().toString().padStart(2,"0"),I=M.getMinutes().toString().padStart(2,"0");return`${M.getDate()}/${M.getMonth()+1}/${M.getFullYear()} ${E}:${I}`},C=_=>{const M=_.target.files[0];j(M)},y=()=>{n(null),l(null),c(null),b(""),h(""),j(null),g(_=>!_),localStorage.removeItem("denuncia")};return e.jsx("div",{className:"container  d-flex justify-content-center align-items-center",children:e.jsxs("div",{className:"row w-100",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3 flex-wrap text-white text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("strong",{className:"d-flex align-items-center",children:[s?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-easel me-2"}),"Modo Gr√°fico"]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-file-text me-2"}),"Modo Texto"]}),"¬†ACTIVO"]}),e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"bi bi-arrow-left-right me-2"}),"Cambiar a modo"]}),e.jsx("button",{type:"button",onClick:()=>r(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${s?"active":""}`,title:"Vista en gr√°fico",children:e.jsx("i",{className:`bi bi-easel fs-5 ${s?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>r(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${s?"":"active"}`,title:"Vista en texto",children:e.jsx("i",{className:`bi bi-card-text fs-5 ${s?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>r(!s),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),e.jsx("div",{className:"text-dark text-center p-4 bg-light bg-opacity-75 rounded-4 shadow-lg mb-4",children:s?e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3",children:[e.jsx("i",{className:"bi bi-easel me-2"}),"Modo Gr√°fico"]}),t?e.jsx(fr,{ciudadSeleccionada:t,comisariaSeleccionada:i,datosTiempo:w(o),sumario:p,pdfFile:m,relato:x,people:u}):e.jsxs("p",{className:"fs-6",children:["Listo para trabajar"," ",e.jsx("span",{className:"spinner-grow mx-2 text-light",style:{width:"1rem",height:"1rem"},role:"status"})]})]}):e.jsxs("div",{children:[e.jsxs("h4",{className:"mb-3",children:[e.jsx("i",{className:"bi bi-file-text me-2"}),"Modo Texto"]}),e.jsx(jr,{ciudadSeleccionada:t,comisariaSeleccionada:i,datosTiempo:w(o),sumario:p,pdfFile:m,relato:x,people:u})]})}),e.jsxs("div",{className:"mt-auto small text-light  ",children:[e.jsx("i",{className:"bi bi-info-circle me-1"}),"Ayuda r√°pida disponible"]})]}),e.jsxs("div",{className:"col-md-6 text-dark text-center p-4 bg-light bg-opacity-50 rounded-4 shadow-lg mb-4 text-capitalize ",children:[e.jsx("div",{className:"text-center p-4 bg-light bg-opacity-75 rounded-4 shadow-lg mb-4 ",children:e.jsxs("h5",{className:"mb-0",children:[" Comenzamos con la denuncia ",e.jsx("i",{className:"bi bi-flag ms-2 "})]})}),e.jsx("form",{children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-25 rounded-4 shadow-lg text-light ",children:[e.jsx(gr,{onCiudadChange:_=>{n(_),c(Date.now())},onComisariaChange:_=>l(_),clearSignal:d}),i&&e.jsxs("div",{className:"row mt-text-center",children:[e.jsxs("div",{className:"col-3 mb-3",children:[e.jsx("label",{htmlFor:"numeroSumario",className:"form-label",children:"N¬∞ de sumario"}),e.jsx("input",{type:"number",id:"numeroSumario",className:"form-control",placeholder:"Ej: 123/24",value:p,onChange:_=>b(_.target.value)})]}),i&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"col-9 mb-3",children:[e.jsx("label",{htmlFor:"pdfFile",className:"form-label",children:"¬øPosee archivo PDF asociado?"}),e.jsx("input",{type:"file",id:"pdfFile",className:"form-control",accept:"application/pdf",onChange:C}),m&&e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-yellow",children:["Archivo PDF cargado: ",m.name]})})]})})]})]})}),p&&e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3 flex-wrap text-white text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:()=>r(!0),title:"Agregar Vehiculo",children:e.jsx("i",{className:"bi bi-bicycle  fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Veh√≠culo"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:S,title:"Agregar Personas",children:e.jsx("i",{className:"bi bi-person-fill-add  fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Personas"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:()=>r(!0),title:"Agregar Armas",children:e.jsx("i",{className:"bi bi-shield fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Armas"})]}),e.jsxs("div",{className:"text-center mx-2",children:[e.jsx("button",{className:"btn btn-outline-light rounded-circle shadow-sm border-2",type:"button",onClick:()=>r(!0),title:"Agregar elementos",children:e.jsx("i",{className:"bi bi-boxes fs-5 "})}),e.jsx("div",{className:"mt-1 small text-white",children:"Elementos"})]})]}),e.jsx(Cr,{})]}),t&&e.jsx("div",{className:"form-footer d-flex flex-row-reverse mt-3 ",children:e.jsxs("button",{type:"button",className:"btn text-light text-center p-2 bg-dark bg-opacity-50 rounded-4 shadow-lg mb-4 text-capitalize  ",onClick:y,children:[e.jsx("i",{className:"bi bi-trash mx-2"})," Restablecer Campos"]})}),e.jsx(Nr,{show:v,handleClose:k,people:u,setPeople:f})]})})},kr=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),a.useEffect(()=>{const i=l=>{l.preventDefault(),l.returnValue="Est√°s a punto de dejar la p√°gina. ¬øQuieres continuar?"};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Menu Inicio - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Denuncia Simple App ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsxs("div",{className:" d-flexjustify-content-center  text-white gap-5",children:[e.jsx(Sr,{}),e.jsx(je,{})]})]}),e.jsx(fa,{setThemeBackgroundColor:n})]})})};function _r(){const[s,r]=a.useState({carta:null,fechaHora:"",tipo:"",marca:"",modelo:"",color:"",dominio:"",nroChasis:"",nroMotor:"",qth:"",ciudad:"",titular:"",telefono:"",observaciones:""}),[t,n]=a.useState({}),[i,l]=a.useState(!1),o=h=>{const{name:d,value:g}=h.target;r({...s,[d]:["carta","nroChasis","nroMotor"].includes(d)?g===""?null:Number(g):g})},p=(()=>{const h=localStorage.getItem("user");return h?JSON.parse(h):null})(),b=h=>/^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√º√ú\s]*$/.test(h),m=h=>/^[0-9]*$/.test(h),j=()=>{const h=s.dominio.toUpperCase();if(!h)return!0;const d=/^\d{3}[A-Z]{3}$/,g=/^[A-Z]\d{2}\d[A-Z]{3}$/,u=/^[A-Z]{3}\d{3}$/,f=/^[A-Z]{2}\d{3}[A-Z]{2}$/;return s.tipo==="moto"||s.tipo==="cuatriciclo"?d.test(h)||g.test(h):u.test(h)||f.test(h)},x=async h=>{h.preventDefault(),l(!0);const d={};if(s.tipo||(d.tipo=!0),(!s.dominio||!j())&&(d.dominio=!0),b(s.marca)||(d.marca=!0),b(s.modelo)||(d.modelo=!0),b(s.ciudad)||(d.ciudad=!0),b(s.titular)||(d.titular=!0),m(s.nroChasis)||(d.nroChasis=!0),m(s.nroMotor)||(d.nroMotor=!0),m(s.carta)||(d.carta=!0),Object.keys(d).length>0){n(d),alert("Por favor, complete todos los campos requeridos correctamente ‚ùå"),l(!1);return}try{await Ie(G(F,"db_vehiculos"),{...s,fechaHora:s.fechaHora?Ls.fromDate(new Date(s.fechaHora)):null,createdAt:Ls.now(),usuario:p?p.email:"Desconocido"}),alert(`Captura de Veh√≠culo guardada, Gracias ${p?p.email:"Desconocido"} ‚úÖ`),r({fechaHora:"",tipo:"",marca:"",modelo:"",color:"",dominio:"",nroChasis:"",nroMotor:"",qth:"",ciudad:"",titular:"",telefono:"",observaciones:"",carta:null}),n({})}catch(g){console.error("Error guardando veh√≠culo:",g),alert("Error al guardar veh√≠culo ‚ùå")}finally{l(!1)}};return e.jsx("div",{className:"container my-5",children:e.jsxs("div",{className:"card shadow border-0 rounded-3 bg-dark bg-opacity-50 text-white",children:[e.jsx("div",{className:"card-header bg-dark text-white bg-opacity-50 rounded-top-3 p-4",children:e.jsxs("h4",{className:"mb-0",children:[e.jsx("i",{className:"bi bi-car-front-fill me-2"})," Registro de Veh√≠culo"]})}),e.jsx("div",{className:"col-12 mt-3",children:s.dominio&&e.jsx("div",{className:"d-flex justify-content-center",children:s.tipo==="moto"||s.tipo==="cuatriciclo"?(()=>{const h=s.dominio.toUpperCase(),d=/^\d{3}[A-Z]{3}$/,g=/^[A-Z]\d{2}\d[A-Z]{3}$/;if(d.test(h)){const u=h.slice(0,3),f=h.slice(3,6);return e.jsx("div",{className:"card text-center shadow-sm",style:{width:"150px",borderRadius:"0.5rem",backgroundColor:"black",color:"white"},children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.7rem",marginBottom:"0.2rem"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:u}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:f})]})})}else if(g.test(h)){const u=h.slice(0,3),f=h.slice(3,7);return e.jsx("div",{className:"card text-center shadow-sm",style:{width:"150px",borderRadius:"0.5rem",backgroundColor:"#f5f5f5",color:"black"},children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-2",style:{fontWeight:"bold",fontSize:"0.7rem",marginBottom:"0.2rem"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:u}),e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:f})]})})}else return null})():e.jsx("div",{className:"card text-center shadow-sm",style:{width:"250px",borderRadius:"0.5rem",backgroundColor:"#f5f5f5"},children:e.jsxs("div",{className:"card-body p-2",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-2",style:{borderRadius:"0.5rem 0.5rem 0 0",fontWeight:"bold",fontSize:"0.9rem"},children:"ARGENTINA"}),e.jsx("h4",{className:"card-title m-0",style:{letterSpacing:"0.2rem",fontWeight:"bold"},children:s.dominio.toUpperCase()}),e.jsx("p",{className:"card-text m-0",style:{fontSize:"0.8rem",color:"#555"},children:s.ciudad||"Ciudad"})]})})})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("form",{onSubmit:x,className:"row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Numero de Carta"}),e.jsx("input",{type:"number",className:`form-control ${s.carta&&!m(s.carta)?"is-invalid":""}`,name:"carta",value:s.carta,onChange:o,placeholder:"N√∫mero de carta "}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten n√∫meros."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Fecha y Hora"}),e.jsx("input",{type:"datetime-local",className:"form-control",name:"fechaHora",value:s.fechaHora,onChange:o})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Tipo de Veh√≠culo"}),e.jsxs("select",{className:`form-select ${t.tipo?"is-invalid":""}`,name:"tipo",value:s.tipo,onChange:o,children:[e.jsx("option",{value:"",children:"Seleccione un tipo..."}),e.jsx("option",{value:"auto",children:"üöó Auto"}),e.jsx("option",{value:"moto",children:"üèçÔ∏è Moto"}),e.jsx("option",{value:"camioneta",children:"üöô Camioneta"}),e.jsx("option",{value:"camion",children:"üöö Cami√≥n"}),e.jsx("option",{value:"colectivo",children:"üöå Colectivo"}),e.jsx("option",{value:"cuatriciclo",children:"üèçÔ∏è Cuatriciclo"}),e.jsx("option",{value:"tractor",children:"üöú Tractor"}),e.jsx("option",{value:"ambulancia",children:"üöë Ambulancia"}),e.jsx("option",{value:"policial",children:"üöì Patrullero"}),e.jsx("option",{value:"bomberos",children:"üöí Bomberos"}),e.jsx("option",{value:"otros",children:"Otros"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Marca"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.marca&&!b(s.marca)?"is-invalid":""}`,name:"marca",value:s.marca,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Modelo"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.modelo&&!b(s.modelo)?"is-invalid":""}`,name:"modelo",value:s.modelo,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Color"}),e.jsxs("select",{className:"form-select",name:"color",value:s.color,onChange:o,children:[e.jsx("option",{value:"",children:"Seleccione un color..."}),e.jsx("option",{value:"blanco",children:"‚ö™ Blanco"}),e.jsx("option",{value:"negro",children:"‚ö´ Negro"}),e.jsx("option",{value:"gris",children:"‚ö™ Gris"}),e.jsx("option",{value:"plata",children:"‚ö™ Plata"}),e.jsx("option",{value:"rojo",children:"üî¥ Rojo"}),e.jsx("option",{value:"bordo",children:"üî¥ Bord√≥"}),e.jsx("option",{value:"azul",children:"üîµ Azul"}),e.jsx("option",{value:"verde",children:"üü¢ Verde"}),e.jsx("option",{value:"amarillo",children:"üü° Amarillo"}),e.jsx("option",{value:"dorado",children:"üü° Dorado"}),e.jsx("option",{value:"naranja",children:"üü† Naranja"}),e.jsx("option",{value:"violeta",children:"üü£ Violeta"}),e.jsx("option",{value:"marron",children:"üü§ Marr√≥n"}),e.jsx("option",{value:"otros",children:"Otros"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Dominio"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.dominio&&!j()||t.dominio?"is-invalid":""}`,name:"dominio",placeholder:"Ej: 111AAA o A11BCD",value:s.dominio,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:t.dominio?"Dominio es obligatorio":"Formato inv√°lido. Use "+(s.tipo==="moto"||s.tipo==="cuatriciclo"?"111AAA o A11BCD":"AAA123 o AB123CD")+"."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nro. Chasis"}),e.jsx("input",{type:"text",className:`form-control ${s.nroChasis&&!m(s.nroChasis)?"is-invalid":""}`,name:"nroChasis",value:s.nroChasis,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten n√∫meros."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nro. Motor"}),e.jsx("input",{type:"text",className:`form-control ${s.nroMotor&&!m(s.nroMotor)?"is-invalid":""}`,name:"nroMotor",value:s.nroMotor,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten n√∫meros."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"QTH Sustracci√≥n"}),e.jsx("input",{type:"text",className:"form-control",name:"qth",value:s.qth,onChange:o})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Ciudad"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.ciudad&&!b(s.ciudad)?"is-invalid":""}`,name:"ciudad",value:s.ciudad,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Nombre y Apellido Titular"}),e.jsx("input",{type:"text",className:`form-control text-uppercase ${s.titular&&!b(s.titular)?"is-invalid":""}`,name:"titular",value:s.titular,onChange:o}),e.jsx("div",{className:"invalid-feedback",children:"Solo se permiten letras."})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:"Tel√©fono"}),e.jsx("input",{type:"tel",className:"form-control",name:"telefono",placeholder:"+54 9 341 ...",value:s.telefono,onChange:o})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{className:"form-label",children:"Observaciones"}),e.jsx("textarea",{className:"form-control",name:"observaciones",rows:"3",value:s.observaciones,onChange:o})]}),e.jsx("div",{className:"col-12 text-end my-5",children:e.jsxs("button",{type:"submit",className:"btn btn-primary px-4",disabled:i,children:[i&&e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),e.jsx("i",{className:"bi bi-save me-2"})," Guardar Captura Veh√≠culo"]})})]})})]})})}const Er=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Formulario Vehiculos - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:"Nueva Captura ",Promp2:"bi bi-car-front-fill fs-4 "})}),e.jsx("div",{className:"my-5",children:e.jsx(_r,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Fr=()=>e.jsx(e.Fragment,{children:e.jsx(Er,{})});function Dr(){const[s,r]=a.useState([]),[t,n]=a.useState(""),[i,l]=a.useState(""),[o,c]=a.useState(!0),[p,b]=a.useState({});a.useEffect(()=>{(async()=>{c(!0);try{const f=(await ne(G(F,"db_vehiculos"))).docs.map(v=>({id:v.id,...v.data()}));r(f)}catch(u){console.error("Error cargando veh√≠culos:",u)}finally{c(!1)}})()},[]);const m=g=>g?(g.toDate?g.toDate():new Date(g)).toLocaleString():"",j=(g,u=!1)=>{if(!(g!=null&&g.dominio))return null;const f=g.dominio.toUpperCase(),v=u?{width:"100px",fontSize:"0.8rem"}:{width:"140px",fontSize:"1rem"},N=/^\d{3}[A-Z]{3}$/.test(f),S=/^[A-Z]\d{2}\d[A-Z]{3}$/.test(f),k=u?"card text-center shadow-sm bg-light":g.tipo==="moto"||g.tipo==="cuatriciclo"?"card text-center shadow-sm bg-dark text-white":"card text-center shadow-sm bg-light";if((g.tipo||"").toLowerCase()==="moto"||(g.tipo||"").toLowerCase()==="cuatriciclo"){if(N)return e.jsx("div",{className:k,style:{...v},children:e.jsxs("div",{className:"card-body bg-dark text-white p-1",children:[e.jsx("div",{style:{fontSize:u?"0.65rem":"0.8rem",fontWeight:"700"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:u?"1rem":"1.2rem",fontWeight:"700"},children:f.slice(0,3)}),e.jsx("div",{style:{fontSize:u?"1rem":"1.2rem",fontWeight:"700"},children:f.slice(3,6)})]})});if(S)return e.jsx("div",{className:k,style:{...v},children:e.jsxs("div",{className:"card-body p-1",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-1",style:{fontSize:u?"0.65rem":"0.8rem",fontWeight:700},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:u?"1rem":"1.2rem",fontWeight:700},children:f.slice(0,3)}),e.jsx("div",{style:{fontSize:u?"1rem":"1.2rem",fontWeight:700},children:f.slice(3)})]})})}return e.jsx("div",{className:"card text-center shadow-sm bg-light",style:{...v},children:e.jsxs("div",{className:"card-body p-1",children:[e.jsx("div",{className:"bg-primary text-white py-1 mb-1",style:{fontWeight:700,fontSize:u?"0.65rem":"0.8rem"},children:"ARGENTINA"}),e.jsx("div",{style:{fontSize:u?"0.95rem":"1.15rem",fontWeight:700},children:f})]})})},x=g=>{switch((g||"").toLowerCase()){case"auto":return"bi-car-front-fill";case"moto":return"bi-bicycle";case"cuatriciclo":return"bi-bicycle";case"camioneta":return"bi-truck";case"camion":return"bi-truck";case"colectivo":return"bi-bus-front-fill";case"bicicleta":return"bi-bicycle";case"tractor":return"bi-gear-fill";case"ambulancia":return"bi-truck";case"policial":return"bi-shield-lock-fill";case"bomberos":return"bi-fire";default:return"bi-car-front-fill"}},h=Array.from(new Set(s.map(g=>g.tipo).filter(Boolean))),d=s.filter(g=>t?g.tipo===t:!0).filter(g=>{var u;return i?(u=g.dominio)==null?void 0:u.toUpperCase().includes(i.toUpperCase()):!0});return o?e.jsx("div",{className:"d-flex justify-content-center align-items-center py-5",children:e.jsx("i",{className:"bi bi-gear-fill text-white girar display-1"})}):e.jsxs("div",{className:"container my-5",children:[e.jsx("h3",{className:"text-white mb-4 d-flex justify-content-center d-lg-none bg-dark p-3 bg-opacity-25 rounded-pill m-2",children:"Listado de Veh√≠culos"}),e.jsx("div",{className:"mb-4 p-4 bg-light bg-opacity-50 rounded-4 shadow-sm",children:e.jsxs("div",{className:"row g-3 align-items-center",children:[e.jsxs("div",{className:"col-12 col-md-6 d-flex flex-column",children:[e.jsx("label",{className:"form-label text-white",children:"Filtrar Tipo"}),e.jsxs("select",{className:"form-select bg-light bg-opacity-75 text-dark text-center rounded-3 text-capitalize",value:t,onChange:g=>n(g.target.value),children:[e.jsx("option",{value:"",children:"Todos los tipos"}),h.map(g=>e.jsx("option",{value:g,children:g},g))]})]}),e.jsxs("div",{className:"col-12 col-md-6 d-flex flex-column",children:[e.jsx("label",{className:"form-label text-white",children:"Buscar Dominio"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control bg-light bg-opacity-75 text-dark text-center",placeholder:"üîç Buscar por dominio...",value:i,onChange:g=>l(g.target.value)}),i&&e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-2",onClick:()=>l(""),title:"Eliminar b√∫squeda",children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]})]})}),e.jsx("div",{className:"list-group",children:d.map(g=>{var N,S,k,w,C;const u=!!p[g.id],f=()=>b(y=>({...y,[g.id]:!y[g.id]})),v=y=>{(y.key==="Enter"||y.key===" ")&&(y.preventDefault(),f())};return e.jsxs("div",{className:"card shadow-lg border-0 my-4 bg-dark bg-opacity-75 text-white rounded-4 overflow-hidden",children:[e.jsxs("div",{className:"card-header d-flex align-items-center gap-3 px-3 py-3",role:"button",tabIndex:0,"aria-expanded":u,onClick:f,onKeyDown:v,style:{cursor:"pointer",background:"linear-gradient(90deg, rgba(255,255,255,0.03), rgba(0,0,0,0.03))"},children:[e.jsx("div",{className:"d-flex align-items-center",style:{minWidth:110},children:j(g,!0)}),e.jsxs("div",{className:"d-flex flex-column flex-grow-1",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between flex-wrap gap-2",children:[e.jsxs("h5",{className:"mb-0 fw-bold text-truncate d-none d-md-block",style:{maxWidth:"min(65vw, 600px)"},children:[e.jsx("span",{className:"text-white",children:((N=g.marca)==null?void 0:N.toUpperCase())||"‚Äî"})," ",e.jsx("span",{className:"text-white-50",children:((S=g.modelo)==null?void 0:S.toUpperCase())||""})]}),e.jsxs("div",{className:"small text-white-50 mt-1 d-block d-md-none",style:{maxWidth:"min(65vw, 600px)"},children:[e.jsx("span",{className:"fw-bold",children:((k=g.marca)==null?void 0:k.toUpperCase())||"‚Äî"})," ",e.jsx("span",{children:((w=g.modelo)==null?void 0:w.toUpperCase())||""})]}),g.tipo&&e.jsxs("span",{className:"badge bg-light text-dark text-capitalize d-flex align-items-center px-2 py-1",children:[e.jsx("i",{className:`bi ${x(g.tipo)} fs-6 me-1`}),e.jsx("span",{className:"small",children:g.tipo})]})]}),e.jsx("div",{className:"small text-white-50 mt-1",children:((C=g.dominio)==null?void 0:C.toUpperCase())||""})]}),e.jsx("div",{className:"ms-3 d-none d-md-block",children:e.jsx("i",{className:`bi ${u?"bi-dash-circle-fill text-light":"bi-plus-circle-fill text-light titilar"} fs-4`,"aria-hidden":"true"})})]}),e.jsxs("div",{className:`collapse ${u?"show":""}`,children:[e.jsxs("div",{className:"card-body text-light",children:[e.jsxs("div",{className:"row g-3 text-capitalize",children:[e.jsxs("div",{className:"col-12 col-md-6  text-center",children:[g.color&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-palette2 me-2"})," ",e.jsx("strong",{children:"Color:"})," ",g.color]}),g.nroChasis&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-hammer me-2"})," ",e.jsx("strong",{children:"Chasis:"})," ",g.nroChasis]}),g.nroMotor&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-cpu me-2"})," ",e.jsx("strong",{children:"Motor:"})," ",g.nroMotor]})]}),e.jsxs("div",{className:"col-12 col-md-6 text-center",children:[g.ciudad&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-geo-alt me-2"})," ",e.jsx("strong",{children:"Ciudad:"})," ",g.ciudad]}),g.titular&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-person-badge me-2"})," ",e.jsx("strong",{children:"Titular:"})," ",g.titular]}),g.telefono&&e.jsxs("p",{className:"mb-2",children:[e.jsx("i",{className:"bi bi-telephone-forward me-2"})," ",e.jsx("strong",{children:"Tel√©fono:"})," ",g.telefono]})]})]}),g.qth&&e.jsxs("div",{className:"alert bg-white bg-opacity-75 mt-3 mb-0 text-center text-dark",children:[e.jsx("i",{className:"bi bi-exclamation-triangle me-2"})," ",e.jsx("strong",{children:"Sustracci√≥n QTH:"})," ",g.qth]}),g.observaciones&&e.jsxs("div",{className:"alert bg-white bg-opacity-50 mt-3 mb-0 text-center",children:[e.jsx("i",{className:"bi bi-journal-text me-2"})," ",e.jsx("strong",{children:"Observaciones:"})," ",g.observaciones]})]}),e.jsxs("div",{className:"card-footer bg-dark bg-opacity-50 text-center text-white small",children:[e.jsx("i",{className:"bi bi-person-circle me-1"})," Registrado por:"," ",e.jsx("span",{className:"fw-semibold",children:"911"})," |"," ",e.jsx("i",{className:"bi bi-calendar-date me-1"})," ",m(g.fechaHora)]})]})]},g.id)})})]})}const Ar=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Captura  Vehiculos - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 my-5 animate__animated animate__lightSpeedInRight ",children:e.jsx(_e,{Promp:"Capturas de Vehiculos ",Promp2:"bi bi-car-front-fill fs-4 "})}),e.jsx("div",{className:"my-5",children:e.jsx(Dr,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Mr=()=>e.jsx(e.Fragment,{children:e.jsx(Ar,{})}),Gs=({onImageSave:s})=>{const[r,t]=a.useState(!1),[n,i]=a.useState(null),[l,o]=a.useState(""),c=a.useRef(null),[p,b]=a.useState(!1),[m,j]=a.useState({x:0,y:0}),[x,h]=a.useState({x:0,y:0}),[d,g]=a.useState(1),u=a.useRef(null),f=y=>{b(!0);const{offsetX:_,offsetY:M}=y.nativeEvent;h({x:_,y:M})},v=y=>{if(!p||!n)return;const{offsetX:_,offsetY:M}=y.nativeEvent;j(E=>({x:E.x+(_-x.x),y:E.y+(M-x.y)})),h({x:_,y:M})},N=()=>{b(!1)},S=()=>{t(!1),o(""),i(null),j({x:0,y:0}),g(1);const y=document.getElementById("file-input");y&&(y.value=""),u.current&&(URL.revokeObjectURL(u.current),u.current=null)},k=()=>t(!0),w=y=>{const _=y.target.files[0];if(_){if(!_.type.startsWith("image/")){o("Por favor, selecciona un archivo de imagen.");return}if(_.size>5*1024*1024){o("La imagen debe ser menor de 5 MB.");return}const M=URL.createObjectURL(_);u.current=M,i(M),o("")}},C=()=>{if(!n||!c.current){o("Por favor, selecciona una imagen antes de guardar.");return}const y=c.current,_=y.width,M=y.height,E=document.createElement("canvas");E.width=_,E.height=M;const I=E.getContext("2d"),P=new Image;P.src=n,P.onload=()=>{I.clearRect(0,0,_,M),I.drawImage(P,m.x,m.y,P.width*d,P.height*d);const q=E.toDataURL("image/jpeg",.92);s(q),S()}};return a.useEffect(()=>{if(n&&c.current){const y=c.current,_=y.getContext("2d"),M=new Image;M.src=n,M.onload=()=>{_.clearRect(0,0,y.width,y.height),_.drawImage(M,m.x,m.y,M.width*d,M.height*d)}}},[n,m,d]),a.useEffect(()=>{const y=c.current,_=M=>{if(M.preventDefault(),!n)return;const E=1.1,I=M.deltaY<0?d*E:d/E;g(Math.max(I,.1))};if(y)return y.addEventListener("wheel",_,{passive:!1}),()=>{y.removeEventListener("wheel",_)}},[n,d]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:e.jsx("button",{type:"button",onClick:k,className:"btn  text-light  ",title:"Crear nuevo",children:e.jsx("i",{className:"bi bi-plus-circle-fill display-1  "})})}),e.jsx("div",{className:`modal fade  bg-dark ${r?"show":""}`,style:{display:r?"block":"none"},tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":!r,children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("div",{className:"modal-header bg-gradiante2",children:e.jsx("h5",{className:"modal-title text-light  ",id:"modalLabel ",children:"Selecciona tu imagen  / Edita "})}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{id:"file-input",type:"file",className:"form-control",accept:"image/*",onChange:w}),n&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("canvas",{ref:c,className:"shadow",onMouseDown:f,onMouseMove:v,onMouseUp:N,onMouseLeave:N,width:500,height:500,style:{border:"1px solid black",cursor:p?"grabbing":"grab"}})}),e.jsxs("p",{className:"alert alert-light text-redUi1 fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-pink",style:{width:"1rem",height:"1rem"},role:"status"}),"Para hacer zoom en la imagen, simplemente usa el scroll (la rueda) de tu mouse. üñ≤Ô∏è"]}),e.jsxs("p",{className:"alert alert-light text-indigoMui fs-6 text-center mt-4 d-flex justify-content-center align-items-center gap-2",children:[e.jsx("span",{className:"spinner-grow text-indigoMui",style:{width:"1rem",height:"1rem"},role:"status"}),"Mant√©n presionado el bot√≥n del mouse para arrastrar la imagen. üñ±Ô∏è"]})]}),l&&e.jsx("div",{className:"mt-2 text-danger",children:l})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:S,children:"Cerrar"}),e.jsx("button",{type:"button",className:"btn text-white bg-indigoMui",onClick:C,children:"Guardar Imagen"})]})]})})}),e.jsx("div",{className:`modal-backdrop fade ${r?"show":""}`,style:{display:r?"block":"none"}})]})},Pr=({onSubmit:s,savedImage:r,resetImage:t,formRef:n})=>{const[i,l]=a.useState(()=>{const d=localStorage.getItem("formData");return d?JSON.parse(d):{nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,captura:!1,prioridad:5,alertaParaderoCaptura:"",montoRecompensa:null}}),[o,c]=a.useState({}),[p,b]=a.useState(!1);a.useEffect(()=>{localStorage.setItem("formData",JSON.stringify(i))},[i]);const m=({target:{id:d,value:g,type:u,checked:f}})=>{l(v=>{let N={...v,[d]:u==="checkbox"?f:g};if(d==="alertaParaderoCaptura")switch(g){case"paradero":N={...N,prioridad:2,paradero:!0,alerta:!1};break;case"evadido":N={...N,prioridad:3,captura:!0,alerta:!0};break;case"prioritaria":N={...N,prioridad:4,alerta:!1};break;default:N={...N,prioridad:1,paradero:!1,alerta:!1};break}return N}),c(v=>({...v,[d]:""}))},j=()=>{const d={};return r?(i.nombreApellido.match(/[A-Za-z√ë√±√Å√°√â√©√ç√≠√ì√≥√ö√∫\s]+/)||(d.nombreApellido="Ingrese solo letras y espacios."),i.documento&&i.documento.length<6&&(d.documento="El n√∫mero de documento debe tener al menos 6 caracteres."),(!i.montoRecompensa||i.montoRecompensa.length<7)&&(d.montoRecompensa="El monto de recompensa debe tener al menos 7 d√≠gitos."),c(d),Object.keys(d).length===0):(alert("Debes cargar una imagen antes de enviar el formulario."),!1)},x=async d=>{if(d.preventDefault(),!j())return;if(!window.confirm("¬øEst√°s seguro de que deseas enviar este formulario?")){alert("El env√≠o ha sido cancelado.");return}b(!0);try{const u={...i,imagen:r};if(typeof s=="function")await s(u),alert("Formulario enviado correctamente.");else throw new Error("onSubmit no es una funci√≥n v√°lida")}catch(u){console.error(u),alert("Hubo un error al enviar el formulario.")}finally{b(!1),h()}},h=()=>{localStorage.removeItem("formData"),l({nombreApellido:"",documento:"",sexo:"",entidad:"",numeroContacto:"911",descripcionFisica:"",motivoCaptura:"",imagen:"",alerta:!1,paradero:!1,prioridad:5,alertaParaderoCaptura:"",montoRecompensa:0}),c({}),t()};return e.jsxs("div",{className:" mt-3",children:[p&&e.jsx(se,{})," ",e.jsxs("form",{ref:n,onSubmit:x,children:[e.jsx(Xe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-person-fill text-greenUi me-3 p-1"})," Nombre y Apellido"]}),id:"nombreApellido",type:"text",value:i.nombreApellido,error:o.nombreApellido,onChange:m,required:!0,className:"text-center"}),e.jsxs("div",{className:"row  text-center",children:[e.jsx(Xe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-building text-greenUi me-3 p-1"})," Entidad Solicita Captura"]}),id:"entidad",type:"text",value:i.entidad,onChange:m,className:"col"}),e.jsx(Xe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-telephone text-greenUi me-3 p-1"})," N√∫mero de Contacto"]}),id:"numeroContacto",type:"tel",value:i.numeroContacto,error:o.numeroContacto,onChange:m,className:"col"})]}),e.jsx(Hs,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil text-greenUi me-3 p-1"})," Info Adicional"]}),id:"descripcionFisica",value:i.descripcionFisica,onChange:m,className:"text-center"}),e.jsx(Hs,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-pencil-square text-greenUi me-3 p-1"})," ","Motivo Captura"," "]}),id:"motivoCaptura",value:i.motivoCaptura,onChange:m,className:"text-center"}),e.jsx(Ir,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill p-1 text-white me-3 titilar "})," ","Selecciona una Tipo de Alerta"]}),id:"alertaParaderoCaptura",value:i.alertaParaderoCaptura,options:[{label:"Captura Recompensa üí∞",value:"normal"}],onChange:m}),e.jsx(Xe,{label:e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-cash-coin text-warning me-3 p-1"})," Monto de Recompensa"]}),id:"montoRecompensa",type:"number",value:i.montoRecompensa,error:o.montoRecompensa,onChange:m,className:"text-center",required:!0}),e.jsxs("div",{className:"d-flex justify-content-end pt-4  mt-3",children:[e.jsxs("button",{type:"button",onClick:h,className:"btn btn-danger text-light shadow",children:[e.jsx("i",{className:"bi bi-x-circle "})," Limpiar Formulario"]}),e.jsxs("button",{type:"submit",className:"btn btn-primary2 shadow ms-2",disabled:p,children:[e.jsx("i",{className:"bi bi-send"})," Enviar Formulario"]})]})]})]})},Xe=({label:s,id:r,type:t="text",value:n,error:i,onChange:l,className:o="",required:c=!1})=>e.jsxs("div",{className:`mb-4 ${o}`,children:[e.jsx("span",{htmlFor:r,className:"input-group-text bg-light bg-opacity-25 border-white  text-white text-center mb-1",children:s}),e.jsx("input",{type:t,className:`form-control bg-transparent text-white border-white ${i?"is-invalid":""}`,id:r,value:n,onChange:l,required:c}),e.jsx("div",{className:"invalid-feedback text-light",children:i})]}),Ir=({label:s,id:r,value:t,options:n,onChange:i,className:l=""})=>e.jsxs("div",{className:`mb-5 ${l} text-center`,children:[e.jsx("span",{htmlFor:r,className:`input-group-text bg-light bg-opacity-25 text-white text-center d-flex justify-content-center shadow ${r==="alertaParaderoCaptura"?"bg-danger text-white":""}`,children:s}),e.jsx("select",{className:"form-select text-center",id:r,value:t,onChange:i,style:{color:"white",backgroundColor:"transparent",borderColor:"white"},children:n.map(({label:o,value:c})=>e.jsx("option",{value:c,style:{backgroundColor:"#5F3F8B",color:"white"},children:o},c))})]}),Hs=({label:s,id:r,value:t,onChange:n,className:i=""})=>e.jsxs("div",{className:`form-floating mb-4 ${i}`,children:[e.jsx("textarea",{className:"form-control bg-transparent text-white border-white",id:r,value:t,onChange:n,style:{height:"100px"},placeholder:" "}),e.jsx("label",{htmlFor:r,className:"text-",children:s})]}),Lr=()=>{const[s,r]=a.useState(null),[t,n]=a.useState(!1),[i,l]=a.useState(!1),[o,c]=a.useState(!1),p=a.useRef(null);a.useEffect(()=>{const h=()=>{n(window.innerWidth<576)};return window.addEventListener("resize",h),h(),()=>window.removeEventListener("resize",h)},[]);const b=h=>{r(h),l(!1)},m=async h=>{var v;const d=()=>{const N=new Date,S=String(N.getDate()).padStart(2,"0"),k=String(N.getMonth()+1).padStart(2,"0"),w=String(N.getFullYear()).slice(-2);return`${S}/${k}/${w}`},u=(()=>{const N=localStorage.getItem("user");return N?JSON.parse(N):null})(),f={documento:h.documento,nombre_apellido:h.nombreApellido.toLowerCase(),sexo:h.sexo,entidad:h.entidad,numero_contacto:h.numeroContacto,descripcion_fisica:h.descripcionFisica,motivo_captura:h.motivoCaptura,base64:s,date:d(),usuario:u?u.email:"Desconocido",prioridad:h.prioridad,alerta:h.alerta||!1,paradero:h.paradero||!1,montoRecompensa:h.montoRecompensa?Number(h.montoRecompensa):!1};try{await Ie(G(F,"db_buscados"),f),console.log("Datos guardados en Firebase:",f),(v=p.current)==null||v.reset(),j()}catch(N){console.error("Error al guardar los datos en Firebase:",N)}},j=()=>{r(null),l(!1),c(!1)},x=h=>{const d=h.target.files[0];if(d){const g=new FileReader;g.onloadend=()=>{const u=new Image;u.onload=()=>{const f=document.createElement("canvas"),v=f.getContext("2d"),N=500,S=500;let k=u.width,w=u.height;k>w?k>N&&(w*=N/k,k=N):w>S&&(k*=S/w,w=S),f.width=k,f.height=w,v.drawImage(u,0,0,k,w);const C=f.toDataURL("image/jpeg");r(C),l(!1)},u.src=g.result},g.readAsDataURL(d)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-lg",children:o?e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10 col-lg-8 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Formulario"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-ui-checks fs-4 text-dark"})})]}),e.jsx("p",{className:"mt-2 text-white",children:"Gestion√° tus registros de ingreso."}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md-5 mb-4",children:e.jsxs("div",{className:"text-center position-relative",children:[!i&&s&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondaryM text-purple position-absolute end-0 top-0 mt-5 m-2","aria-label":"Editar",onClick:()=>{r(null),l(!0)},children:e.jsx("i",{className:"bi bi-pencil-fill"})}),e.jsx("h5",{className:"text-light mt-4",children:"Vista previa "}),e.jsx("img",{src:s,alt:"Captura subida",className:"img-fluid rounded-4 border border-light shadow mt-2",style:{maxWidth:"100%"}})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-light",children:"Sub√≠ una nueva imagen"}),t?e.jsx("div",{className:"mb-3 w-100 px-3",children:e.jsx("input",{type:"file",className:"form-control bg-gradiante2 text-white",onChange:h=>{x(h)}})}):e.jsx(Gs,{onImageSave:h=>{b(h)}})]})]})}),e.jsx("div",{className:"col-12 col-md-7",children:e.jsx(Pr,{onSubmit:m,savedImage:s,resetImage:j,formRef:p})})]})]})})})}):e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center py-5 px-3 bg-dark bg-opacity-25 rounded-4 shadow-lg",children:[e.jsxs("h2",{className:"mb-4 display-5 fw-bold text-white",children:[e.jsx("i",{className:"bi bi-image me-2"}),"Selecciona imagen para comenzar"]}),e.jsx("div",{className:"d-flex justify-content-center align-items-center gap-3 flex-column flex-md-row",children:t?e.jsxs("div",{className:"mb-3 w-100 px-3",children:[e.jsxs("label",{className:"form-label fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-upload me-2"}),"Subir solo imagen"]}),e.jsx("input",{type:"file",className:"form-control bg-light text-dark rounded-3 shadow-sm",onChange:h=>{x(h),c(!0)}})]}):e.jsx("div",{className:"p-3 bg-body bg-opacity-10 rounded-4 shadow-sm",children:e.jsx(Gs,{onImageSave:h=>{b(h),c(!0)}})})})]})})})})},Rr=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Formulario Buscados - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5",children:e.jsx(Lr,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},$r=()=>e.jsx(e.Fragment,{children:e.jsx(Rr,{})}),zr=({show:s,onClose:r,datos:t})=>{a.useState(!1);const[n,i]=a.useState(!1);a.useEffect(()=>{if(s){window.history.pushState({modalOpen:!0},"");const o=c=>{r()};return window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}}},[s]);const l=o=>{if(!o)return;/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?window.location.href=`tel:${o}`:alert(`Tu dispositivo no puede realizar llamadas. N√∫mero: ${o}`)};return s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog   ",children:e.jsxs("div",{className:"modal-content  bg-light  border-0",children:[e.jsx("div",{className:"modal-header",children:e.jsx("button",{type:"button",className:"btn-close ",onClick:r})}),e.jsxs("div",{className:"modal-body text-center ",children:[e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>i(!0),children:[e.jsx("div",{className:"fs-4 position-absolute top-0 start-50 translate-middle-x bg-secondary  text-center w-100 rounded-top small",style:{opacity:.8},children:t.documento}),e.jsx("img",{src:t.base64&&t.base64.trim()!==""&&t.base64.trim()!=="null"?t.base64:"https://via.placeholder.com/150",className:"img-fluid mb-3 shadow-lg rounded-2 ",alt:t.nombre_apellido||"Imagen no disponible",style:{width:"500px",height:"auto"},loading:"lazy"}),e.jsx("div",{className:"display-6 position-absolute text-capitalize bottom-0 start-50 translate-middle-x bg-primary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:t.nombre_apellido})]}),e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 text-dark",children:["Datos de la Solicitud ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-primary border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Motivo Captura"})}),t.motivo_captura&&t.motivo_captura.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.motivo_captura}):null,(!t.motivo_captura||t.motivo_captura.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La informaci√≥n que requiri√≥ se le informar√° a los cargadores de captura para su carga. üè§"),children:["Solicitar Informaci√≥n ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary2 text-white me-2",children:"Informaci√≥n Adicional"})}),t.descripcion_fisica&&t.descripcion_fisica.trim()!==""?e.jsx("p",{className:"form-control bg-blueW2 text-dark",style:{minHeight:"auto"},children:t.descripcion_fisica}):null,(!t.descripcion_fisica||t.descripcion_fisica.trim()==="")&&e.jsxs("button",{className:"btn btn-sm btn-outline-secondary  mx-4",onClick:()=>alert("Solicitud enviada. La informaci√≥n que requiri√≥ se le informar√° a los cargadores de captura para su carga. üè§"),children:["Solicitar Informaci√≥n ",e.jsx("i",{className:"bi bi-person-raised-hand"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("hr",{className:"border border-white border-1 opacity-75"}),t.entidad&&t.entidad.trim()!==""&&e.jsxs("span",{className:"badge text-bg-primaryM text-white my-1 text-capitalize mx-3 p-2",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Solicita - ",t.entidad]}),t.numero_contacto&&t.numero_contacto.trim()!==""&&e.jsx("div",{className:"d-flex justify-content-center my-3",children:e.jsxs("button",{className:"badge btn text-bg-primaryMuiBlue text-white text-capitalize p-2 d-flex align-items-center gap-2 mx-auto",onClick:()=>l(t.numero_contacto),children:[e.jsx("i",{className:"bi bi-telephone-forward-fill"}),"Contactar ",t.numero_contacto]})})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),n&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark ",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>i(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>i(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/40",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"200vw",maxHeight:"200vh",objectFit:"contain"}})]})})})]}):null},Tr=({show:s,onClose:r,datos:t})=>{var c;const[n,i]=a.useState(!1),[l,o]=a.useState(!1);return a.useEffect(()=>{if(location.pathname==="/dashboard"){const p=()=>{r()};return window.history.pushState(null,document.title),window.addEventListener("popstate",p),()=>{window.removeEventListener("popstate",p)}}},[r]),s?e.jsxs("div",{className:"modal fade show bg-dark",style:{display:"block"},"aria-labelledby":"captureDetailsModalLabel","aria-hidden":"false",children:[e.jsx("div",{className:"modal-dialog modal-dialog-centered ",children:e.jsxs("div",{className:"modal-content bg-gradiante2 border-0",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{className:"modal-title text-center text-white fw-semibold",children:"Detalles de la Captura üëÆ"}),e.jsx("button",{type:"button",className:"btn-close btn-close-dark",onClick:r})]}),e.jsxs("div",{className:"modal-body text-white",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 d-flex justify-content-center align-items-start mb-3",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:()=>o(!0),children:[e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:t.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow mt-2",style:{width:"130px",height:"130px",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:"Capturado"})]})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("small",{className:"d-flex gap-2 justify-content-end mb-1",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center text-capitalize",value:t.nombre_apellido,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control text-center",value:t.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end",children:["Detalles de la Captura ",e.jsx("i",{className:"bi bi-journal-text"})]}),e.jsx("hr",{className:"border border-white border-1 opacity-75"}),((c=t.capturas_informacion_estados)==null?void 0:c.length)>0?e.jsxs(e.Fragment,{children:[t.capturas_informacion_estados.slice().reverse().slice(0,n?t.capturas_informacion_estados.length:1).map((p,b)=>e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:`rounded-pill px-3 py-2 text-white ${p.captura_fecha?"bg-primary":"bg-secondaryMuiRed"}`,children:[e.jsx("strong",{className:"me-3",children:p.captura_autor||"Sistema"}),p.captura_fecha||p.captura_quita_fecha]}),p.captura_fecha&&e.jsxs("p",{children:["Relato: ",e.jsx("span",{className:"fw-semibold",children:p.captura_descripcion||"Sin relato"})]})]},b)),t.capturas_informacion_estados.length>1&&e.jsx("div",{className:"text-center",children:e.jsx("button",{className:"btn btn-link text-white text-decoration-none",onClick:()=>i(!n),children:n?"Ver menos":"Ver historial completo"})})]}):e.jsx("p",{className:"text-center",children:"No hay detalles de captura disponibles."})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondaryMuiRed rounded-circle text-white",onClick:r,children:e.jsx("i",{className:"bi bi-x-lg"})})})]})}),l&&e.jsx("div",{className:"modal fade show d-flex align-items-center justify-content-center bg-dark",style:{display:"block",width:"100vw",height:"100vh",position:"fixed",top:0,left:0,zIndex:1050},onClick:()=>o(!1),children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:p=>p.stopPropagation(),children:e.jsxs("div",{className:"modal-content bg-transparent border-0 text-center",children:[e.jsx("button",{type:"button",className:"btn-close btn-close-dark position-absolute top-0 end-0 m-3 bg-red",onClick:()=>o(!1)}),e.jsx("img",{src:t.base64||"https://via.placeholder.com/150",alt:"Imagen Ampliada",className:"img-fluid rounded shadow-lg",style:{maxWidth:"90vw",maxHeight:"90vh",objectFit:"contain"}})]})})})]}):null};function Br({setGridView:s,gridView:r,sortOrder:t,setSortOrder:n,sortBy:i,setSortBy:l,searchTerm:o,setSearchTerm:c,priorityFilter:p,setPriorityFilter:b,currentPage:m,handlePriorityChange:j,entidadSeleccionada:x,setEntidadSeleccionada:h,entidades:d}){const[g,u]=a.useState(!1),f=()=>{u(!1),l("fecha"),n("desc"),b([])};return e.jsx("div",{className:"container-lg  ",children:e.jsx("div",{className:"d-flex justify-content-center align-items-center ",children:e.jsx("div",{className:"w-100 text-white",children:e.jsxs("div",{className:"text-center p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center text-center my-3 gap-3 flex-wrap",children:[e.jsx("h1",{className:"display-5 fw-bold",children:"Recompensas"}),e.jsx("button",{type:"button",className:"btn btn-light position-relative",children:e.jsx("i",{className:"bi bi-currency-exchange fs-4 text-dark"})})]}),e.jsx("form",{className:"d-flex justify-content-center my-4",onSubmit:v=>v.preventDefault(),children:e.jsxs("div",{className:"input-group input-group-lg w-100",style:{maxWidth:"600px"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Buscar en Rosario...","aria-label":"Buscar",value:o,onChange:v=>c(v.target.value)}),e.jsx("button",{className:"btn btn-outline-light",type:"submit",children:e.jsx("i",{className:"bi bi-search"})})]})}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center gap-3 my-3",children:[e.jsx("button",{type:"button",onClick:()=>s(!0),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"active":""}`,title:"Vista en cuadr√≠cula",children:e.jsx("i",{className:`bi bi-grid-3x3-gap-fill fs-5 ${r?"titilar":""}`})}),e.jsx("button",{type:"button",onClick:()=>s(!1),className:`btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2 ${r?"":"active"}`,title:"Vista en lista",children:e.jsx("i",{className:`bi bi-list fs-5 ${r?"":"titilar"}`})}),e.jsx("button",{type:"button",onClick:()=>u(!g),className:"btn btn-outline-light rounded-circle shadow-sm border-2 px-3 py-2",title:"Mostrar/Ocultar filtros",children:e.jsx("i",{className:"bi bi-plus-lg fs-5"})})]}),g&&e.jsxs("div",{className:"card shadow  bg-dark p-4 bg-opacity-25  rounded-4 shadow-lg text-white",style:{backgroundColor:"transparent",color:"white"},children:[e.jsxs("div",{className:"card-header fw-semibold  bg-light bg-opacity-25 rounded-4  p-3 text-ligh d-flex justify-content-between align-items-center ",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-sort-alpha-down mx-1"})," Filtros de Galer√≠a"]}),e.jsx("i",{className:"bi bi-x-lg cursor-pointer",onClick:f,style:{cursor:"pointer"}})]}),e.jsxs("div",{className:"card-body ",children:[e.jsxs("div",{className:"row mb-3",children:[e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select   border-white shadow-sm text-center ",value:i,onChange:v=>l(v.target.value),children:[e.jsx("option",{value:"fecha",children:"Fecha"}),e.jsx("option",{value:"nombreApellido",children:"Nombre"})]}),e.jsx("label",{className:" p-2",children:"Filtrar por"})]})}),e.jsx("div",{className:"col-12 col-md-6 mb-3",children:e.jsxs("div",{className:"form-floating ",children:[e.jsx("select",{className:"form-select  border-white shadow-sm text-center",value:t,onChange:v=>n(v.target.value),children:i==="fecha"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"Antiguo - Reciente"}),e.jsx("option",{value:"desc",children:"Reciente - Antiguo"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"asc",children:"A - Z"}),e.jsx("option",{value:"desc",children:"Z - A"})]})}),e.jsx("label",{className:" p-2",children:"Ordenar Prioridad"})]})})]}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12 col-md-12 mb-3",children:e.jsxs("div",{className:"position-relative",children:[e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select bg-light rounded-4 shadow-sm text-center pe-5",value:x,onChange:v=>h(v.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),d.map((v,N)=>e.jsx("option",{value:v,children:v},N))]}),e.jsx("label",{className:"p-2 m-2",children:"Filtrar por Entidad"})]}),x&&e.jsx("button",{type:"button",className:"btn btn-sm btn-danger text-white position-absolute top-50 end-0 translate-middle-y me-3 shadow-sm rounded-circle",onClick:()=>h(""),title:"Quitar filtro",children:e.jsx("i",{className:"bi bi-x-lg"})})]})})})]})]})]})})})})}const Or=({informeId:s})=>{const[r,t]=a.useState(null),[n,i]=a.useState(!1),[l,o]=a.useState(0);a.useEffect(()=>{const b=localStorage.getItem("user");if(b){const m=JSON.parse(b);t(m.email),c(m.email)}},[s]);const c=async b=>{try{const m=$(F,"db_buscados",s),j=await De(m);if(j.exists()){const h=j.data().me_sirve||[];o(h.length),i(h.includes(b))}}catch(m){console.error("Error al verificar 'me sirve':",m)}},p=async()=>{if(r)try{const b=$(F,"db_buscados",s);await K(b,{me_sirve:n?Re(r):Pe(r)}),i(m=>!m),o(m=>n?m-1:m+1)}catch(b){console.error("Error al actualizar 'me sirve':",b)}};return e.jsx("button",{onClick:p,className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"43px",height:"43px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Me sirve",children:e.jsx("i",{className:`bi ${n?"bi-hand-thumbs-up-fill text-secondaryM":"bi-hand-thumbs-up"} fs-4`})})},os=15;function Ws(s){const[r,t,n]=s.split("/").map(Number),i=2e3+n;return new Date(i,t-1,r)}const Ur=()=>{const[s,r]=a.useState(!1),[t,n]=a.useState([]),[i,l]=a.useState(1),[o,c]=a.useState(0),[p,b]=a.useState(null),[m,j]=a.useState(null),[x,h]=a.useState(null),[d,g]=a.useState(!0),[u,f]=a.useState(!1),[v,N]=a.useState(null),[S,k]=a.useState("fecha"),[w,C]=a.useState("desc"),[y,_]=a.useState(""),[M,E]=a.useState(!0),[I,P]=a.useState(""),[q,Z]=a.useState(!0),[H,A]=a.useState([]),[V,J]=a.useState(""),ee=async()=>{try{g(!0);const O=await ne(G(F,"db_buscados")),D=[],W=new Set;O.forEach(X=>{const L={id:X.id,...X.data()};D.push(L),L.entidad&&W.add(L.entidad)}),n(D),A(Array.from(W)),c(Math.ceil(D.length/os))}catch(O){console.error("Error obteniendo documentos: ",O),N("No se pudieron cargar los documentos.")}finally{g(!1)}};a.useEffect(()=>{ee()},[]);const z=O=>{const D=O.target.value;P(W=>W.includes(D)?W.filter(X=>X!==D):[...W,D])},R=a.useMemo(()=>t.filter(O=>{var L;const D=(L=O.nombre_apellido)==null?void 0:L.toLowerCase().includes(y.toLowerCase()),W=I.length===0||I.includes(String(O.prioridad)),X=!V||O.entidad===V;return D&&W&&X}),[t,y,I,V]),Y=a.useMemo(()=>R.sort((O,D)=>{if(S==="fecha"){const W=Ws(O.date)||0,X=Ws(D.date)||0;return w==="asc"?W-X:X-W}else return w==="asc"?O.nombre_apellido.localeCompare(D.nombre_apellido):D.nombre_apellido.localeCompare(O.nombre_apellido)}),[R,S,w]),le=(i-1)*os,de=Y.slice(le,le+os),he=()=>{i<o&&(f(!0),l(O=>O+1),setTimeout(()=>f(!1),500))},ie=()=>{i>1&&(f(!0),l(O=>O-1),setTimeout(()=>f(!1),500))},T=O=>{h(!0),b(O)},B=()=>h(null),te=O=>{j(!0),b(O)},ae=()=>j(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Br,{setGridView:E,gridView:M,sortOrder:w,sortBy:S,setSortOrder:C,setSortBy:k,searchTerm:y,setSearchTerm:_,showFilters:q,priorityFilter:I,setPriorityFilter:P,currentPage:i,handlePriorityChange:z,entidadSeleccionada:V,setEntidadSeleccionada:J,entidades:H}),e.jsxs("div",{className:"container-lg",children:[d&&e.jsx(se,{leyendaSet:"Cargado Base - Cx2"}),v&&e.jsx("div",{className:"alert alert-danger",children:v}),u?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(se,{})}):e.jsx("div",{className:M?"row mt-5":"d-flex flex-column align-items-center mt-5",children:de.map(O=>e.jsx("div",{className:M?"col-6 col-sm-6 col-md-4 mb-4":"col-12 col-sm-6 col-md-6 mb-4",children:e.jsx("div",{className:"card py-4 shadow-sm text-center bg-dark bg-opacity-50 rounded-4",children:e.jsxs("div",{className:"position-relative",children:[O.prioridad===5&&e.jsx("div",{onClick:D=>{D.stopPropagation(),r(!s)},style:{zIndex:10},children:s?e.jsx("div",{className:"position-absolute top-0 start-50 translate-middle text-center d-flex justify-content-center align-items-center bg-greenMui p-1 rounded shadow-sm",style:{width:"80%"},children:e.jsxs("span",{className:"fs-6 fw-semibold text-white",children:[e.jsx("i",{className:"bi bi-cash-coin fs-5 mx-2 text-white titilar"}),"Monto: $"," ",O.montoRecompensa?O.montoRecompensa.toLocaleString("es-AR"):"Sin datos"]})}):e.jsx("div",{className:"position-absolute end-0 translate-middle text-center bg-greenMui p-1 rounded-circle shadow-sm border border-white border-5",children:e.jsx("i",{className:"bi bi-cash-coin fs-5 mx-1 text-white"})})}),e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:O.base64||$e,className:`img-fluid d-none d-md-block rounded-3 border-0 object-fit-cover ${O.captura?"opacity-50":""}`,alt:O.nombre_apellido||"Imagen no disponible",loading:"lazy",onClick:()=>T(O),style:{width:"350px",height:"350px",objectFit:"cover",borderRadius:"0.75rem",display:"block",margin:"0 auto"}}),O.captura&&e.jsx("span",{className:"badge bg-danger position-absolute top-0 start-50 translate-middle-x mt-2 fs-3 px-2 px-md-5 shadow mt-5",onClick:D=>{D.stopPropagation(),te(O)},children:e.jsx("span",{className:"titilar",children:"CAPTURADO"})})]}),e.jsx("img",{src:O.base64&&O.base64.trim()!==""&&O.base64.trim()!=="null"?O.base64:$e,className:`img-fluid d-block d-md-none ${O.captura?"grayscale":""}`,alt:O.nombre_apellido||"Imagen no disponible",loading:"lazy",style:{width:"150px",height:"150px",objectFit:"cover",borderRadius:"0.75rem",display:"block",margin:"0 auto"},onClick:()=>T(O)}),e.jsx("h5",{className:"card-title text-white text-capitalize mt-3 text-truncate mx-2",style:{height:"48px",lineHeight:"48px",overflow:"hidden"},children:O.nombre_apellido}),e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-2 mt-3",style:{zIndex:20},children:[e.jsx("button",{onClick:()=>T(O),className:"btn btn-outline-light bg-dark bg-opacity-50 d-flex align-items-center justify-content-center rounded-circle",style:{width:"43px",height:"43px"},title:"Ver detalles",children:e.jsx("i",{className:"bi bi-eye fs-4"})}),e.jsx(Or,{informeId:O.id}),e.jsx(na,{informeId:O.id,objeto:O})]})]})})},O.id))}),e.jsxs("div",{className:"d-flex justify-content-center align-items-center mt-4",children:[i>1&&e.jsx("button",{className:"btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 text-white",onClick:ie,children:e.jsx("i",{className:"bi bi-arrow-left fw-semibold fs-3 titilar"})}),e.jsxs("span",{className:"fs-6 mx-3 text-light",children:["P√°gina ",i," de ",o]}),i<o&&e.jsx("button",{className:"btn rounded-pill shadow-sm text-center bg-dark bg-opacity-50 text-white",onClick:he,children:e.jsx("i",{className:"bi bi-arrow-right fw-semibold fs-3 titilar"})})]})]}),e.jsx(zr,{show:x,datos:p,onClose:B}),e.jsx(Tr,{show:m,datos:p,onClose:ae})]})},qr=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Recompensa - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:"Geleria Buscados SF ",Promp2:"bi bi-people-fill  fs-4 "})}),e.jsx(Ur,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Vr=()=>e.jsx(e.Fragment,{children:e.jsx(qr,{})});ds.register(ms,us,hs,aa,xs,bs,ta,ps,gs);const Gr=(s,r)=>{const t=parseInt(s.replace("#",""),16),n=Math.max((t>>16)-r,0),i=Math.max((t>>8&255)-r,0),l=Math.max((t&255)-r,0);return`#${(n<<16|i<<8|l).toString(16).padStart(6,"0")}`},Hr=({totalAutos:s,totalMotos:r,totalCuatriciclos:t,totalCamionetas:n,totalCamiones:i,totalColectivos:l,totalBicicletas:o,totalTractores:c,totalAmbulancias:p,totalPoliciales:b,totalBomberos:m})=>{const[j,x]=a.useState("bar"),h=["#03dac6","#ffef62","#f73378","#2196f3","#7c4dff","#00e676","#ff9100","#ff1744","#00b0ff","#cddc39","#8d6e63"],g=[{label:"Autos",value:s},{label:"Motos",value:r},{label:"Cuatriciclos",value:t},{label:"Camionetas",value:n},{label:"Camiones",value:i},{label:"Colectivos",value:l},{label:"Bicicletas",value:o},{label:"Tractores",value:c},{label:"Ambulancias",value:p},{label:"Policiales",value:b},{label:"Bomberos",value:m}].filter(v=>v.value>0),u={labels:g.map(v=>v.label),datasets:[{label:"Veh√≠culos por tipo",data:g.map(v=>v.value),backgroundColor:h.slice(0,g.length),borderColor:h.slice(0,g.length).map(v=>Gr(v,40)),borderWidth:1}]},f={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#ffffff"}},title:{display:!0,text:"Veh√≠culos por Tipo",color:"#ffffff",font:{size:20}},tooltip:{bodyColor:"#ffffff",titleColor:"#ffffff"}},scales:j==="pie"||j==="doughnut"?{}:{x:{ticks:{color:"#ffffff"},grid:{color:"rgba(255, 255, 255, 0.2)"}},y:{beginAtZero:!0,ticks:{color:"#ffffff",stepSize:1},grid:{color:"rgba(255, 255, 255, 0.2)"}}}};return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-center my-5 text-light",children:"Veh√≠culos por Tipo"}),e.jsx("div",{className:"row justify-content-center mb-4",children:e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"input-group input-group-sm shadow-sm",children:[e.jsx("span",{className:"input-group-text bg-dark bg-opacity-50 text-light",children:"Tipo de gr√°fico"}),e.jsxs("select",{className:"form-select text-center",onChange:v=>x(v.target.value),value:j,children:[e.jsx("option",{value:"bar",children:"Barra"}),e.jsx("option",{value:"line",children:"L√≠nea"}),e.jsx("option",{value:"pie",children:"Pastel"}),e.jsx("option",{value:"doughnut",children:"Doughnut"})]})]})})}),e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 col-md-10",style:{height:"400px"},children:j==="scatter"?e.jsx(ia,{data:u,options:f}):j==="bar"?e.jsx(js,{data:u,options:f}):j==="line"?e.jsx(es,{data:u,options:f}):j==="pie"?e.jsx(fs,{data:u,options:f}):j==="doughnut"?e.jsx(Ns,{data:u,options:f}):null})})]})},Na="/gif/dash6.gif",Wr=({title:s="app"})=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center  mt-5 text-light",children:[e.jsxs("span",{className:"display-4 mb-2",children:["¬°Bienvenido a ",s,"!"]}),e.jsxs("span",{className:"mb-5 ",children:["Este panel de control te permite gestionar ",s,", ver estad√≠sticas y configurar las opciones del sistema."]}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Desde aqu√≠ podr√°s administrar los recursos del sistema de forma f√°cil y eficiente."})]}),e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-lightbulb  p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2",children:"Ante cualquier inconveniente, no dudes en solicitar asistencia t√©cnica."})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:Na,alt:"Panel de control gr√°fico",className:"img-fluid p-2 rounded-circle shadow",style:{maxWidth:"300px",height:"auto"}})})]})]}),Jr=({loading:s})=>{const[r,t]=a.useState([]),[n,i]=a.useState([]),l=["ciudad","color","createdAt","dominio","fechaHora","marca","modelo","nroChasis","nroMotor","observaciones","qth","telefono","tipo","titular","carta"],o={ciudad:"Ciudad",color:"Color",createdAt:"Fecha de creaci√≥n",dominio:"Dominio / Patente",fechaHora:"Fecha y Hora",marca:"Marca",modelo:"Modelo",nroChasis:"N√∫mero de Chasis",nroMotor:"N√∫mero de Motor",observaciones:"Observaciones",qth:"QTH (Ubicaci√≥n)",telefono:"Tel√©fono",tipo:"Tipo",titular:"Titular",carta:"Carta"},c=async()=>{try{const h=(await ne(G(F,"db_vehiculos"))).docs.map(d=>({id:d.id,...d.data()}));t(h)}catch(x){console.error("Error al obtener los datos:",x)}},p=x=>{i(h=>h.includes(x)?h.filter(d=>d!==x):[...h,x])},b=()=>{i(l)},m=()=>{i([])},j=()=>{if(r.length===0||n.length===0)return;const x=r.map(g=>{const u={};return n.forEach(f=>{u[o[f]||f]=g[f]}),u}),h=ke.json_to_sheet(x),d=ke.book_new();ke.book_append_sheet(d,h,"Datos Seleccionados"),qe(d,"Datos_Seleccionados.xlsx")};return a.useEffect(()=>{c()},[]),e.jsx(e.Fragment,{children:s?e.jsx(se,{leyendaSet:"Exportar - Cx2"}):e.jsx("div",{className:"container-lg  mt-5 mt-md-0 text-white",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center ",children:[e.jsxs("span",{className:"mb-4 display-5",children:["Exportar Datos  ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportaci√≥n."}),e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:m,children:"Limpiar selecci√≥n"})]}),e.jsx("form",{className:"mb-4 w-100 px-3 ",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border border-1",children:l.map(x=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:x,value:x,onChange:()=>p(x),checked:n.includes(x)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:x,children:o[x]||x})]})},x))})}),n.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn bg-green bg-opacity-50 text-white fw-semibold",onClick:j,children:["Descargar datos seleccionados ",e.jsx("i",{className:"bi bi-file-earmark-arrow-down-fill ms-2"})]})})]})})})},Yr=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),[o,c]=a.useState(""),b=(()=>{const x=localStorage.getItem("user");return x?JSON.parse(x):null})(),m=async x=>{if(window.confirm("¬øEst√°s seguro de que deseas eliminar este veh√≠culo?"))try{const h=$(F,"db_vehiculos_desactivados",x.id),d=new Date,g=`${d.getDate().toString().padStart(2,"0")}/${(d.getMonth()+1).toString().padStart(2,"0")}/${d.getFullYear().toString().slice(-2)}`;await we(h,{...x,usuario_baja:b.email||"usuario_desconocido",usuario_baja_fecha:g});const u=$(F,"db_vehiculos",x.id);await Ne(u),r(),c("vehiculo eliminado y copiado a la colecci√≥n de desactivados."),setTimeout(()=>c(""),3e3)}catch(h){console.error("Error al eliminar vehiculo: ",h),c("Error al eliminar la vehiculo. Int√©ntalo de nuevo."),setTimeout(()=>c(""),3e3)}},j=x=>{m(x),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-trash3-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Eliminar Veh√≠culo"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Dominio:"})," ",(s==null?void 0:s.dominio)||"NN"," - ",e.jsx("strong",{children:"Tipo:"}),"  ",e.jsx("span",{className:"text-capitalize",children:(s==null?void 0:s.tipo)||"Sin documento"})]}),e.jsxs("p",{className:"text-danger  bg-redW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas eliminar este vehiculo ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:()=>{j(s)},children:"Confirmar Eliminaci√≥n"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Zr=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),[o,c]=a.useState(!1),[p,b]=a.useState(s.ciudad||""),[m,j]=a.useState(s.color||""),[x]=a.useState(s.createdAt||""),[h,d]=a.useState(s.dominio||""),[g,u]=a.useState(s.fechaHora||""),[f,v]=a.useState(s.marca||""),[N,S]=a.useState(s.modelo||""),[k,w]=a.useState(s.nroChasis||""),[C,y]=a.useState(s.nroMotor||""),[_,M]=a.useState(s.observaciones||""),[E,I]=a.useState(s.qth||""),[P,q]=a.useState(s.telefono||""),[Z,H]=a.useState(s.tipo||""),[A,V]=a.useState(s.titular||""),[J,ee]=a.useState(s.usuario||""),[z,R]=a.useState("edici√≥n desde men√∫ de veh√≠culos"),Y=()=>{const ie={ciudad:p,color:m,createdAt:x,dominio:h,fechaHora:g,marca:f,modelo:N,nroChasis:k,nroMotor:C,observaciones:_,qth:E,telefono:P,tipo:Z,titular:A,usuario:J};return["ciudad","color","dominio","fechaHora","marca","modelo","nroChasis","nroMotor","observaciones","qth","telefono","tipo","titular","usuario"].filter(B=>ie[B]!==s[B])},le=async()=>{if(!h.trim()){alert("El campo Dominio es obligatorio.");return}if(!f.trim()){alert("El campo Marca es obligatorio.");return}if(!N.trim()){alert("El campo Modelo es obligatorio.");return}if(!z.trim()){alert("La descripci√≥n de las ediciones es obligatoria.");return}const ie=$(F,"db_vehiculos",s.id),T=Y();try{c(!0);const B=new Date,te=`${B.getDate().toString().padStart(2,"0")}/${(B.getMonth()+1).toString().padStart(2,"0")}/${B.getFullYear().toString().slice(-2)}`;await K(ie,{ciudad:p,color:m,dominio:h,fechaHora:g,marca:f,modelo:N,nroChasis:k,nroMotor:C,observaciones:_,qth:E,telefono:P,tipo:Z,titular:A,usuario:J,ediciones:[...s.ediciones||[],{motivo:z,usuario:he.email,fecha:te,campos:T}]}),r(),alert("Los cambios se han guardado correctamente.")}catch(B){console.error("Error al actualizar el veh√≠culo: ",B),alert("Error al guardar los cambios. Int√©ntalo de nuevo.")}c(!1)},he=(()=>{const ie=localStorage.getItem("user");return ie?JSON.parse(ie):null})();return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-pen"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark ",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-lg ",role:"document",children:e.jsxs("div",{className:"modal-content shadow ",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title mx-2",children:"Editar Veh√≠culo üöó "}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-primary border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body row ",children:[e.jsxs("div",{className:"col-md-6 ",children:[e.jsxs("div",{className:"form-floating mb-2  ",children:[e.jsx("input",{type:"text",className:"form-control ",value:p,onChange:ie=>b(ie.target.value),disabled:!0}),e.jsx("label",{children:"Ciudad"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsxs("select",{className:"form-select",id:"colorSelect",value:m,onChange:ie=>j(ie.target.value),children:[e.jsx("option",{value:"",children:"Seleccione un color..."}),e.jsx("option",{value:"blanco",children:"‚ö™ Blanco"}),e.jsx("option",{value:"negro",children:"‚ö´ Negro"}),e.jsx("option",{value:"gris",children:"‚ö™ Gris"}),e.jsx("option",{value:"plata",children:"‚ö™ Plata"}),e.jsx("option",{value:"rojo",children:"üî¥ Rojo"}),e.jsx("option",{value:"bordo",children:"üî¥ Bord√≥"}),e.jsx("option",{value:"azul",children:"üîµ Azul"}),e.jsx("option",{value:"verde",children:"üü¢ Verde"}),e.jsx("option",{value:"amarillo",children:"üü° Amarillo"}),e.jsx("option",{value:"dorado",children:"üü° Dorado"}),e.jsx("option",{value:"naranja",children:"üü† Naranja"}),e.jsx("option",{value:"violeta",children:"üü£ Violeta"}),e.jsx("option",{value:"marron",children:"üü§ Marr√≥n"}),e.jsx("option",{value:"otros",children:"Otros"})]}),e.jsx("label",{htmlFor:"colorSelect",children:"Color"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:h,onChange:ie=>d(ie.target.value)}),e.jsx("label",{children:"Dominio"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:g,onChange:ie=>u(ie.target.value)}),e.jsx("label",{children:"Fecha y Hora"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:f,onChange:ie=>{const T=ie.target.value.replace(/[^A-Za-z\s]/g,"");v(T)}}),e.jsx("label",{children:"Marca"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:N,onChange:ie=>{const T=ie.target.value.replace(/[^A-Za-z0-9\s]/g,"");S(T)}}),e.jsx("label",{children:"Modelo"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:k,onChange:ie=>w(ie.target.value)}),e.jsx("label",{children:"Nro Chasis"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:C,onChange:ie=>y(ie.target.value)}),e.jsx("label",{children:"Nro Motor"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("textarea",{className:"form-control",value:_,onChange:ie=>M(ie.target.value),style:{minHeight:"80px"}}),e.jsx("label",{children:"Observaciones"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:E,onChange:ie=>I(ie.target.value)}),e.jsx("label",{children:"QTH"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control",value:P,onChange:ie=>q(ie.target.value),min:"0",step:"1"}),e.jsx("label",{children:"Tel√©fono"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:Z,onChange:ie=>H(ie.target.value)}),e.jsx("label",{children:"Tipo"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:A,onChange:ie=>{const T=ie.target.value.replace(/[^A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s]/g,"");V(T)},pattern:"[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\\s]+",title:"Solo se permiten letras y espacios"}),e.jsx("label",{children:"Titular"})]}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:J,onChange:ie=>ee(ie.target.value),disabled:!0}),e.jsx("label",{children:"Usuario"})]})]}),e.jsxs("div",{className:"form-floating mt-3",children:[e.jsx("textarea",{className:"form-control",value:z,onChange:ie=>R(ie.target.value),style:{minHeight:"100px"}}),e.jsx("label",{children:"Descripci√≥n de Edici√≥n"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:l,children:e.jsx("i",{className:"bi bi-x-circle"})}),e.jsx("button",{className:`btn btn-primary text-white btn-sm rounded-circle ${o?"titilar":""}`,onClick:le,disabled:o,children:e.jsx("i",{className:"bi bi-floppy2"})})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Qr=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1),[o,c]=a.useState(""),[p,b]=a.useState(!1),m=()=>l(!0),j=()=>l(!1),x=()=>{n([])},d=(()=>{const u=localStorage.getItem("user");return u?JSON.parse(u):null})(),g=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas copiar estos veh√≠culos a la colecci√≥n de desactivados?"))){b(!0);try{const v=r.filter(N=>s.includes(N.id)).map(async N=>{const S=G(F,"db_vehiculos_desactivados"),k=new Date,w=`${k.getDate().toString().padStart(2,"0")}/${(k.getMonth()+1).toString().padStart(2,"0")}/${k.getFullYear().toString().slice(-2)}`;await Ie(S,{...N,usuario_baja:(d==null?void 0:d.email)||"usuario_desconocido",usuario_baja_fecha:w});const C=$(F,"db_vehiculos",N.id);await Ne(C)});await Promise.all(v),c("Veh√≠culos copiados a la colecci√≥n de desactivados y eliminados de la colecci√≥n original."),t(),x()}catch(f){console.error("Error al eliminar veh√≠culos:",f),c("Hubo un error al copiar o eliminar algunos veh√≠culos.")}setTimeout(()=>c(""),3e3),b(!1),j()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:m,disabled:p,children:e.jsx("i",{className:"bi bi-trash3-fill"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Eliminar Veh√≠culos del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:j})]}),e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-redW p-2 rounded-pill text-secondaryMuiRed fw-bold",children:["Se eliminar√°n ",s.length," veh√≠culo",s.length!==1&&"s"," seleccionado",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(u=>s.includes(u.id)).map(u=>e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsxs("span",{className:"text-capitalize mx-1",children:[" ",u.tipo||"NN"," "]}),u.dominio||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(f=>f.filter(v=>v!==u.id)),title:"Quitar de la selecci√≥n"})]},u.id))}),e.jsxs("p",{className:"text-danger text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas eliminar estos Vehiculos?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:j,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:g,disabled:p,children:p?"Eliminando...":"Confirmar Eliminaci√≥n"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"}),o&&e.jsx("div",{className:"alert alert-success mt-2",children:o})]})},va=({Date1:s,Date2:r,setSelectedDocs:t,onCerrar:n,color:i})=>{const l=o=>{if(!o)return"‚ùì";switch(o.toLowerCase()){case"auto":return"üöó";case"moto":return"üèçÔ∏è";case"cuatriciclo":return"üõµ";case"camioneta":return"üöô";case"camion":return"üöö";case"colectivo":return"üöå";case"bicicleta":return"üö≤";case"tractor":return"üöú";case"ambulancia":return"üöë";case"policial":return"üöì";case"bomberos":return"üî•";default:return"‚ùì"}};return e.jsxs("div",{className:`card bg-${i} shadow my-4 position-relative text-dark d-flex align-items-start gap-3 p-4 card text-center p-2 bg-dark bg-opacity-75 rounded-4 shadow-lg`,style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:n}),e.jsx("img",{src:"img/Perfiles/9.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:e.jsx("strong",{children:"Asistente de Selecci√≥n"})}),e.jsxs("p",{className:"mb-3",children:["Veh√≠culos Seleccionadas: ",e.jsxs("strong",{children:[s.length," üöó"]})]}),e.jsx("strong",{children:s.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-start p-2 rounded mb-3  ",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(o=>s.includes(o.id)).map(o=>e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative bg-light bg-opacity-50 m-1",style:{fontSize:"0.75rem"},children:[l(o.tipo),"  ",o.dominio||"Sin Dominio",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>t(c=>c.filter(p=>p!==o.id)),title:"Quitar de la selecci√≥n"})]},o.id))}):e.jsx("span",{className:"text-danger",children:"Ninguna"})})]})]})},ya=({orden:s,setOrden:r})=>e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Ordenar alfab√©ticamente",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"asc",children:"Orden A-Z"}),e.jsx("option",{value:"desc",children:"Orden Z-A"})]}),e.jsxs("label",{children:["Ordenar ",e.jsx("i",{className:"bi bi-alphabet"})]})]}),wa=({searchTerm:s,setSearchTerm:r})=>e.jsxs("div",{className:"form-floating mb-3 position-relative  ",children:[e.jsx("input",{type:"text",className:"form-control  shadow-sm pe-5 bg-dark bg-opacity-50 text-light",placeholder:"Buscar por dominio",value:s,onChange:t=>r(t.target.value)}),e.jsx("label",{children:"Buscar por Dominio"}),s&&e.jsx("button",{type:"button",className:"btn btn-link position-absolute top-50 end-0 translate-middle-y pe-3 ",onClick:()=>r(""),"aria-label":"Cancelar b√∫squeda",children:e.jsx("i",{className:"bi bi-x-circle text-light "})})]}),Ca=({tipoFilter:s,setTipoFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Seleccione tipo de veh√≠culo",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos los Tipos"}),e.jsx("option",{value:"auto",children:"Auto üöó"}),e.jsx("option",{value:"moto",children:"Moto üèçÔ∏è"}),e.jsx("option",{value:"cuatriciclo",children:"Cuatriciclo üõ∫"}),e.jsx("option",{value:"camioneta",children:"Camioneta üöô"}),e.jsx("option",{value:"camion",children:"Cami√≥n üöö"}),e.jsx("option",{value:"colectivo",children:"Colectivo üöå"}),e.jsx("option",{value:"bicicleta",children:"Bicicleta üö≤"}),e.jsx("option",{value:"tractor",children:"Tractor üöú"}),e.jsx("option",{value:"ambulancia",children:"Ambulancia üöë"}),e.jsx("option",{value:"policial",children:"Policial üöì"}),e.jsx("option",{value:"bomberos",children:"Bomberos üöí"})]}),e.jsx("label",{children:"Seleccione un Tipo"})]}),Xr=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState(!0),[d,g]=a.useState("asc"),[u,f]=a.useState(""),v=G(F,"db_vehiculos"),N=async()=>{c(!0);try{const y=(await ne(v)).docs.map(_=>({..._.data(),id:_.id}));r(y),n(y)}catch(C){console.error("Error al obtener veh√≠culos: ",C)}finally{c(!1)}},S=C=>C.sort((y,_)=>d==="asc"?(y.dominio||"").localeCompare(_.dominio||""):(_.dominio||"").localeCompare(y.dominio||""));a.useEffect(()=>{N()},[]),a.useEffect(()=>{const C=s.filter(_=>_.dominio&&_.dominio.toLowerCase().includes(p.toLowerCase())||_.marca&&_.marca.toLowerCase().includes(p.toLowerCase())).filter(_=>m?_.prioridad===parseInt(m,10):!0).filter(_=>u?_.tipo.toLowerCase()===u.toLowerCase():!0),y=S(C);n(y)},[p,s,m,u,d]);const k=C=>{l(y=>y.includes(C)?y.filter(_=>_!==C):[...y,C])},w=()=>{if(i.length===t.length)l([]);else{const C=t.map(y=>y.id);l(C)}};return e.jsxs("div",{className:"container-lg text-white",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center my-5 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado de Veh√≠culos"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(wa,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(Ca,{tipoFilter:u,setTipoFilter:f})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(ya,{orden:d,setOrden:g})})]}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Qr,{data1:i,data2:s,dataRefresh:N,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),x&&e.jsx(va,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>h(!1),color:"blueW2"}),!x&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>h(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-light",children:[i.length," üöó"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small rounded-pill",children:[e.jsx("thead",{className:"table-info",children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:w})}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Dominio"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Tipo"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Marca"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Modelo"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(C=>e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(C.id),onChange:()=>k(C.id)})}),e.jsx("td",{children:e.jsx("span",{className:"text-capitalize",children:C.dominio})}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:C.tipo}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:C.marca}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:C.modelo}),e.jsxs("td",{children:[e.jsx(Zr,{data1:C,data2:N}),e.jsx(Yr,{data1:C,data2:N})]}),e.jsx("td",{})]},C.id))})]})})]})})]})},Kr=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1),[o,c]=a.useState(!1),p=()=>l(!0),b=()=>l(!1),m=()=>{n([])},x=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas recuperar estos veh√≠culos?"))){c(!0);try{const u=r.filter(f=>s.includes(f.id)).map(async f=>{const v=$(F,"db_vehiculos",f.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await we(v,{...f,recuperado:[...f.recuperado||[],{motivo:"recuperado manual",usuario:x.email,fecha:S,datos_resguardo_baja_previa:[{usuario_baja:f.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:f.usuario_baja_fecha||"fecha_no_disponible"}]}]});const k=$(F,"db_vehiculos_desactivados",f.id);await Ne(k)});await Promise.all(u),alert("Veh√≠culos recuperados y eliminados de la colecci√≥n de desactivados."),t(),m()}catch(g){console.error("Error al recuperar veh√≠culos:",g),alert("Hubo un error al recuperar o eliminar algunas veh√≠culos.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:p,disabled:o,children:e.jsx("i",{className:"bi bi-recycle"})})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Recuperar Veh√≠culos del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-teal border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-greenW p-2 rounded-pill text-primary fw-bold",children:["Se reactivan ",s.length," veh√≠culo",s.length!==1&&"s"," seleccionado",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsxs("span",{className:"mx-1 text-capitalize",children:["  ",d.tipo||"NN","  "]})," -",e.jsxs("span",{className:"mx-1 text-capitalize",children:["  ",d.dominio||"NN","  "]}),e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(g=>g.filter(u=>u!==d.id)),title:"Quitar de la selecci√≥n"})]},d.id))}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas reactivar estos veh√≠culos?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:h,disabled:o,children:o?"Recuperando...":"Confirmar Recuperaci√≥n"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},el=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),c=(()=>{const m=localStorage.getItem("user");return m?JSON.parse(m):null})(),p=async m=>{if(window.confirm("¬øEst√°s seguro de que deseas recuperar este veh√≠culo ?"))try{const j=$(F,"db_vehiculos",m.id),x=new Date,h=`${x.getDate().toString().padStart(2,"0")}/${(x.getMonth()+1).toString().padStart(2,"0")}/${x.getFullYear().toString().slice(-2)}`,d="campos_modificados_aqui";await we(j,{...m,recuperado:[...m.recuperado||[],{motivo:"recuperado manual",usuario:c.email,fecha:h,datos_resguardo_baja_previa:[{usuario_baja:m.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:m.usuario_baja_fecha||"fecha_no_disponible"}]}]});const g=$(F,"db_vehiculos_desactivados",m.id);await Ne(g),r(),alert("Veh√≠culo recuperado y copiado a la colecci√≥n de capturas.")}catch(j){console.error("Error al recuperar veh√≠culo: ",j)}},b=m=>{p(m),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-recycle"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Persona"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-teal  border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"}),e.jsxs("span",{className:"text-capitalize mx-1",children:[(s==null?void 0:s.tipo)||"NN"," "]}),e.jsx("strong",{children:"Dominio:"}),e.jsxs("span",{className:"text-capitalize mx-1",children:[" ",(s==null?void 0:s.dominio)||"NN"," "]})]}),e.jsxs("p",{className:"text-primary bg-greenW2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas recuperar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:()=>b(s),children:"Confirmar Recuperaci√≥n"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},sl=()=>{const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!0),[p,b]=a.useState(""),[m,j]=a.useState(""),[x,h]=a.useState(""),[d,g]=a.useState(!0),[u,f]=a.useState("asc"),v=G(F,"db_vehiculos_desactivados"),N=async()=>{c(!0);try{const y=(await ne(v)).docs.map(_=>({..._.data(),id:_.id}));r(y),n(y)}catch(C){console.error("Error al obtener veh√≠culos: ",C)}finally{c(!1)}},S=C=>[...C].sort((y,_)=>u==="asc"?(y.dominio||"").localeCompare(_.dominio||""):(_.dominio||"").localeCompare(y.dominio||""));a.useEffect(()=>{N()},[]),a.useEffect(()=>{const C=s.filter(_=>_.dominio&&_.dominio.toLowerCase().includes(p.toLowerCase())||_.marca&&_.marca.toLowerCase().includes(p.toLowerCase())).filter(_=>m?_.prioridad===parseInt(m,10):!0).filter(_=>{var M;return x?((M=_.tipo)==null?void 0:M.toLowerCase())===x.toLowerCase():!0}),y=S(C);n(y)},[p,s,m,x,u]);const k=C=>{l(y=>y.includes(C)?y.filter(_=>_!==C):[...y,C])},w=()=>{if(i.length===t.length)l([]);else{const C=t.map(y=>y.id);l(C)}};return e.jsxs("div",{className:"container-lg text-white",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center mb-5 animate__animated animate__bounce mt-sm-0",children:"Listado de Veh√≠culos Desactivados"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(wa,{searchTerm:p,setSearchTerm:b})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(Ca,{tipoFilter:x,setTipoFilter:h})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(ya,{orden:u,setOrden:f})})]}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:t.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[i.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(Kr,{data1:i,data2:s,dataRefresh:N,setSelectedDocs:l}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>l([])})]}),d&&e.jsx(va,{Date1:i,Date2:s,setSelectedDocs:l,onCerrar:()=>g(!1),color:"blueW2"}),!d&&i.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>g(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"})," ",e.jsxs("small",{className:"text-white",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-white",children:[i.length," üßë"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===t.length,onChange:w})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Dominio"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Tipo"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.map(C=>e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(C.id),onChange:()=>k(C.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"text-capitalize",children:C.dominio}),e.jsxs("span",{className:"text-capitalize",children:[C.marca," ",C.modelo]})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:C.dominio}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:C.tipo}),e.jsx("td",{children:e.jsx(el,{data1:C,data2:N})}),e.jsx("td",{})]},C.id))})]})})]})})]})},al=()=>{const[s,r]=a.useState("dashboard"),[t,n]=a.useState([]),[i,l]=a.useState(!1),o=async()=>{try{l(!0);const S=await ne(G(F,"db_vehiculos")),k=[];S.forEach(w=>{k.push({id:w.id,...w.data()})}),n(k)}catch(S){console.error("Error al obtener los documentos: ",S)}finally{l(!1)}};a.useEffect(()=>{o()},[]);const c=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="auto"}).length,p=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="moto"}).length,b=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="cuatriciclo"}).length,m=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="camioneta"}).length,j=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="camion"}).length,x=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="colectivo"}).length,h=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="bicicleta"}).length,d=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="tractor"}).length,g=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="ambulancia"}).length,u=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="policial"}).length,f=t.filter(S=>{var k;return((k=S.tipo)==null?void 0:k.toLowerCase())==="bomberos"}).length,v=t.length,N=()=>{switch(s){case"dashboard":return e.jsx(Wr,{title:"veh√≠culos"});case"reportes":return e.jsx(Jr,{loading:i});case"graficos":return e.jsx(Hr,{totalAutos:c,totalMotos:p,totalCuatriciclos:b,totalCamionetas:m,totalCamiones:j,totalColectivos:x,totalBicicletas:h,totalTractores:d,totalAmbulancias:g,totalPoliciales:u,totalBomberos:f});case"Desactivados":return e.jsx(sl,{});case"capturas":return e.jsx(Xr,{});default:return e.jsx("p",{children:"Selecciona una opci√≥n del men√∫."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row ",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 ",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill"}),"Men√∫ Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenido"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="reportes"?"active":""}`,onClick:()=>r("reportes"),children:"Exportaci√≥n"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="graficos"?"active":""}`,onClick:()=>r("graficos"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Graficos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-teal rounded-pill",children:"Nuevo"})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="capturas"?"active":""}`,onClick:()=>r("capturas"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Vehiculos",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",v]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="Desactivados"?"active":""}`,onClick:()=>r("Desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Desactivados",i?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-cyan rounded-pill",children:"Reactivar"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:N()})]})})},tl=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5 animate__animated animate__lightSpeedInRight",children:["  ",e.jsx(_e,{Promp:"Panel de Control ",Promp2:"bi bi-car-front-fill fs-4 "}),"   "]}),e.jsx(al,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},il=()=>e.jsx(e.Fragment,{children:e.jsx(tl,{})}),rl=({showModalNot:s,setShowModalNot:r})=>{const[t,n]=a.useState(""),[i,l]=a.useState(""),[o,c]=a.useState("1"),[p,b]=a.useState(""),[m,j]=a.useState(!1),x=()=>{const d=new Date,g=String(d.getDate()).padStart(2,"0"),u=String(d.getMonth()+1).padStart(2,"0"),f=d.getFullYear().toString().slice(-2);return`${g}/${u}/${f}`};a.useEffect(()=>{const d=g=>{g.key==="Escape"&&r(!1)};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]),a.useEffect(()=>{s&&window.history.pushState({modalOpen:!0},"");const d=g=>{s&&r(!1)};return window.addEventListener("popstate",d),()=>window.removeEventListener("popstate",d)},[s]);const h=async d=>{if(d.preventDefault(),t.trim()===""){b("El mensaje no puede estar vac√≠o.");return}if(t.length>280){b("El mensaje no puede exceder los 280 caracteres.");return}if(o===""){b("Por favor, selecciona una car√°tula.");return}b(""),j(!0);try{await Ie(G(F,"db_notificaciones"),{titulo:i,contenido:t,timestamp:Ae(),leido:!1,fecha:x(),caratula:o}),l(""),n(""),c("1"),r()}catch(g){console.error("Error al enviar notificaci√≥n: ",g),b("Error al enviar la notificaci√≥n. Int√©ntalo de nuevo.")}finally{j(!1)}};return e.jsx("div",{className:`modal bg-dark text-white ${s?"show":""}`,tabIndex:"-1",role:"dialog","aria-labelledby":"modalTitle",style:{display:s?"block":"none"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header text-center  bg-gradiante2 bg-opacity-50 ",children:[e.jsxs("h3",{className:"modal-title text-center ",id:"modalTitle",children:["Crear Notificaci√≥n  ",e.jsx("i",{className:"bi bi-envelope-plus ms-2 titilar ",style:{fontSize:"1.8rem"},children:" "})]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>r(!1)})]}),e.jsx("div",{className:"modal-body",children:e.jsx("div",{className:"text-center mt-2 mb-5",children:e.jsxs("form",{onSubmit:h,children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aqu√≠",id:"titulo",value:i,onChange:d=>l(d.target.value)}),e.jsx("label",{className:"text-blue",children:"Titulo de la Notificaci√≥n"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsxs("div",{className:"form-floating",children:[e.jsx("textarea",{className:"form-control shadow-sm",placeholder:"Escribe el mensaje aqu√≠",id:"mensaje",value:t,onChange:d=>n(d.target.value),style:{minHeight:"150px"}}),e.jsx("label",{className:"text-blue",children:"Mensaje"})]})}),e.jsx("div",{className:"mb-3 text-center",children:e.jsx("div",{className:"col-md",children:e.jsxs("div",{className:"form-floating shadow-sm",children:[e.jsxs("select",{className:"form-select text-center",id:"floatingSelectGrid",value:o,onChange:d=>c(d.target.value),children:[e.jsx("option",{value:"1",children:"Informativa "}),e.jsx("option",{value:"2",children:"Paradero üîé"}),e.jsx("option",{value:"3",children:"Evadido üëÆüèª"}),e.jsx("option",{value:"4",children:"Prioritaria ‚≠ê"})]}),e.jsx("label",{className:"text-blue",children:"Selecciona Tipo de Notificaci√≥n"})]})})}),p&&e.jsx("div",{className:"alert alert-danger mt-5",children:p}),m?e.jsx(se,{}):e.jsx("div",{className:"d-grid",children:e.jsx("button",{type:"submit",className:"btn bg-primary border-white border-3 text-white rounded-pill position-absolute top-100 start-50 shadow-sm translate-middle",children:e.jsxs("span",{children:["Crear Notificaci√≥n ",e.jsx("i",{className:"bi bi-send-check-fill ms-2 text-white"})]})})})]})})})]})})})},Ke=s=>{switch(s){case 1:return"üïµüèª";case 2:return"üîé";case 3:return"üëÆüèª";case 4:return"‚≠ê";default:return"üïµüèª"}},Js={1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"},ll=({showModal:s,cerrarModal:r,selectedPersona:t,setSelectedPersona:n,searchQuery:i,setSearchQuery:l,personas:o,asociarCaptura:c,loading:p})=>{const[b,m]=a.useState(!1),j=async()=>{if(t)try{m(!0),await c(),n(null),l(""),r(!1)}finally{m(!1)}};return s?e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1","aria-labelledby":"modalLabel",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0",children:[e.jsxs("div",{className:"modal-header border-0 text-dark",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Persona a la Notificaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(null),l(""),r(!1)},"aria-label":"Cerrar",disabled:p})]}),e.jsxs("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:[t&&e.jsxs("div",{className:"alert alert-primary d-flex align-items-center mb-4 rounded-4 shadow-sm",children:[e.jsx("i",{className:"bi bi-person-check-fill fs-4 me-2"}),e.jsx("strong",{className:"mb-0",children:"Seleccionado:"}),e.jsx("span",{className:"ms-2",children:t.nombre_apellido}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-auto",onClick:()=>n(null),"aria-label":"Quitar selecci√≥n",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsx("label",{htmlFor:"persona",className:"form-label fw-semibold text-dark",children:"Buscar DNI o Nombre:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: Juan P√©rez o 12345678",value:i,onChange:x=>l(x.target.value),disabled:p}),e.jsx("button",{className:"btn btn-outline-danger ms-2",onClick:()=>l(""),disabled:!i||p,"aria-label":"Limpiar b√∫squeda",children:e.jsx("i",{className:"bi bi-trash"})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"fw-bold text-start mb-2",children:"Resultados:"}),e.jsx("ul",{className:"list-group mb-3",style:{maxHeight:"180px",overflowY:"auto"},"aria-live":"polite",children:o.filter(x=>`${x.nombre_apellido} ${x.documento}`.toLowerCase().includes(i.toLowerCase())).map(x=>{var h;return e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",onClick:()=>{n(x),l("")},style:{cursor:"pointer"},tabIndex:0,onKeyDown:d=>{d.key==="Enter"&&(n(x),l(""))},role:"button",children:[e.jsx("img",{src:((h=x.base64)==null?void 0:h.trim())||"defaultSvgUrl",alt:x.nombre_apellido,className:"rounded-circle",style:{width:"45px",height:"45px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("p",{className:"mb-0 fw-semibold",children:x.nombre_apellido}),e.jsx("small",{className:"text-muted",children:x.documento})]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${Js[x.prioridad]||"bg-warning text-dark"}`,children:Ke(x.prioridad)})]},x.id)})})]}),e.jsx("label",{htmlFor:"dropdownMenuButton",className:"form-label fw-semibold text-dark",children:"Buscar en lista:"}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 text-truncate",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:p,children:(t==null?void 0:t.nombre_apellido)||"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"250px",overflowY:"auto"},children:o.map(x=>{var h;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center gap-2",onClick:()=>n(x),type:"button",children:[e.jsx("img",{src:((h=x.base64)==null?void 0:h.trim())||"defaultSvgUrl",alt:x.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[x.nombre_apellido," - ",x.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${Js[x.prioridad]||"bg-warning text-dark"}`,children:Ke(x.prioridad)})]})},x.id)})})]})]}),e.jsxs("div",{className:"modal-footer border-0 pt-0",children:[e.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:j,disabled:p||b||!t,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{children:"Asociando..."})]}):e.jsxs(e.Fragment,{children:["Asociar Persona ",e.jsx("i",{className:"bi bi-person-plus-fill"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(null),l(""),r(!1)},disabled:p||b,children:"Cerrar"})]})]})})}):null},nl=({notificaciones:s,personas:r,vehiculos:t,buscados:n,obtenerNombreCaratula:i,agregarProtocolo:l,abrirModalVehiculo:o,abrirModalBuscados:c,abrirModal:p,abrirModalLink:b,eliminarNotificacion:m,loading:j,eliminarEnlace:x,eliminarAsociacion:h,mostrarNotificacionesAsociadas:d,selectedNotifIdContenido:g,contenidoEditado:u,setContenidoEditado:f,editarContenido:v,setSelectedNotifIdContenido:N,selectedNotifIdTitulo:S,setSelectedNotifIdTitulo:k,setTituloEditado:w,tituloEditado:C,editarTitulo:y})=>{const[_,M]=a.useState(null);return e.jsx("div",{className:"accordion ",id:"accordionNotificaciones",children:s.map((E,I)=>{var P,q,Z,H,A;return e.jsxs("div",{className:"accordion-item mb-3 shadow-sm rounded-1  ",children:[e.jsx("h2",{className:"accordion-header ",id:`heading-${I}`,children:e.jsxs("button",{className:"accordion-button collapsed bg-gradiante2   text-white fw-bold rounded-1",type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse-${I}`,"aria-expanded":"false","aria-controls":`collapse-${I}`,onClick:()=>M(_===I?null:I),children:[e.jsx("span",{className:`p-1 border border-light border-3 rounded-pill me-3 ${{1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"}[E.caratula]||"bg-warning text-dark"} ${_===I?"titilar":""}`,children:i(E.caratula)}),e.jsx("span",{className:"text-capitalize  ",children:E.titulo||"Sin t√≠tulo"})]})})," ",e.jsxs("div",{id:`collapse-${I}`,className:"accordion-collapse collapse","aria-labelledby":`heading-${I}`,"data-bs-parent":"#accordionNotificaciones",children:[e.jsxs("div",{className:"p-3 ",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded ",children:"T√≠tulo"}),E.id===S?e.jsxs("div",{children:[e.jsx("input",{type:"text",value:C,onChange:V=>w(V.target.value),className:"form-control"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>y(E.id),disabled:j,children:j?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios"," ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:E.titulo}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${E.id===S?"btn-danger":"btn-primary"}`,onClick:()=>{E.id===S?k(null):(w(E.titulo),k(E.id))},children:e.jsx("i",{className:`bi ${E.id===S?"bi-x-circle":"bi-pencil"}`})})}),e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Contenido"}),E.id===g?e.jsxs("div",{children:[e.jsx("textarea",{value:u,onChange:V=>f(V.target.value),className:"form-control",rows:"5"}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:()=>v(E.id),disabled:j,children:j?e.jsx("i",{className:"bi bi-floppy2-fill spinner spinner-border-sm"}):e.jsxs(e.Fragment,{children:["Guardar cambios"," ",e.jsx("i",{className:"bi bi-floppy2-fill ms-1"})]})})]}):e.jsx("small",{className:"mb-2 text-muted",children:E.contenido}),e.jsx("div",{className:"d-flex justify-content-end gap-2 p-3",children:e.jsx("button",{className:`btn btn-sm rounded-circle text-white ${E.id===g?"btn-danger":"btn-primary"}`,onClick:()=>{E.id===g?N(null):(f(E.contenido),N(E.id))},children:e.jsx("i",{className:`bi ${E.id===g?"bi-x-circle":"bi-pencil"}`})})}),E.enlace&&E.enlace.length>0?e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded mt-3",children:"Enlaces Asociados"}),e.jsx("ul",{className:"list-unstyled",children:E.enlace.map((V,J)=>e.jsxs("li",{className:"d-flex align-items-center justify-content-center gap-3 p-2 rounded-pill bg-light shadow-sm",children:[e.jsx("i",{className:"bi bi-browser-chrome text-primary girar",style:{fontSize:"20px"}}),e.jsx("a",{href:l(V),target:"_blank",rel:"noopener noreferrer",className:"text-decoration-none text-primary text-center flex-grow-1",style:{maxWidth:"250px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:V}),e.jsx("button",{className:"btn btn-redUi1 btn-sm rounded-circle",onClick:()=>x(J,E.id),children:e.jsx("i",{className:"bi bi-trash text-white"})})]},J))})]}):e.jsx("p",{className:"text-danger mt-3 text-center"}),E.personas_asociadas&&Object.keys(E.personas_asociadas).length>0?e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-center bg-primary fw-semibold shadow-sm text-white py-1 rounded",children:"Personas Asociadas"}),Object.entries(E.personas_asociadas).map(([V,J],ee)=>{var R,Y;const z=r.find(le=>le.id===V)||J;return e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow-sm bg-primary rounded-4 bg-opacity-25",children:[e.jsx("img",{src:((R=z.base64)==null?void 0:R.trim())||"defaultSvgUrl",alt:z.nombre_apellido||"Imagen no disponible",className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[ee+1,". ",z.nombre_apellido]}),((Y=z.asociada_notificacion_id)==null?void 0:Y.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>d(z),style:{cursor:"pointer"},children:["Asociado ",z.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>h(E.id,V,z.nombre_apellido),children:e.jsx("i",{className:"bi bi-trash"})})]},V)})]}):e.jsx("span",{className:"text-danger text-center d-block"}),E.buscados_asociados&&Object.keys(E.buscados_asociados).length>0?e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-center bg-secondaryM fw-semibold shadow-sm text-white py-1 rounded",children:"Buscados SF"}),Object.entries(E.buscados_asociados).map(([V,J],ee)=>{var R,Y;const z=n.find(le=>le.id===V)||J;return e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow-sm bg-secondaryM rounded-4 bg-opacity-25",children:[e.jsx("img",{src:((R=z.base64)==null?void 0:R.trim())||"defaultSvgUrl",alt:z.nombre_apellido||"Imagen no disponible",className:"rounded-circle me-3",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[ee+1,". ",z.nombre_apellido]}),((Y=z.asociada_notificacion_id)==null?void 0:Y.length)>0&&e.jsxs("span",{className:"badge bg-teal text-white ms-3",onClick:()=>d(z),style:{cursor:"pointer"},children:["Asociado ",z.asociada_notificacion_id.length]})]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>h(E.id,V,z.nombre_apellido,"buscado"),children:e.jsx("i",{className:"bi bi-trash"})})]},V)})]}):e.jsx("span",{className:"text-danger text-center d-block"}),E.vehiculos_asociados&&Object.keys(E.vehiculos_asociados).length>0?e.jsxs("div",{className:"mt-3",children:[e.jsx("h6",{className:"text-center bg-orangeDb fw-semibold shadow-sm text-white py-1 rounded",children:"Veh√≠culos Asociados"}),Object.entries(E.vehiculos_asociados).map(([V,J],ee)=>{var R,Y;t.find(le=>le.id===V);const z=((R=J.tipo)==null?void 0:R.toLowerCase())==="auto"?e.jsx("i",{className:"bi bi-car-front-fill fs-4 me-3 text-orange"}):((Y=J.tipo)==null?void 0:Y.toLowerCase())==="moto"?e.jsx("i",{className:"bi bi-bicycle fs-4 me-3 text-orange"}):e.jsx("i",{className:"bi bi-truck fs-4 me-3 text-orange"});return e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2 p-2 shadow-sm bg-orangeDb rounded-4 bg-opacity-25",children:[z,e.jsxs("div",{className:"flex-grow-1 text-center",children:[e.jsxs("span",{children:[ee+1,"."]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-capitalize mx-1 fw-semibold",children:J.dominio||"SIN DOMINIO"}),"- ",J.marca||"Marca N/D"," ",J.modelo||""]}),(()=>{const le=t.find(de=>de.dominio===V);return le&&Array.isArray(le.asociada_notificacion_id)&&le.asociada_notificacion_id.length>0?e.jsxs("span",{className:"badge bg-orange text-white ms-3",onClick:()=>d(le),style:{cursor:"pointer"},children:["Asociado ",le.asociada_notificacion_id.length]}):null})()]}),e.jsx("button",{className:"btn btn-sm btn-redUi1 text-white ms-3",onClick:()=>h(E.id,V,J.dominio,"vehiculo"),children:e.jsx("i",{className:"bi bi-trash"})})]},V)})]}):e.jsx("span",{className:"text-danger text-center d-block"})]})," "]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center my-3 mx-4",children:[e.jsx("small",{className:"text-muted",children:new Date(((P=E.timestamp)==null?void 0:P.seconds)*1e3).toLocaleString()}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("button",{className:"btn btn-greenUi text-white btn-sm rounded-circle",onClick:()=>c(E.id),title:"Asociar Buscados",children:e.jsx("i",{className:"bi bi-cash-coin"})}),E.buscados_asociados&&((q=Object.keys(E.buscados_asociados))==null?void 0:q.length)>0&&e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary",style:{fontSize:"0.7rem"},children:[Object.keys(E.buscados_asociados).length,e.jsx("span",{className:"visually-hidden",children:"buscados asociados"})]})]}),e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("button",{className:"btn btn-orangeDb text-white btn-sm rounded-circle",onClick:()=>o(E.id),title:"Asociar Veh√≠culos",children:e.jsx("i",{className:"bi bi-car-front"})}),E.vehiculos_asociados&&((Z=Object.keys(E.vehiculos_asociados))==null?void 0:Z.length)>0&&e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary",style:{fontSize:"0.7rem"},children:[Object.keys(E.vehiculos_asociados).length,e.jsx("span",{className:"visually-hidden",children:"veh√≠culos asociados"})]})]}),e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("button",{className:"btn btn-cyan text-white btn-sm rounded-circle",onClick:()=>p(E.id),title:"Asociar Personas",children:e.jsx("i",{className:"bi bi-person-fill-add"})}),E.personas_asociadas&&((H=Object.keys(E.personas_asociadas))==null?void 0:H.length)>0&&e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary",style:{fontSize:"0.7rem"},children:[Object.keys(E.personas_asociadas).length,e.jsx("span",{className:"visually-hidden",children:"Personas asociadas"})]})]}),e.jsxs("div",{className:"position-relative d-inline-block",children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle",onClick:()=>b(E.id),title:"Asociar Enlaces",children:e.jsx("i",{className:"bi bi-link-45deg"})}),((A=E.enlace)==null?void 0:A.length)>0&&e.jsxs("span",{className:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-secondary",style:{fontSize:"0.7rem"},children:[E.enlace.length,e.jsx("span",{className:"visually-hidden",children:"Enlaces asociados"})]})]}),e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:()=>m(E.id),disabled:j,title:"Eliminar Notificaci√≥n",children:e.jsx("i",{className:"bi bi-trash3-fill"})})]})]})]},E.id)})})},Ys={moto:"bg-teal",auto:"bg-primary"},ol=({showModal:s,cerrarModal:r,selectedVehiculo:t,setSelectedVehiculo:n,searchQuery:i,setSearchQuery:l,vehiculos:o,asociarVehiculo:c,loading:p})=>{const[b,m]=a.useState(!1),j=async()=>{try{m(!0),await c(),n(null),l(""),r(!1)}finally{m(!1)}};return s?e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1","aria-labelledby":"modalLabel",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0",children:[e.jsxs("div",{className:"modal-header border-0 text-dark",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Veh√≠culo a la Notificaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(null),l(""),r(!1)},"aria-label":"Cerrar",disabled:p})]}),e.jsxs("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:[t&&e.jsxs("div",{className:"alert alert-primary d-flex align-items-center mb-4 rounded-4 shadow-sm",children:[e.jsx("i",{className:"bi bi-car-front-fill fs-4 me-2"}),e.jsx("strong",{className:"mb-0 titilar",children:"Seleccionado:"}),e.jsxs("span",{className:"ms-2",children:[t.dominio," - ",t.marca," ",t.modelo]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-auto",onClick:()=>n(null),"aria-label":"Quitar selecci√≥n",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsx("label",{htmlFor:"vehiculo",className:"form-label fw-semibold text-dark",children:"Buscar Dominio o Marca/Modelo:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: ABC123 o Toyota Corolla",value:i,onChange:x=>l(x.target.value),disabled:p}),e.jsx("button",{className:"btn btn-outline-danger ms-2",onClick:()=>l(""),disabled:!i||p,"aria-label":"Limpiar b√∫squeda",children:e.jsx("i",{className:"bi bi-trash"})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"fw-bold text-start mb-2",children:"Resultados:"}),e.jsx("ul",{className:"list-group mb-3",style:{maxHeight:"180px",overflowY:"auto"},"aria-live":"polite",children:o.filter(x=>`${x.dominio} ${x.marca} ${x.modelo}`.toLowerCase().includes(i.toLowerCase())).map(x=>{var h;return e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",onClick:()=>{n(x),l("")},style:{cursor:"pointer"},tabIndex:0,onKeyDown:d=>{d.key==="Enter"&&(n(x),l(""))},role:"button",children:[e.jsx("i",{className:"bi bi-car-front-fill fs-3 text-primary"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("p",{className:"mb-0 fw-semibold",children:[x.marca," ",x.modelo]}),e.jsx("small",{className:"text-muted",children:x.dominio||"SIN DOMINIO"})]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${Ys[x.tipo]||"bg-warning text-dark"}`,children:((h=x.tipo)==null?void 0:h.toUpperCase())||"SIN TIPO"})]},x.id)})})]}),e.jsx("label",{className:"form-label fw-semibold text-dark",children:"Buscar en lista:"}),e.jsxs("div",{className:"dropdown mb-3",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 text-truncate",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:p,children:t?`${t.marca} ${t.modelo}`:"Selecciona un veh√≠culo"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"250px",overflowY:"auto"},children:o.map(x=>{var h;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center gap-2",type:"button",onClick:()=>n(x),children:[e.jsx("i",{className:"bi bi-car-front-fill fs-3 text-primary"}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[x.dominio," - ",x.marca," ",x.modelo]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${Ys[x.tipo]||"bg-pink"}`,children:((h=x.tipo)==null?void 0:h.toUpperCase())||"SIN TIPO"})]})},x.id)})})]})]}),e.jsxs("div",{className:"modal-footer border-0 pt-0",children:[e.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:j,disabled:p||b||!t,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{children:"Asociando..."})]}):e.jsxs(e.Fragment,{children:["Asociar Veh√≠culo ",e.jsx("i",{className:"bi bi-car-front-fill"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(null),l(""),r(!1)},disabled:p||b,children:"Cerrar"})]})]})})}):null},Zs={1:"bg-teal",2:"bg-primaryMuiBlue",3:"bg-danger"},cl=({showModal:s,cerrarModal:r,selectedPersona:t,setSelectedPersona:n,searchQuery:i,setSearchQuery:l,personas:o,asociarCaptura:c,loading:p})=>{const[b,m]=a.useState(!1),j=async()=>{try{m(!0),await c(),n(null),l(""),r(!1)}finally{m(!1)}};return s?e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1","aria-labelledby":"modalLabel",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content p-3 bg-gradient rounded-4 shadow-lg border-0 ",children:[e.jsxs("div",{className:"modal-header border-0 text-dark",children:[e.jsx("h5",{className:"modal-title",id:"modalLabel",children:"Asociar Buscados SF a la Notificaci√≥n"}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(null),l(""),r(!1)},"aria-label":"Cerrar",disabled:p})]}),e.jsxs("div",{className:"modal-body bg-light rounded-4 p-4 shadow-sm",children:[t&&e.jsxs("div",{className:"alert alert-primary d-flex align-items-center mb-4 rounded-4 shadow-sm",children:[e.jsx("i",{className:"bi bi-person-check-fill fs-4 me-2"}),e.jsx("strong",{className:"mb-0",children:"Seleccionado:"}),e.jsx("span",{className:"ms-2",children:t.nombre_apellido}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-auto",onClick:()=>n(null),"aria-label":"Quitar selecci√≥n",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsx("label",{htmlFor:"persona",className:"form-label fw-semibold text-dark",children:"Buscar DNI o Nombre:"}),e.jsxs("div",{className:"d-flex mb-3",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"Ej: Juan P√©rez o 12345678",value:i,onChange:x=>l(x.target.value),disabled:p}),e.jsx("button",{className:"btn btn-outline-danger ms-2",onClick:()=>l(""),disabled:!i||p,"aria-label":"Limpiar b√∫squeda",children:e.jsx("i",{className:"bi bi-trash"})})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"fw-bold text-start mb-2",children:"Resultados:"}),e.jsx("ul",{className:"list-group mb-3",style:{maxHeight:"180px",overflowY:"auto"},"aria-live":"polite",children:o.filter(x=>`${x.nombre_apellido} ${x.documento}`.toLowerCase().includes(i.toLowerCase())).map(x=>{var h;return e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",onClick:()=>{n(x),l("")},style:{cursor:"pointer"},tabIndex:0,onKeyDown:d=>{d.key==="Enter"&&(n(x),l(""))},role:"button",children:[e.jsx("img",{src:((h=x.base64)==null?void 0:h.trim())||"/images/default.svg",alt:x.nombre_apellido,className:"rounded-circle",style:{width:"45px",height:"45px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("p",{className:"mb-0 fw-semibold",children:x.nombre_apellido}),e.jsx("small",{className:"text-muted",children:x.documento})]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${Zs[x.prioridad]||"bg-warning text-dark"}`,children:Ke(x.prioridad)})]},x.id)})})]}),e.jsx("label",{htmlFor:"dropdownMenuButton",className:"form-label fw-semibold text-dark",children:"Buscar en lista:"}),e.jsxs("div",{className:"dropdown",children:[e.jsx("button",{className:"btn btn-light dropdown-toggle w-100 text-truncate",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",disabled:p,children:t?t.nombre_apellido:"Selecciona una persona"}),e.jsx("ul",{className:"dropdown-menu w-100","aria-labelledby":"dropdownMenuButton",style:{maxHeight:"250px",overflowY:"auto"},children:o.map(x=>{var h;return e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item d-flex align-items-center gap-2",onClick:()=>n(x),type:"button",children:[e.jsx("img",{src:((h=x.base64)==null?void 0:h.trim())||"/images/default.svg",alt:x.nombre_apellido,className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsxs("div",{className:"flex-grow-1 text-truncate",children:[x.nombre_apellido," - ",x.documento]}),e.jsx("span",{className:`badge rounded-pill border border-white border-2 ${Zs[x.prioridad]||"bg-warning text-dark"}`,children:Ke(x.prioridad)})]})},x.id)})})]})]}),e.jsxs("div",{className:"modal-footer border-0 pt-0",children:[e.jsx("button",{type:"button",className:"btn btn-primary d-flex align-items-center gap-2",onClick:j,disabled:p||b||!t,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),e.jsx("span",{children:"Asociando..."})]}):e.jsxs(e.Fragment,{children:["Asociar Persona ",e.jsx("i",{className:"bi bi-person-plus-fill"})]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{n(null),l(""),r(!1)},disabled:p||b,children:"Cerrar"})]})]})})}):null};function dl(){const[s,r]=a.useState([]),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState([]),[p,b]=a.useState(!1),[m,j]=a.useState(!1),[x,h]=a.useState(!1),[d,g]=a.useState(!1),[u,f]=a.useState(null),[v,N]=a.useState(null),[S,k]=a.useState(null),[w,C]=a.useState(""),[y,_]=a.useState(""),[M,E]=a.useState(""),[I,P]=a.useState(!1),[q,Z]=a.useState(""),[H,A]=a.useState(""),[V,J]=a.useState(""),[ee,z]=a.useState("desc"),[R,Y]=a.useState(""),[le,de]=a.useState(!1),he=Q=>{if(Q!=null&&Q.asociada_notificacion_id&&Array.isArray(Q.asociada_notificacion_id)){const me=Q.asociada_notificacion_id.map((ue,be)=>`üîπ ${be+1}. ${ue}`).join(`
`);alert(`üìå Notificaciones asociadas  ${Q.nombre_apellido||""}:

${me}`)}else alert(`‚ùå ${Q.nombre_apellido||"Esta persona"} no tiene notificaciones asociadas.`)},ie=Q=>{z(Q.target.value),T(Q.target.value)},T=(Q,me)=>{let ue=[...s];Q==="asc"?ue.sort((be,ge)=>{var ze,Ee;return((ze=be.timestamp)==null?void 0:ze.seconds)-((Ee=ge.timestamp)==null?void 0:Ee.seconds)}):ue.sort((be,ge)=>{var ze,Ee;return((ze=ge.timestamp)==null?void 0:ze.seconds)-((Ee=be.timestamp)==null?void 0:Ee.seconds)}),r(ue)};a.useEffect(()=>{P(!0);const Q=ye(G(F,"db_notificaciones"),Le("timestamp","desc")),me=Me(Q,ue=>{const be=ue.docs.map(ge=>({id:ge.id,...ge.data()}));r(be),P(!1)},ue=>{console.error("Error al obtener notificaciones:",ue),P(!1)});return()=>me()},[]),a.useEffect(()=>{(async()=>{const me=ye(G(F,"db_buscados"),Le("nombre_apellido","asc")),be=(await ne(me)).docs.map(ge=>({id:ge.id,...ge.data()}));l(be)})()},[]),a.useEffect(()=>{(async()=>{const me=ye(G(F,"db_personas"),Le("nombre_apellido","asc")),be=(await ne(me)).docs.map(ge=>({id:ge.id,...ge.data()}));n(be)})()},[]),a.useEffect(()=>{(async()=>{const me=ye(G(F,"db_vehiculos"),Le("dominio","asc")),be=(await ne(me)).docs.map(ge=>({id:ge.id,...ge.data()}));c(be)})()},[]);const B=async(Q,me)=>{try{if(!window.confirm("¬øDesea eliminar este enlace?"))return;const be=$(F,"db_notificaciones",me),ge=await De(be);if(ge.exists()){const ze=ge.data();if(Array.isArray(ze.enlace)){const Ee=ze.enlace.filter((Te,Ue)=>Ue!==Q);await K(be,{enlace:Ee}),alert("Enlace eliminado con exito ")}else alert("El campo 'enlace' no existe o no es un array.")}else alert("No se encontr√≥ el documento con el ID proporcionado.")}catch(ue){alert.error("Error al eliminar el enlace:",ue)}},te=async Q=>{if(window.confirm("¬øEst√°s seguro de que deseas eliminar esta notificaci√≥n?")){P(!0);try{const ue=$(F,"db_notificaciones",Q),be=await De(ue);if(be.exists()){const ge=be.data();await we($(F,"db_notificaciones_desactivados",Q),{...ge,desactivadoEn:new Date}),await Ne(ue),r(ze=>ze.filter(Ee=>Ee.id!==Q)),alert("Se elimin√≥ la notificaci√≥n y se archiv√≥ en desactivados.")}else alert("No se encontr√≥ la notificaci√≥n para eliminar.")}catch(ue){console.error("Error al eliminar la notificaci√≥n:",ue),alert("Hubo un error al eliminar la notificaci√≥n.")}finally{P(!1)}}},ae=Q=>{f(Q),h(!0)},O=Q=>{f(Q),b(!0)},D=Q=>{f(Q),j(!0)},W=()=>{b(!1),f(null),C("")},X=Q=>{f(Q),g(!0)},L=async()=>{if(!u||!w){alert("Por favor, selecciona una persona para asociar.");return}try{const Q=w.id,{base64:me,...ue}=w;await Promise.all([K($(F,"db_notificaciones",u),{[`personas_asociadas.${Q}`]:{...ue,id:Q,asociadoEn:new Date}}),K($(F,"db_personas",Q),{asociada_notificacion_id:Pe(u)})]),alert(`La persona ${w.nombre_apellido} se asoci√≥ a la notificaci√≥n.`),C(null),Y(""),W(!1)}catch(Q){console.error("Error al asociar persona:",Q),alert("Hubo un error al asociar la persona.")}},re=async()=>{if(!u||!y){alert("Por favor, selecciona un buscado para asociar.");return}try{const Q=y.id,{base64:me,...ue}=y;await Promise.all([K($(F,"db_notificaciones",u),{[`buscados_asociados.${Q}`]:{...ue,id:Q,asociadoEn:new Date}}),K($(F,"db_buscados",Q),{asociada_notificacion_id:Pe(u)})]),alert(`La persona ${y.nombre_apellido} se asoci√≥ a la notificaci√≥n.`),_(null),Y(""),W(!1)}catch(Q){console.error("Error al asociar persona:",Q),alert("Hubo un error al asociar la persona.")}},U=async()=>{if(u&&M)try{const Q=ye(G(F,"db_vehiculos"),Oe("dominio","==",M.dominio)),me=await ne(Q);if(me.empty)alert("No se encontr√≥ el veh√≠culo seleccionado.");else{const be=me.docs[0].id;await Promise.all([K($(F,"db_notificaciones",u),{[`vehiculos_asociados.${M.id}`]:{...M,id:be,asociadoEn:new Date}}),K($(F,"db_vehiculos",be),{asociada_notificacion_id:Pe(u)})]),alert(`El veh√≠culo ${M.dominio} se asoci√≥ a la notificaci√≥n.`),W(!1)}}catch(Q){console.error("Error al asociar veh√≠culo:",Q),alert("Hubo un error al asociar el veh√≠culo.")}else alert("Por favor, selecciona un veh√≠culo para asociar.")},ce=async(Q,me,ue,be="persona")=>{let ge="";switch(be){case"persona":ge=`¬øEst√°s seguro de que deseas eliminar la asociaci√≥n de ${ue} con la notificaci√≥n?`;break;case"vehiculo":ge=`¬øEst√°s seguro de que deseas eliminar la asociaci√≥n del veh√≠culo  ${ue} con la notificaci√≥n?`;break;case"buscado":ge=`¬øEst√°s seguro de que deseas eliminar la asociaci√≥n del buscado ${ue.nombre_apellido} con la notificaci√≥n?`;break;case"link":ge=`¬øEst√°s seguro de que deseas eliminar el enlace ${ue} de la notificaci√≥n?`;break;default:alert("Tipo no reconocido.");return}if(!window.confirm(ge)){alert("La asociaci√≥n no fue eliminada.");return}P(!0);try{const Ee=$(F,"db_notificaciones",Q);if(be==="persona"){const Te=await De(Ee);if(Te.exists()){const Be={...Te.data().personas_asociadas};delete Be[me],await K(Ee,{personas_asociadas:Be})}const Ue=$(F,"db_personas",me);await K(Ue,{asociada_notificacion_id:Re(Q)}),alert(`Se elimin√≥ la asociaci√≥n de la persona ${ue} con la notificaci√≥n.`)}else if(be==="buscado"){const Te=await De(Ee);if(Te.exists()){const Be={...Te.data().buscados_asociados};delete Be[me],await K(Ee,{buscados_asociados:Be})}const Ue=$(F,"db_buscados",me);await K(Ue,{asociada_notificacion_id:Re(Q)}),alert(`Se elimin√≥ la asociaci√≥n del buscado ${ue} con la notificaci√≥n.`)}else if(be==="vehiculo"){const Te=await De(Ee);if(Te.exists()){const Be={...Te.data().vehiculos_asociados};delete Be[me],await K(Ee,{vehiculos_asociados:Be})}const Ue=$(F,"db_vehiculos",me);await K(Ue,{asociada_notificacion_id:Re(Q)})}else be==="link"&&(await K(Ee,{enlace:Re(ue)}),alert(`Se elimin√≥ el enlace ${ue} de la notificaci√≥n.`))}catch(Ee){console.error("Error al eliminar la asociaci√≥n:",Ee),alert("Hubo un error al eliminar la asociaci√≥n.")}finally{P(!1)}},oe=Q=>{switch(Q){case"1":return"üì¢";case"2":return"üîé";case"3":return"üëÆüèª";case"4":return"‚≠ê";default:return"No definida"}},xe=Q=>/^https?:\/\//.test(Q)?Q:`https://${Q}`,Se=async Q=>{if(H.trim()){P(!0);try{const me=$(F,"db_notificaciones",Q);await K(me,{contenido:H}),alert("Contenido actualizado correctamente"),N(null)}catch(me){console.error("Error al actualizar contenido:",me),alert("Hubo un error al actualizar el contenido.")}finally{P(!1)}}else alert("El contenido no puede estar vac√≠o")},Ge=async Q=>{if(V.trim()){P(!0);try{const me=$(F,"db_notificaciones",Q);await K(me,{titulo:V}),alert("titulo actualizado correctamente"),k(null)}catch(me){console.error("Error al actualizar titulo:",me),alert("Hubo un error al actualizar el titulo.")}finally{P(!1)}}else alert("El titulo no puede estar vac√≠o")};return e.jsxs("div",{children:[e.jsxs("div",{className:"row g-3 justify-content-center align-items-center mt-1 animate__animated  animate__slideInUp",children:[e.jsxs("div",{className:"container",children:[le&&e.jsx(ca,{Date1:"Ninguno",Date2:"Desactivar Busqueda",onCerrar:()=>de(!1),color:"info"}),!le&&e.jsx("div",{className:"d-flex justify-content-end mb-1  ",children:e.jsxs("button",{className:"btn  fw-semibold",onClick:()=>de(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 titilar text-light "})," ",e.jsx("small",{className:"text-light",children:"Ayuda"})]})})]}),e.jsxs("div",{className:"input-group mb-4",children:[e.jsx("span",{className:"input-group-text bg-light bg-opacity-50 text-white fw-bold",children:"Orden"}),e.jsxs("select",{className:"form-select bg-light bg-opacity-75 text-center border-0 ",id:"floatingSelectOrder",value:ee,onChange:ie,children:[e.jsx("option",{value:"desc",children:"üì• M√°s recientes primero"}),e.jsx("option",{value:"asc",children:"üì§ M√°s antiguos primero"})]})]})]}),I?e.jsx("div",{className:"d-flex justify-content-center align-items-center py-5",children:e.jsx("i",{className:"bi bi-gear-fill text-white girar display-1"})}):e.jsx(nl,{notificaciones:s,personas:t,vehiculos:o,buscados:i,obtenerNombreCaratula:oe,agregarProtocolo:xe,abrirModal:O,abrirModalLink:X,eliminarNotificacion:te,loading:I,eliminarEnlace:B,eliminarAsociacion:ce,mostrarNotificacionesAsociadas:he,selectedNotifIdContenido:v,contenidoEditado:H,setContenidoEditado:A,editarContenido:Se,setSelectedNotifIdContenido:N,selectedNotifIdTitulo:S,setSelectedNotifIdTitulo:k,setTituloEditado:J,tituloEditado:V,editarTitulo:Ge,abrirModalVehiculo:ae,abrirModalBuscados:D}),e.jsx(ll,{showModal:p,cerrarModal:W,selectedPersona:w,setSelectedPersona:C,searchQuery:R,setSearchQuery:Y,personas:t,asociarCaptura:L,loading:I}),e.jsx(cl,{showModal:m,cerrarModal:j,selectedPersona:y,setSelectedPersona:_,searchQuery:R,setSearchQuery:Y,personas:i,asociarCaptura:re,loading:I}),e.jsx(ol,{showModal:x,cerrarModal:h,selectedVehiculo:M,setSelectedVehiculo:E,searchQuery:R,setSearchQuery:Y,vehiculos:o,asociarVehiculo:U,loading:I}),e.jsx(oa,{showModalLink:d,setShowModalLink:g,selectedNotifId:u,setNewLink:Z,newLink:q,setNotificaciones:r})]})}const ml=()=>{const[s,r]=a.useState(!1);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsxs("div",{className:"col-12 col-md-6 text-white",children:[e.jsxs("div",{className:"p-4 bg-dark bg-opacity-50 rounded-4 shadow-lg my-4 text-center text-capitalize",children:[e.jsx("h1",{className:"fw-bold display-6 animate__animated animate__backInDown",children:"Nueva Notificaci√≥n"}),e.jsx("p",{className:"lead text-white text-center mt-4 animate__rollIn animate__animated",children:"¬øQuer√©s registrar una nueva Notificaci√≥n? Comenz√° completando los datos necesarios para dar inicio al proceso."}),e.jsx("div",{className:"text-center mt-4 animate__animated  animate__slideInUp",children:e.jsx("button",{className:"btn btn-light fw-semibold px-4 ",onClick:()=>r(!0),children:"Nueva Notificaci√≥n"})})]}),e.jsx(rl,{showModalNot:s,setShowModalNot:r}),e.jsx("div",{className:"mt-3 small d-flex flex-column align-items-end",children:e.jsxs("p",{className:"mb-0",children:["Soporte: ",e.jsx("a",{href:"mailto:ticsdesarrollo2024@gmail.com",className:"text-white text-decoration-underline",children:"ticsdesarrollo2024@gmail.com"})]})})]}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsx(dl,{})})]})})})},ul=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Crear Notificaci√≥n - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5 ",children:[e.jsx(_e,{Promp:"Crear Notificaci√≥n ",Promp2:" bi bi-megaphone fs-4 "}),e.jsx("p",{})]}),e.jsx("div",{className:"my-5",children:e.jsx(ml,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},hl=()=>e.jsx(e.Fragment,{children:e.jsx(ul,{})}),xl=()=>e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center  mt-5 text-light",children:[e.jsx("span",{className:"display-4 mb-2 animate__rotateIn animate__animated ",children:"¬°Bienvenido a Buscados SF!"}),e.jsx("span",{className:"mb-5 ",children:"Este panel de control te permite gestionar buscados SF, ver estad√≠sticas y configurar las opciones del sistema."}),e.jsxs("div",{className:"row justify-content-center",children:[e.jsxs("div",{className:"col-md-6 d-flex flex-column justify-content-center align-items-center mb-4 mb-md-0",children:[e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-asterisk p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2 animate__animated animate__lightSpeedInRight ",children:"Desde aqu√≠ podr√°s administrar los recursos del sistema de forma f√°cil y eficiente."})]}),e.jsxs("p",{className:"text-center d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"bi bi-lightbulb  p-3 rounded-circle me-3 bg-dark bg-opacity-25"}),e.jsx("span",{className:"p-2 animate__animated animate__lightSpeedInRight ",children:"Ante cualquier inconveniente, no dudes en solicitar asistencia t√©cnica."})]})]}),e.jsx("div",{className:"col-md-6 d-flex justify-content-center align-items-center",children:e.jsx("img",{src:Na,alt:"Panel de control gr√°fico",className:"img-fluid p-2 rounded-circle shadow",style:{maxWidth:"300px",height:"auto"}})})]})]}),bl=({loading:s,buscados:r})=>{const[t,n]=a.useState([]),[i,l]=a.useState([]);a.useEffect(()=>{Array.isArray(r)&&r.length>0?n(r):n([])},[r]);const o=["captura","date","descripcion_fisica","documento","entidad","motivo_captura","nombre_apellido","montoRecompensa","sexo","usuario"],c={captura:"Captura",date:"Fecha",descripcion_fisica:"Datos de la Persona",documento:"Documento",entidad:"Entidad",motivo_captura:"Motivo de Captura",nombre_apellido:"Nombre y Apellido",montoRecompensa:"Monto Recompensa",sexo:"Sexo",usuario:"Usuario"},p=x=>{l(h=>h.includes(x)?h.filter(d=>d!==x):[...h,x])},b=()=>l(o),m=()=>l([]),j=()=>{if(t.length===0||i.length===0)return;const x=t.map(g=>{const u={};return i.forEach(f=>{u[c[f]||f]=g[f]??""}),u}),h=ke.json_to_sheet(x),d=ke.book_new();ke.book_append_sheet(d,h,"Datos Seleccionados Buscados SF"),qe(d,"Datos_Seleccionados_Buscados_SF.xlsx")};return e.jsx(e.Fragment,{children:s?e.jsx(se,{leyendaSet:"Exportar - Cx2"}):e.jsx("div",{className:"container-lg mt-5 mt-md-0 text-white",children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column text-center",children:[e.jsxs("span",{className:"mb-4 display-5",children:["Exportar Datos ",e.jsx("i",{className:"bi bi-filetype-xml"})]}),e.jsx("h5",{className:"mb-5 fw-light",children:"Selecciona los campos que deseas incluir en la exportaci√≥n."}),e.jsxs("div",{className:"d-flex justify-content-center mb-4 flex-wrap gap-2",children:[e.jsx("button",{className:"btn btn-outline-light",onClick:b,children:"Seleccionar todos"}),e.jsx("button",{className:"btn btn-outline-light",onClick:m,children:"Limpiar selecci√≥n"})]}),e.jsx("form",{className:"mb-4 w-100 px-3",children:e.jsx("div",{className:"row p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg border border-1",children:o.map(x=>e.jsx("div",{className:"col-12 col-sm-6 col-md-4 col-lg-3 mb-3",children:e.jsxs("div",{className:"form-check w-100 d-flex align-items-center",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:x,value:x,onChange:()=>p(x),checked:i.includes(x)}),e.jsx("label",{className:"form-check-label ms-2",htmlFor:x,children:c[x]||x})]})},x))})}),i.length>0&&e.jsx("div",{className:"text-center",children:e.jsxs("button",{className:"btn bg-green bg-opacity-50 text-white fw-semibold",onClick:j,children:["Descargar datos seleccionados"," ",e.jsx("i",{className:"bi bi-file-earmark-arrow-down-fill ms-2"})]})})]})})})},Sa=({data1:s,data2:r})=>{var x;const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),[o,c]=a.useState(""),b=(()=>{const h=localStorage.getItem("user");return h?JSON.parse(h):null})(),m=async h=>{if(window.confirm("¬øEst√°s seguro de que deseas eliminar esta persona?"))try{const d=$(F,"db_buscados_desactivados",h.id),g=new Date,u=`${g.getDate().toString().padStart(2,"0")}/${(g.getMonth()+1).toString().padStart(2,"0")}/${g.getFullYear().toString().slice(-2)}`;await we(d,{...h,usuario_baja:b.email||"usuario_desconocido",usuario_baja_fecha:u});const f=$(F,"db_buscados",h.id);await Ne(f),r(),c("Persona eliminada y copiada a la colecci√≥n de desactivados."),setTimeout(()=>c(""),3e3)}catch(d){console.error("Error al eliminar persona: ",d),c("Error al eliminar la persona. Int√©ntalo de nuevo."),setTimeout(()=>c(""),3e3)}},j=h=>{m(h),l()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-trash3-fill"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("h5",{className:"modal-title ",children:"Eliminar Persona"}),e.jsx("button",{type:"button",className:"btn-close ",onClick:l})]}),"  ",e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(x=s.base64)==null?void 0:x.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-danger  bg-redW rounded p-1",children:["      ",e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas eliminar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:l,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:()=>{j(s)},children:"Confirmar Eliminaci√≥n"})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},pl=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!0),l=()=>n(!1),[o,c]=a.useState(!1),[p,b]=a.useState(s.descripcion_fisica),[m,j]=a.useState(s.documento),[x,h]=a.useState(s.entidad),[d,g]=a.useState(s.motivo_captura),[u,f]=a.useState(s.nombre_apellido),[v,N]=a.useState(s.prioridad),[S,k]=a.useState(s.sexo),[w,C]=a.useState(s.numero_contacto),[y,_]=a.useState(s.base64),[M,E]=a.useState("edicion desde menu de capturas"),[I,P]=a.useState(s.paradero),[q,Z]=a.useState(s.alerta),[H,A]=a.useState(s.montoRecompensa||""),[V,J]=a.useState(!1),[ee,z]=a.useState(!1),[R,Y]=a.useState(!1),le=()=>{const D={nombre_apellido:u,documento:m,sexo:S,descripcion_fisica:p,entidad:x,motivo_captura:d,numero_contacto:w,prioridad:v,alerta:q,paradero:I,montoRecompensa:H};return["nombre_apellido","documento","sexo","descripcion_fisica","entidad","motivo_captura","numero_contacto","prioridad","alerta","paradero","montoRecompensa"].filter(X=>D[X]!==s[X])},de=()=>J(D=>!D),he=()=>z(D=>!D),ie=()=>Y(D=>!D),T=D=>{const W=D.target.files[0];if(W){const X=new FileReader;X.onloadend=()=>_(X.result),X.readAsDataURL(W)}else alert("Por favor, selecciona un archivo de imagen v√°lido.")},te=(()=>{const D=localStorage.getItem("user");return D?JSON.parse(D):null})(),ae=async()=>{const D=H===""?null:Number(H),W=$(F,"db_buscados",s.id),X=le();try{c(!0);const L=new Date,re=`${L.getDate().toString().padStart(2,"0")}/${(L.getMonth()+1).toString().padStart(2,"0")}/${L.getFullYear().toString().slice(-2)}`;await K(W,{descripcion_fisica:p,documento:m,entidad:x,motivo_captura:d,nombre_apellido:u,prioridad:v,sexo:S,numero_contacto:w,alerta:q,base64:y,paradero:I,montoRecompensa:D,ediciones:M.trim()?[...s.ediciones||[],{motivo:M,usuario:(te==null?void 0:te.email)||"usuario_desconocido",fecha:re,campos:X}]:s.ediciones||[]}),r(),alert("Los cambios se han guardado correctamente.")}catch(L){console.error("Error al actualizar la persona: ",L),alert("Error al guardar los cambios. Int√©ntalo de nuevo.")}finally{c(!1)}},O=D=>{const W=parseInt(D.target.value,10);N(W),W===2?(P(!0),Z(!1)):W===1?(P(!1),Z(!1)):W===3?(Z(!0),P(!1)):W===4&&(P(!1),Z(!1))};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle m-1",onClick:i,children:e.jsx("i",{className:"bi bi-pen"})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("img",{src:"img/asistente.gif",alt:"Asistente",style:{width:"60px",height:"60px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border"}),e.jsx("h5",{className:"modal-title mx-4",children:"Asistente de Edici√≥n"}),e.jsx("button",{type:"button",className:"btn-close",onClick:l})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:`col-3 mt-3 d-flex align-items-center ${V?"titilar":""}`,children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},onClick:de,children:[e.jsx("img",{src:y||"https://via.placeholder.com/40",alt:(y==null?void 0:y.nombre_apellido)||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:V?"Editando":"Editar"})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"text",className:"form-control",value:u,onChange:D=>f(D.target.value)}),e.jsx("label",{className:" badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{type:"number",className:"form-control",value:m,onChange:D=>j(D.target.value)}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select text-center",value:S,onChange:D=>k(D.target.value),children:[e.jsx("option",{value:"",children:"Seleccione una Opci√≥n"}),e.jsx("option",{value:"masculino",children:"Masculino üë®"}),e.jsx("option",{value:"femenino",children:"Femenino üë©"}),e.jsx("option",{value:"otros",children:"Otros üë≠üèª"})]}),e.jsx("label",{className:" fw-semibold opacity-75",children:"Sexo"})]})})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2",children:"Monto de Recompensa üí∞"})}),e.jsx("input",{type:"number",className:"form-control bg-blueW2",value:H,onChange:D=>A(D.target.value),placeholder:"Ej: 50000"})]})}),e.jsxs("div",{className:"btn-group mt-3",role:"group","aria-label":"Basic example",children:[e.jsx("button",{type:"button",className:`btn btn-secondaryM text-white ${R?"titilar":""}`,onClick:ie,children:R?e.jsx(e.Fragment,{children:"Editando Datos de Captura "}):"Datos de Captura"}),e.jsx("button",{type:"button",className:`btn btn-primary text-white ${ee?"titilar":""}`,onClick:he,children:ee?e.jsx(e.Fragment,{children:"Editando Descripciones"}):"Descripciones"})]}),V&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Editar Fotograf√≠a ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:de})}),e.jsxs("div",{className:"my-3 text-center text-purple",children:[e.jsx("input",{type:"file",className:"form-control",onChange:T}),y&&e.jsx("img",{src:y,alt:"Imagen previa",className:"img-fluid mt-5",style:{maxWidth:"300px"}})]})]})]}),R&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Datos de la Captura ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-2 text-center",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:ie})}),e.jsx("span",{className:"badge text-bg-secondaryM text-white me-2 ",children:"Atenci√≥n "}),e.jsxs("small",{children:["La prioridad ",e.jsx("strong",{children:"modifica el contexto"})," de la captura"]})]}),e.jsxs("div",{className:"form-floating ",children:[e.jsxs("select",{className:"form-select text-center shadow-sm border border-secondaryM mb-3  border-opacity-50 ",disabled:!0,value:v,onChange:O,children:[e.jsx("option",{value:"",children:"Seleccione una Opci√≥n"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero üîé"}),e.jsx("option",{value:"3",children:"Evadido üö®"}),e.jsx("option",{value:"4",children:"Prioridad ‚≠ê"})]}),e.jsx("label",{className:"fw-semibold opacity-75 ms-2",children:"Prioridad"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Entidad que solicita captura"})}),e.jsx("input",{className:"form-control bg-blueW2",value:x,onChange:D=>h(D.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Numero de Contacto Entidad "})}),e.jsx("input",{className:"form-control bg-blueW2",value:w,onChange:D=>C(D.target.value)})]})]}),ee&&e.jsxs("div",{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end  mt-4",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM  "}),"Descripciones ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"button",className:"btn-close mt-1","aria-label":"Close",onClick:he})}),e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Descripci√≥n Fisica "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:p,onChange:D=>b(D.target.value),style:{minHeight:"160px"}})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-secondary me-2 ",children:"Motivo Captura "})}),e.jsx("textarea",{className:"form-control bg-blueW2",value:d,onChange:D=>g(D.target.value),style:{minHeight:"150px"}})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:l,children:e.jsx("i",{className:"bi bi-x-circle"})}),e.jsx("button",{className:"btn btn-primary text-white btn-sm rounded-circle",onClick:ae,disabled:o,children:o?e.jsx("i",{className:"bi bi-floppy2 titilar"}):e.jsx("i",{className:"bi bi-floppy2"})})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},ka=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n,fetchBuscados:i})=>{const[l,o]=a.useState(!1),[c,p]=a.useState(""),[b,m]=a.useState(!1),j=()=>o(!0),x=()=>o(!1),h=()=>{n([])},g=(()=>{const f=localStorage.getItem("user");return f?JSON.parse(f):null})(),u=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas copiar estas personas a la colecci√≥n de desactivados?"))){m(!0);try{const N=r.filter(S=>s.includes(S.id)).map(async S=>{const k=G(F,"db_buscados_desactivados"),w=new Date,C=`${w.getDate().toString().padStart(2,"0")}/${(w.getMonth()+1).toString().padStart(2,"0")}/${w.getFullYear().toString().slice(-2)}`;await Ie(k,{...S,usuario_baja:(g==null?void 0:g.email)||"usuario_desconocido",usuario_baja_fecha:C});const y=$(F,"db_buscados",S.id);await Ne(y)});await Promise.all(N),p("Personas copiadas a la colecci√≥n de desactivados y eliminadas de la colecci√≥n original."),i(),h()}catch(v){console.error("Error al eliminar personas:",v),p("Hubo un error al copiar o eliminar algunas personas.")}setTimeout(()=>p(""),3e3),m(!1),x()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-danger text-white btn-sm rounded-circle",onClick:j,disabled:b,children:e.jsx("i",{className:"bi bi-trash3-fill"})})}),l&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Eliminar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:x})]}),e.jsx("hr",{className:"border border-red border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-redW p-2 rounded-pill text-secondaryMuiRed fw-bold",children:["Se eliminar√°n ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(f=>s.includes(f.id)).map(f=>{var v;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(v=f.base64)==null?void 0:v.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),f.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(N=>N.filter(S=>S!==f.id)),title:"Quitar de la selecci√≥n"})]},f.id)})}),e.jsxs("p",{className:"text-danger text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas eliminar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Cancelar"}),e.jsx("button",{className:"btn btn-danger text-white",onClick:u,disabled:b,children:b?"Eliminando...":"Confirmar Eliminaci√≥n"})]})]})})}),l&&e.jsx("div",{className:"modal-backdrop fade show"}),c&&e.jsx("div",{className:"alert alert-success mt-2",children:c})]})},Ds=({Date1:s,Date2:r,setSelectedDocs:t,onCerrar:n,color:i})=>e.jsxs("div",{className:`card bg-${i} shadow my-4 position-relative text-dark d-flex align-items-start gap-3 p-4 card text-center p-2 bg-dark bg-opacity-75 rounded-4 shadow-lg`,style:{overflow:"visible"},children:[e.jsx("button",{type:"button",className:"btn-close position-absolute top-0 end-0 m-2","aria-label":"Cerrar",onClick:n}),e.jsx("img",{src:"img/Perfiles/9.png",alt:"Asistente",className:" position-absolute",style:{width:"120px",height:"200px",objectFit:"contain",top:"-30px",left:"-20px"}}),e.jsxs("div",{className:"w-100",style:{paddingLeft:"130px"},children:[e.jsx("h5",{children:e.jsx("strong",{children:"Asistente de Selecci√≥n"})}),e.jsxs("p",{className:"mb-3",children:["Personas Seleccionadas: ",e.jsxs("strong",{children:[s.length," üßë"]})]}),e.jsx("strong",{children:s.length>0?e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-start p-2 rounded mb-3  ",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(l=>s.includes(l.id)).map(l=>{var o;return e.jsxs("div",{className:"badge text-dark shadow d-flex align-items-center p-2 mx-2 position-relative bg-light bg-opacity-50 m-1",style:{fontSize:"0.75rem"},children:[e.jsx("img",{src:(o=l.base64)==null?void 0:o.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),l.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>t(c=>c.filter(p=>p!==l.id)),title:"Quitar de la selecci√≥n"})]},l.id)})}):e.jsx("span",{className:"text-danger",children:"Ninguna"})})]})]}),As=({searchTerm:s,setSearchTerm:r})=>e.jsxs("div",{className:"form-floating mb-3 position-relative  ",children:[e.jsx("input",{type:"text",className:"form-control  shadow-sm pe-5 bg-dark bg-opacity-50 text-light",placeholder:"Buscar por nombre",value:s,onChange:t=>r(t.target.value)}),e.jsx("label",{children:"Buscar por Nombre"}),s&&e.jsx("button",{type:"button",className:"btn btn-link position-absolute top-50 end-0 translate-middle-y pe-3 ",onClick:()=>r(""),"aria-label":"Cancelar b√∫squeda",children:e.jsx("i",{className:"bi bi-x-circle text-light "})})]}),_a=({prioridadFilter:s,setPrioridadFilter:r})=>e.jsxs("div",{className:"form-floating mb-3  ",children:[e.jsxs("select",{className:"form-select shadow-sm ","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),disabled:!0,children:[e.jsx("option",{value:"",children:"Todas las Prioridades"}),e.jsx("option",{value:"1",children:"Normal"}),e.jsx("option",{value:"2",children:"Paradero üîé"}),e.jsx("option",{value:"3",children:"Evadido üö®"}),e.jsx("option",{value:"4",children:"Prioritaria ‚≠ê"})]}),e.jsx("label",{children:"Seleccione una Prioridad"})]}),Ms=({orden:s,setOrden:r})=>e.jsxs("div",{className:"form-floating",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Ordenar alfab√©ticamente",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"asc",children:"Orden A-Z"}),e.jsx("option",{value:"desc",children:"Orden Z-A"})]}),e.jsxs("label",{children:["Ordenar ",e.jsx("i",{className:"bi bi-alphabet"})]})]}),gl=({buscados:s,setBuscados:r,fetchBuscados:t})=>{const[n,i]=a.useState([]),[l,o]=a.useState([]),[c,p]=a.useState(!0),[b,m]=a.useState(""),[j,x]=a.useState(""),[h,d]=a.useState(!0),[g,u]=a.useState("asc");a.useEffect(()=>{s&&p(!1)},[s]);const f=k=>[...k].sort((w,C)=>g==="asc"?w.nombre_apellido.localeCompare(C.nombre_apellido):C.nombre_apellido.localeCompare(w.nombre_apellido));a.useEffect(()=>{if(!s)return;const k=s.filter(C=>C.nombre_apellido&&C.nombre_apellido.toLowerCase().includes(b.toLowerCase())||C.documento&&C.documento.includes(b)).filter(C=>j?C.prioridad===parseInt(j,10):!0),w=f(k);i(w)},[b,s,j,g]);const v=k=>{o(w=>w.includes(k)?w.filter(C=>C!==k):[...w,k])},N=()=>{if(l.length===n.length)o([]);else{const k=n.map(w=>w.id);o(k)}},S=k=>{switch(Number(k)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero üîé"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido üö®"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ‚≠ê"});case 5:return e.jsx("span",{className:"badge bg-teal",children:"Buscado SF üëÆüèª‚Äç‚ôÇÔ∏è "});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center my-5 animate__animated animate__bounce mt-sm-0 mt-5",children:"Listado Buscados SF"}),e.jsx("div",{className:"col-12 col-sm-6 animate__lightSpeedInLeft animate__animated",children:e.jsx(As,{searchTerm:b,setSearchTerm:m})}),e.jsx("div",{className:"col-12 col-sm-4 animate__lightSpeedInLeft animate__animated",children:e.jsx(_a,{prioridadFilter:j,setPrioridadFilter:x})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Ms,{orden:g,setOrden:u})})]}),c?e.jsx(se,{}):e.jsx(e.Fragment,{children:n.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[l.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(ka,{data1:l,data2:s,setSelectedDocs:o,fetchBuscados:t}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>o([])})]}),h&&e.jsx(Ds,{Date1:l,Date2:s,setSelectedDocs:o,onCerrar:()=>d(!1),color:"blueW2"}),!h&&l.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>d(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"}),e.jsxs("small",{className:"text-light",children:["Ver Resumen (",e.jsxs("span",{className:"text-light",children:[l.length," üßë"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small rounded-pill ",children:[e.jsx("thead",{className:"table-info ",children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:l.length===n.length&&n.length>0,onChange:N})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map(k=>{var w;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:l.includes(k.id),onChange:()=>v(k.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((w=k.base64)==null?void 0:w.trim())||"https://via.placeholder.com/40",alt:k.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize ",children:k.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:k.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:S(k.prioridad)}),e.jsxs("td",{children:[e.jsx(pl,{data1:k,data2:t}),e.jsx(Sa,{data1:k,data2:t})]}),e.jsx("td",{})]},k.id)})})]})})]})})]})},jl=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n,fetchBuscados:i})=>{const[l,o]=a.useState(!1),[c,p]=a.useState(!1),b=()=>o(!0),m=()=>o(!1),j=()=>{n([])},h=(()=>{const g=localStorage.getItem("user");return g?JSON.parse(g):null})(),d=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas recuperar estas personas?"))){p(!0);try{const f=r.filter(v=>s.includes(v.id)).map(async v=>{const N=$(F,"db_buscados",v.id),S=new Date,k=`${S.getDate().toString().padStart(2,"0")}/${(S.getMonth()+1).toString().padStart(2,"0")}/${S.getFullYear().toString().slice(-2)}`;await we(N,{...v,recuperado:[...v.recuperado||[],{motivo:"recuperado manual",usuario:h.email,fecha:k,datos_resguardo_baja_previa:[{usuario_baja:v.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:v.usuario_baja_fecha||"fecha_no_disponible"}]}]});const w=$(F,"db_buscados_desactivados",v.id);await Ne(w)});await Promise.all(f),alert("Personas recuperadas y eliminadas de la colecci√≥n de desactivados."),t(),i(),j()}catch(u){console.error("Error al recuperar personas:",u),alert("Hubo un error al recuperar o eliminar algunas personas.")}p(!1),m()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:b,disabled:c,children:e.jsx("i",{className:"bi bi-recycle"})})}),l&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title text-dark",children:"Recuperar Personas del Listado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:m})]}),e.jsx("hr",{className:"border border-teal border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"bg-greenW p-2 rounded-pill text-primary fw-bold",children:["Se reactivan ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(g=>s.includes(g.id)).map(g=>{var u;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(u=g.base64)==null?void 0:u.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),g.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(f=>f.filter(v=>v!==g.id)),title:"Quitar de la selecci√≥n"})]},g.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas reactivar estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:m,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:d,disabled:c,children:c?"Recuperando...":"Confirmar Recuperaci√≥n"})]})]})})}),l&&e.jsx("div",{className:"modal-backdrop fade show"})]})},fl=({data1:s,data2:r,dataRefresh:t})=>{var j;const[n,i]=a.useState(!1),l=()=>i(!0),o=()=>i(!1),p=(()=>{const x=localStorage.getItem("user");return x?JSON.parse(x):null})(),b=async x=>{if(window.confirm("¬øEst√°s seguro de que deseas recuperar esta persona?"))try{const h=$(F,"db_buscados",x.id),d=new Date,g=`${d.getDate().toString().padStart(2,"0")}/${(d.getMonth()+1).toString().padStart(2,"0")}/${d.getFullYear().toString().slice(-2)}`,u="campos_modificados_aqui";await we(h,{...x,recuperado:[...x.recuperado||[],{motivo:"recuperado manual",usuario:p.email,fecha:g,datos_resguardo_baja_previa:[{usuario_baja:x.usuario_baja||"usuario_no_disponible",usuario_baja_fecha:x.usuario_baja_fecha||"fecha_no_disponible"}]}]});const f=$(F,"db_buscados_desactivados",x.id);await Ne(f),r(),t(),alert("Persona recuperada y copiada a la colecci√≥n de capturas.")}catch(h){console.error("Error al eliminar persona: ",h)}},m=x=>{b(x),o()};return e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-teal text-white btn-sm rounded-circle m-1",onClick:l,children:e.jsx("i",{className:"bi bi-recycle"})}),n&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Recuperar Persona"}),e.jsx("button",{type:"button",className:"btn-close",onClick:o})]}),e.jsx("hr",{className:"border border-teal  border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("p",{children:[e.jsx("img",{src:(j=s.base64)==null?void 0:j.trim(),alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle mx-2",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsx("strong",{children:"Nombre:"})," ",(s==null?void 0:s.nombre_apellido)||"NN"," - ",e.jsx("strong",{children:"DNI:"})," ",(s==null?void 0:s.documento)||"Sin documento"]}),e.jsxs("p",{className:"text-primary bg-greenW2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas recuperar esta persona?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:o,children:"Cancelar"}),e.jsx("button",{className:"btn btn-teal text-white",onClick:()=>m(s),children:"Confirmar Recuperaci√≥n"})]})]})})}),n&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Nl=({fetchBuscados:s})=>{const[r,t]=a.useState([]),[n,i]=a.useState([]),[l,o]=a.useState([]),[c,p]=a.useState(!0),[b,m]=a.useState(""),[j,x]=a.useState(""),[h,d]=a.useState(!0),[g,u]=a.useState("asc"),f=G(F,"db_buscados_desactivados"),v=async()=>{p(!0);try{const y=(await ne(f)).docs.map(_=>({..._.data(),id:_.id}));t(y),i(y)}catch(C){console.error("Error al obtener personas: ",C)}finally{p(!1)}},N=C=>C.sort((y,_)=>g==="asc"?y.nombre_apellido.localeCompare(_.nombre_apellido):_.nombre_apellido.localeCompare(y.nombre_apellido));a.useEffect(()=>{v()},[]),a.useEffect(()=>{const C=r.filter(_=>_.nombre_apellido&&_.nombre_apellido.toLowerCase().includes(b.toLowerCase())||_.documento&&_.documento.includes(b)).filter(_=>j?_.prioridad===parseInt(j,10):!0),y=N(C);i(y)},[b,r,j,g]);const S=C=>{o(y=>y.includes(C)?y.filter(_=>_!==C):[...y,C])},k=()=>{if(l.length===n.length)o([]);else{const C=n.map(y=>y.id);o(C)}},w=C=>{switch(Number(C)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero üîé"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido üö®"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ‚≠ê"});case 5:return e.jsx("span",{className:"badge bg-teal",children:"Buscado SF üëÆüèª‚Äç‚ôÇÔ∏è "});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}};return e.jsxs("div",{className:"container-lg text-white ",children:[e.jsxs("div",{className:"row mt-5",children:[e.jsx("h1",{className:"text-center mb-5 animate__animated animate__bounce mt-sm-0  ",children:" Buscados SF  Desactivados"}),e.jsx("div",{className:"col-12 col-sm-6",children:e.jsx(As,{searchTerm:b,setSearchTerm:m})}),e.jsx("div",{className:"col-12 col-sm-4",children:e.jsx(_a,{prioridadFilter:j,setPrioridadFilter:x})}),e.jsx("div",{className:"col-12 col-sm-2",children:e.jsx(Ms,{orden:g,setOrden:u})})]}),c?e.jsx(se,{}):e.jsx(e.Fragment,{children:n.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[l.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2  mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx(jl,{data1:l,data2:r,dataRefresh:v,setSelectedDocs:o,fetchBuscados:s}),e.jsx("button",{type:"button",className:"btn-close  btn-close-white mt-1","aria-label":"Close",onClick:()=>o([])})]}),h&&e.jsx(Ds,{Date1:l,Date2:r,setSelectedDocs:o,onCerrar:()=>d(!1),color:"blueW2"}),!h&&l.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>d(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-white"})," ",e.jsxs("small",{className:"text-white",children:["Ver Resumen ( ",e.jsxs("span",{className:"text-white",children:[l.length," üßë"]}),")"]})]})})]}),e.jsx("div",{className:"table-responsive-sm mt-5",children:e.jsxs("table",{className:"table table-striped table-hover text-center small",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-light",children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:l.length===n.length,onChange:k})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"Documento"}),e.jsx("th",{className:"text-center d-none d-sm-table-cell",children:"Prioridad"}),e.jsx("th",{}),e.jsx("th",{})]})}),e.jsx("tbody",{children:n.map(C=>{var y;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:l.includes(C.id),onChange:()=>S(C.id)})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((y=C.base64)==null?void 0:y.trim())||"https://via.placeholder.com/40",alt:C.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize",children:C.nombre_apellido})]})}),e.jsx("td",{className:"d-none d-sm-table-cell",children:C.documento}),e.jsx("td",{className:"text-center d-none d-sm-table-cell",children:w(C.prioridad)}),e.jsx("td",{children:e.jsx(fl,{data1:C,data2:v,dataRefresh:s})}),e.jsx("td",{})]},C.id)})})]})})]})})]})},vl=({prioridadFilter:s,setPrioridadFilter:r,personas:t})=>{const n=[...new Set(t.map(i=>i.entidad))];return e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{className:"form-select shadow-sm","aria-label":"Floating label select example",value:s,onChange:i=>r(i.target.value),children:[e.jsx("option",{value:"",children:"Todas las Entidades"}),n.map((i,l)=>e.jsx("option",{value:i,children:i},l))]}),e.jsx("label",{children:"Seleccione una Entidad"})]})},yl=(s,r,t)=>s.filter(n=>{var i,l;return((i=n.nombre_apellido)==null?void 0:i.toLowerCase().includes(r.toLowerCase()))||((l=n.documento)==null?void 0:l.includes(r))}).filter(n=>!t||n.entidad===t),wl=(s,r)=>s.sort((t,n)=>r==="asc"?t.nombre_apellido.localeCompare(n.nombre_apellido):n.nombre_apellido.localeCompare(t.nombre_apellido)),Cl=(s,r)=>r?s.filter(t=>r==="capturado"?t.captura===!0:r==="evadido"?t.captura===!1:!0):s,Sl=(s,r,t,n)=>{s(""),r(""),t("asc"),n&&n("")},kl=({data1:s,data2:r})=>{const[t,n]=a.useState(!1),i=()=>n(!1),[l,o]=a.useState(!1),[c,p]=a.useState(""),[b,m]=a.useState(""),[j,x]=a.useState(""),d=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),g=async()=>{if(window.confirm(`¬øEst√°s seguro de que deseas ${j}?`)){o(!0);try{const v=$(F,"db_buscados",s.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await we(v,{...s,captura:!0,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:d.email,captura_fecha:S,captura_autor:b,captura_descripcion:c}]}),r(),o(!1),alert(`${j} realizado.`)}catch(v){console.error("Error al modificar persona: ",v),alert("Error al modificar la persona. Int√©ntalo de nuevo.")}}},u=()=>{n(!0),x("Informar Captura de Persona")},f=async()=>{if(window.confirm("¬øEst√°s seguro de que deseas QUITAR EL ESTADO DE  CAPTURADO ?")){o(!0);try{const v=$(F,"db_personas",s.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await K(v,{...s,captura:!1,capturas_informacion_estados:[...s.capturas_informacion_estados||[],{captura_motivo:"quitar estado de captura",captura_quita_estado_usuario:d.email,captura_quita_fecha:S}]}),r(),alert("Captura quitada correctamente."),o(!1)}catch(v){console.error("Error al quitar la captura:",v),alert("No se pudo quitar la captura. Int√©ntalo de nuevo."),o(!1)}}};return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:s.captura?"bg-redW ":"",children:e.jsx("div",{className:"d-flex flex-column gap-1",children:s.captura?e.jsx("button",{className:"btn btn-pink text-white btn-sm w-100",onClick:()=>{f()},children:"Quitar Captura"}):e.jsx("button",{className:"btn btn-primary btn-sm w-100",onClick:u,disabled:l,children:"Marcar Capturado"})})}),t&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog ",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header  ",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsxs("h5",{className:"modal-title mx-3",children:[j," "]}),e.jsx("button",{type:"button",className:"btn-close ",onClick:i})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-3 mt-3 d-flex align-items-center",children:e.jsxs("div",{className:"position-relative",style:{cursor:"pointer"},children:[e.jsx("img",{src:s.base64?s.base64.trim():"",alt:s.nombre_apellido||"Imagen no disponible",className:"img-fluid rounded-circle shadow-sm",style:{width:"100px",height:"auto",objectFit:"cover"}}),e.jsx("div",{className:"position-absolute bottom-0 start-50 translate-middle-x bg-secondary text-white text-center w-100 rounded-bottom small",style:{opacity:.8},children:e.jsx("span",{children:"Capturado  üëÆ "})})]})}),e.jsxs("div",{className:"col-9",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end ",children:["Datos Personales ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"form-floating mb-2",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.nombre_apellido,disabled:!0}),e.jsx("label",{className:"badgefw-semibold opacity-75",children:"Nombre y Apellido"})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border",value:s.documento,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Documento"})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"form-floating mb-2 ",children:[e.jsx("input",{className:"form-control border-0 border text-capitalize",value:s.sexo,disabled:!0}),e.jsx("label",{className:"fw-semibold opacity-75",children:"Sexo"})]})})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 justify-content-end mt-4 ",children:[e.jsx("small",{className:"spinner-grow spinner-grow-sm text-secondaryM"}),j," ",e.jsx("i",{className:"bi bi-files"})]}),e.jsx("hr",{className:"border border-secondaryM border-1 opacity-75"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realiz√≥ la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:b,onChange:v=>m(v.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:c,onChange:v=>p(v.target.value)})]})]}),e.jsxs("p",{className:"text-primary bg-blueW rounded my-2 p-1",children:[e.jsx("i",{className:"bi bi-exclamation-triangle titilar mx-2 fs-4"})," ¬øEst√°s seguro que deseas realizar el cambio?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary",onClick:g,disabled:!b||!c||l,children:j})]})]})})}),t&&e.jsx("div",{className:"modal-backdrop fade show"})]})},_l=({personas:s,selectedDocs:r,toggleSelectDoc:t,toggleSelectAll:n,getPrioridadLabel:i,fetchPersonas:l,isFiltered:o,color:c,prioridad:p})=>e.jsx("div",{className:"table-responsive-sm mt-5 ",children:e.jsxs("table",{className:"table table-striped table-hover  text-center small ",children:[e.jsx("thead",{className:"table-primary",children:e.jsxs("tr",{className:"bg-light",children:[!o&&e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:r.length===s.length,onChange:n})}),e.jsx("th",{}),e.jsx("th",{className:"d-none d-sm-table-cell ",children:"Entidad"}),e.jsx("th",{className:"d-none d-sm-table-cell",children:"DNI"}),p===5?e.jsx("th",{className:"d-none d-sm-table-cell",children:"Fecha"}):null,e.jsx("th",{className:"d-none d-sm-table-cell",children:"Prioridad"}),p===5?e.jsx("th",{}):null,e.jsx("th",{})]})}),e.jsx("tbody",{children:s.map(b=>{var m;return e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{className:b.captura?"bg-redW":"",children:e.jsx("input",{type:"checkbox",checked:r.includes(b.id),onChange:()=>t(b.id)})}),e.jsx("td",{className:b.captura?"bg-redW ":"",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("img",{src:((m=b.base64)==null?void 0:m.trim())||$e,alt:b.nombre_apellido,className:"img-fluid rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover"}}),e.jsx("span",{className:"text-capitalize d-inline-block text-truncate",children:b.nombre_apellido})]})}),e.jsx("td",{className:`d-none d-sm-table-cell text-dark ${b.captura?"bg-redW":c}`,children:b.entidad}),e.jsx("td",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.documento}),p===5?e.jsx("th",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.date}):null,e.jsx("td",{className:b.captura?"bg-redW d-none d-sm-table-cell":"d-none d-sm-table-cell",children:b.captura?e.jsx("span",{className:"badge bg-dark",children:"Capturado üëÆ"}):i(b.prioridad)}),p===5?e.jsx(kl,{data1:b,data2:l}):null,e.jsx("td",{className:b.captura?"bg-redW":"",children:e.jsx(Sa,{data1:b,data2:l})})]},b.id)})})]})}),El=s=>{switch(Number(s)){case 1:return e.jsx("span",{className:"badge bg-teal",children:"Normal"});case 2:return e.jsx("span",{className:"badge bg-primary",children:"Paradero üîé"});case 3:return e.jsx("span",{className:"badge bg-danger titilar",children:"Evadido üö®"});case 4:return e.jsx("span",{className:"badge bg-orangeDb",children:"Prioritaria ‚≠ê"});case 5:return e.jsx("span",{className:"badge bg-teal",children:"Buscados SF üëÆüèª‚Äç‚ôÇÔ∏è"});default:return e.jsx("span",{className:"badge bg-dark",children:"Desconocida"})}},Fl=s=>{const[r,t]=a.useState([]),[n,i]=a.useState(!0),l=G(F,"db_buscados"),o=async()=>{i(!0);try{let p=(await ne(l)).docs.map(b=>({...b.data(),id:b.id}));p=p.filter(b=>b.prioridad===s),t(p)}catch(c){console.error("Error al obtener personas: ",c)}finally{i(!1)}};return a.useEffect(()=>{o()},[]),{personas:r,loading:n,fetchPersonas:o}},Dl=s=>{const[r,t]=a.useState([]);return{selectedDocs:r,setSelectedDocs:t,toggleSelectDoc:l=>{t(o=>o.includes(l)?o.filter(c=>c!==l):[...o,l])},toggleSelectAll:()=>{if(s&&s.length>0)if(r.length===s.length)t([]);else{const l=s.map(o=>o.id);t(l)}}}},Al=({alertaFilter:s,setAlertaFilter:r})=>e.jsxs("div",{className:"form-floating mb-3",children:[e.jsxs("select",{disabled:!0,className:"form-select shadow-sm","aria-label":"Floating label select example",value:s,onChange:t=>r(t.target.value),children:[e.jsx("option",{value:"",children:"Todos los Estados"}),e.jsx("option",{value:"capturado",children:"Capturado"}),e.jsx("option",{value:"evadido",children:"Evadido"})]}),e.jsx("label",{children:"Seleccione un Estado"})]}),Ml=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1);a.useState("");const[o,c]=a.useState(!1),[p,b]=a.useState(""),[m,j]=a.useState(""),x=()=>l(!0),h=()=>l(!1),d=()=>{n([])},u=(()=>{const v=localStorage.getItem("user");return v?JSON.parse(v):null})(),f=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas dar por CAPTURADOS üëÆ a este grupo personas ?"))){c(!0);try{const S=r.filter(k=>s.includes(k.id)).map(async k=>{const w=$(F,"db_buscados",k.id),C=new Date,y=`${C.getDate().toString().padStart(2,"0")}/${(C.getMonth()+1).toString().padStart(2,"0")}/${C.getFullYear().toString().slice(-2)}`;await K(w,{...k,captura:!0,capturas_informacion_estados:[...k.capturas_informacion_estados||[],{captura_motivo:"informar captura",captura_informa_usuario:u.email,captura_fecha:y,captura_autor:m,captura_descripcion:p}]})});await Promise.all(S),alert("Capturas Exitosas"),t(),d()}catch(N){console.error("Error al modificar personas:",N),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),h()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-primary btn-sm w-100",onClick:x,disabled:o,children:["Marcar Capturas (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Marcar Grupo como Capturado"}),e.jsx("button",{type:"button",className:"btn-close",onClick:h})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(v=>s.includes(v.id)).map(v=>{var N;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(N=v.base64)==null?void 0:N.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),v.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(S=>S.filter(k=>k!==v.id)),title:"Quitar de la selecci√≥n"})]},v.id)})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Autor / Entidad que realiz√≥ la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:m,onChange:v=>j(v.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"mb-2 text-start",children:e.jsx("span",{className:"badge text-bg-primary me-2 ",children:"Breve relato de la captura "})}),e.jsx("input",{className:"form-control bg-blueW2",value:p,onChange:v=>b(v.target.value)})]}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas marcar como capturados estas personas?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:f,disabled:!m||!p||o,children:o?"Trabajando...":"Confirmar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Pl=({data1:s,data2:r,dataRefresh:t,setSelectedDocs:n})=>{const[i,l]=a.useState(!1);a.useState("");const[o,c]=a.useState(!1);a.useState(""),a.useState("");const p=()=>l(!0),b=()=>l(!1),m=()=>{n([])},x=(()=>{const d=localStorage.getItem("user");return d?JSON.parse(d):null})(),h=async()=>{if(!(!s||s.length===0||!r||r.length===0||!window.confirm("¬øEst√°s seguro de que deseas QUITAR LOS ESTADOS DE CAPTURA üëÆ a estas personas ?"))){c(!0);try{const u=r.filter(f=>s.includes(f.id)).map(async f=>{const v=$(F,"db_buscados",f.id),N=new Date,S=`${N.getDate().toString().padStart(2,"0")}/${(N.getMonth()+1).toString().padStart(2,"0")}/${N.getFullYear().toString().slice(-2)}`;await K(v,{...f,captura:!1,capturas_informacion_estados:[...f.capturas_informacion_estados||[],{captura_motivo:"quitar captura",captura_informa_usuario:x.email,captura_fecha:S}]})});await Promise.all(u),alert("Se quito las capturas de forma Exitosa"),t(),m()}catch(g){console.error("Error al modificar personas:",g),alert("Hubo un error al cambiar el estado de algunas personas - Comunique su error a Tics DG OJO.")}c(!1),b()}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsxs("button",{className:"btn btn-pink btn-sm w-100",onClick:p,disabled:o,children:["Quitar Capturas (",s.length,")"]})}),i&&e.jsx("div",{className:"modal fade show d-block bg-dark",tabIndex:"-1",role:"dialog",children:e.jsx("div",{className:"modal-dialog",role:"document",children:e.jsxs("div",{className:"modal-content shadow",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{style:{width:"50px",height:"50px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"25px",objectFit:"contain"},className:"rounded-circle p-0 shadow border-dark border",children:"üëÆ"}),e.jsx("h5",{className:"modal-title ms-3 text-dark",children:"Quitar Estado de Capturados a Grupo "}),e.jsx("button",{type:"button",className:"btn-close",onClick:b})]}),e.jsx("hr",{className:"border border-secondaryM border-2 opacity-50 m-0 mb-4"}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsxs("p",{className:"text-primary bg-blueW p-2 rounded-pill  fw-bold",children:["Grupo de  ",s.length," persona",s.length!==1&&"s"," seleccionada",s.length!==1&&"s","."]}),e.jsx("div",{className:"d-flex flex-wrap gap-2 justify-content-center   p-2 rounded mb-3",style:{maxHeight:"200px",overflowY:"auto"},children:r.filter(d=>s.includes(d.id)).map(d=>{var g;return e.jsxs("div",{className:"badge text-dark shadow  d-flex align-items-center p-2 mx-2 position-relative",style:{fontSize:"0.70rem"},children:[e.jsx("img",{src:(g=d.base64)==null?void 0:g.trim(),alt:"",className:"rounded-circle me-2",style:{width:"25px",height:"25px",objectFit:"cover"}}),d.nombre_apellido||"NN",e.jsx("button",{className:"btn-close btn ms-2",style:{fontSize:"0.6rem"},onClick:()=>n(u=>u.filter(f=>f!==d.id)),title:"Quitar de la selecci√≥n"})]},d.id)})}),e.jsxs("p",{className:"text-primary text-center titilar ",children:[e.jsx("i",{className:"bi bi-exclamation-triangle  mx-2 fs-4 "}),"¬øEst√°s seguro que deseas quitar estado de captura ?"]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:b,children:"Cancelar"}),e.jsx("button",{className:"btn btn-primary text-white",onClick:h,disabled:o,children:o?"Trabajando...":"Quitar Captura"})]})]})})}),i&&e.jsx("div",{className:"modal-backdrop fade show"})]})},Il=({buscados:s,setBuscados:r,fetchBuscados:t})=>{const[n,i]=a.useState(5),{personas:l,loading:o,fetchPersonas:c}=Fl(n),[p,b]=a.useState([]),[m,j]=a.useState(""),[x,h]=a.useState(""),[d,g]=a.useState(!0),[u,f]=a.useState("asc"),{selectedDocs:v,setSelectedDocs:N,toggleSelectDoc:S,toggleSelectAll:k}=Dl(p||[]),w=m||x,[C,y]=a.useState(""),_=v.every(I=>{const P=l.find(q=>q.id===I);return(P==null?void 0:P.captura)===!0}),M=v.every(I=>{const P=l.find(q=>q.id===I);return(P==null?void 0:P.captura)===!1||(P==null?void 0:P.captura)===void 0}),E=!_&&!M;return a.useEffect(()=>{let I=yl(l,m,x);I=Cl(I,C);const P=wl(I,u);b(P)},[m,l,x,u,C]),e.jsxs("div",{className:"container-lg my-5 text-light",children:[e.jsx("h1",{className:"text-center mb-4 animate__animated animate__bounce mt-sm-0  ",children:"Buscados SF Captura"}),e.jsxs("div",{className:"card my-5  bg-dark bg-opacity-50 p-4 rounded-4",children:[e.jsx("div",{className:"card-header bg-light bg-opacity-75 rounded-2",children:e.jsx("div",{children:"Filtros"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap gap-3",children:[e.jsx("div",{className:"col-12 col-sm-4 col-md-8 col-lg-4",children:e.jsx(vl,{prioridadFilter:x,setPrioridadFilter:h,personas:l})}),e.jsx("div",{className:"col-12 col-sm-4 col-md-8 col-lg-4",children:e.jsx(Al,{alertaFilter:C,setAlertaFilter:y})}),e.jsx("div",{className:"col-12 col-sm-3 col-md-8 col-lg-2",children:e.jsx(Ms,{orden:u,setOrden:f})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsx("button",{onClick:()=>Sl(j,h,f,y),className:"btn bg-white bg-opacity-25 btn-sm text-light",children:"Limpiar Filtros"})})]})]}),e.jsx("div",{className:"col-12 ",children:e.jsx(As,{searchTerm:m,setSearchTerm:j})}),o?e.jsx(se,{}):e.jsx(e.Fragment,{children:p.length===0?e.jsx("div",{className:"alert alert-warning mt-3",children:"Sin registro encontrado."}):e.jsxs(e.Fragment,{children:[v.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("small",{className:"d-flex gap-2 mb-2 mt-sm-2 mt-5 justify-content-end titilar",children:["Acciones Grupales ",e.jsx("i",{className:"bi bi-collection"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2 justify-content-end mb-2",children:[e.jsx("div",{className:"d-flex gap-2 mb-2 justify-content-end mb-2",children:!E&&e.jsxs(e.Fragment,{children:[_&&e.jsx(Pl,{data1:v,data2:l,dataRefresh:c,setSelectedDocs:N}),M&&e.jsx(Ml,{data1:v,data2:l,dataRefresh:c,setSelectedDocs:N})]})}),e.jsx(ka,{data1:v,data2:l,dataRefresh:c,setSelectedDocs:N}),e.jsx("button",{type:"button",className:"btn-close btn-close-white mt-1","aria-label":"Close",onClick:()=>N([])})]}),d&&e.jsx(Ds,{Date1:v,Date2:l,setSelectedDocs:N,onCerrar:()=>g(!1),color:"blueW2"}),!d&&v.length>1&&e.jsx("div",{className:"d-flex justify-content-end mb-3",children:e.jsxs("button",{className:"btn fw-semibold",onClick:()=>g(!0),children:[e.jsx("i",{className:"bi bi-info-circle me-2 text-light"})," ",e.jsxs("small",{className:"text-light",children:["Ver Resumen ("," ",e.jsxs("span",{className:"text-ligh",children:[v.length," üßë"]}),")"]})]})})]}),e.jsx(_l,{personas:p,selectedDocs:v,toggleSelectDoc:S,toggleSelectAll:k,getPrioridadLabel:El,fetchPersonas:c,isFiltered:w,color:"bg-secondaryM text-white",prioridad:n})]})})]})},Ll=()=>{const[s,r]=a.useState("dashboard"),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!1),p=localStorage.getItem("user"),b=p?JSON.parse(p):null,m=async()=>{try{c(!0);const h=await ne(G(F,"db_buscados")),d=[];l(d),h.forEach(g=>{d.push({id:g.id,...g.data()})}),n(d)}catch(h){console.error("Error al obtener los documentos: ",h)}finally{c(!1)}};a.useEffect(()=>{m()},[]),t.filter(h=>h.prioridad===3).length;const j=t.length,x=()=>{switch(s){case"dashboard":return e.jsx(xl,{});case"reportes":return e.jsx(bl,{loading:o,buscados:i});case"Desactivados":return e.jsx(Nl,{fetchBuscados:m});case"capturas":return e.jsx(gl,{buscados:i,setBuscados:l,fetchBuscados:m});case"evasiones":return e.jsx(Il,{buscados:i,setBuscados:l,fetchBuscados:m});default:return e.jsx("p",{children:"Selecciona una opci√≥n del men√∫."})}};return e.jsx("div",{className:"container-lg",children:e.jsxs("div",{className:"row ",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-3 ",children:[e.jsx("div",{className:"text-center mb-4 text-light",children:e.jsxs("span",{className:"bg-dark bg-opacity-25 p-2 px-5 fs-6 rounded-5 ",children:[" ",e.jsx("i",{className:"mx-2 bi bi-menu-button-fill "}),"Men√∫ Panel"]})}),e.jsxs("div",{className:"list-group p-3 bg-transparent bg-opacity-50 rounded-4 shadow-lg",children:[e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Bienvenido"}),(b==null?void 0:b.rol)==="admin"&&e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="reportes"?"active":""}`,onClick:()=>r("reportes"),children:"Exportaci√≥n"}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="capturas"?"active":""}`,onClick:()=>r("capturas"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Buscados SF",o?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-pink rounded-pill",children:["Activas ",j]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="evasiones"?"active":""}`,onClick:()=>r("evasiones"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Capturas",o?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsxs("span",{className:"badge bg-teal rounded-pill",children:["Activas ",j]})]})}),e.jsx("button",{className:`list-group-item bg-light bg-opacity-50 border-0 list-group-item-action ${s==="Desactivados"?"active":""}`,onClick:()=>r("Desactivados"),children:e.jsxs("li",{className:"d-flex justify-content-between align-items-center",children:["Desactivados",o?e.jsx("div",{className:"spinner-border spinner-border-sm text-purple",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})}):e.jsx("span",{className:"badge bg-cyan rounded-pill",children:"Reactivar"})]})})]})]}),e.jsx("div",{className:"col-12 col-md-8 col-lg-9",children:x()})]})})},Rl=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Panel de Control"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsxs("div",{className:"my-5",children:["  ",e.jsx(_e,{Promp:"Panel de Control ",Promp2:"bi bi-code-slash fs-4 "}),"   "]}),e.jsx(Ll,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},$l=()=>e.jsx(e.Fragment,{children:e.jsx(Rl,{})}),Qs=["usuario","911","ceccop","admin","911/ceccop","supervisor c"];function zl(){const[s,r]=a.useState([]),[t,n]=a.useState(!0),[i,l]=a.useState([]),[o,c]=a.useState(""),[p,b]=a.useState(!0),m=async()=>{try{n(!0);const f=G(F,"users"),N=(await ne(f)).docs.map(S=>({id:S.id,...S.data()}));r(N)}catch(f){console.error("Error al obtener usuarios:",f)}finally{n(!1)}};a.useEffect(()=>{m()},[]);const j=()=>{const f=[...s].sort((v,N)=>{var w,C;const S=((w=v.email)==null?void 0:w.toLowerCase())||"",k=((C=N.email)==null?void 0:C.toLowerCase())||"";return p?S.localeCompare(k):k.localeCompare(S)});r(f),b(!p)},x=async(f,v)=>{const N=s.find(k=>k.id===f);if(!(!N||!window.confirm(`¬øSeguro que quer√©s cambiar el rol de ${N.email} de "${N.rol}" a "${v}"?`)))try{const k=$(F,"users",f);await K(k,{rol:v}),r(w=>w.map(C=>C.id===f?{...C,rol:v}:C))}catch(k){console.error("Error al actualizar rol:",k),alert("Ocurri√≥ un error al cambiar el rol.")}},h=f=>{switch(f){case"admin":return"bg-danger text-white";case"911":return"bg-teal text-white";case"ceccop":return"bg-primary text-white";case"911/ceccop":return"bg-orangeDb text-white";case"supervisor c":return"bg-orangeDb text-white fw-bold";default:return"bg-secondary text-white"}},d=f=>{l(v=>v.includes(f)?v.filter(N=>N!==f):[...v,f])},g=()=>{i.length===s.length?l([]):l(s.map(f=>f.id))},u=async()=>{if(!o){alert("Seleccion√° un rol para aplicar.");return}if(i.length===0){alert("Seleccion√° al menos un usuario.");return}if(window.confirm(`¬øSeguro que quer√©s cambiar el rol de ${i.length} usuarios a "${o}"?`))try{await Promise.all(i.map(v=>{const N=$(F,"users",v);return K(N,{rol:o})})),r(v=>v.map(N=>i.includes(N.id)?{...N,rol:o}:N)),l([]),c(""),alert("Rol actualizado correctamente en los usuarios seleccionados.")}catch(v){console.error("Error al actualizar roles masivos:",v),alert("Ocurri√≥ un error al actualizar roles.")}};return t?e.jsx("div",{className:"d-flex justify-content-center my-5",children:e.jsx("div",{className:"spinner-border text-white",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Cargando..."})})}):e.jsxs("div",{className:"container my-5",children:[e.jsx("h1",{className:"text-center d-block d-md-none text-white p-2 rounded-pill ",children:"Usuario Rol"}),e.jsxs("div",{className:"d-flex flex-wrap justify-content-center align-items-center gap-3 mb-4 bg-dark bg-opacity-25 p-3 rounded-3 position-relative",children:[e.jsxs("select",{className:"form-select w-auto rounded-pill text-center text-capitalize",value:o,onChange:f=>c(f.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar nuevo rol..."}),Qs.map(f=>e.jsx("option",{value:f,children:f},f))]}),e.jsxs("button",{className:"btn btn-outline-light rounded-pill fw-semibold",onClick:u,disabled:!o||i.length===0,children:["Cambiar rol a seleccionados (",i.length,")"]}),e.jsx("button",{onClick:j,className:"btn rounded-circle bg-dark bg-opacity-75 text-white d-flex align-items-center justify-content-center shadow",style:{width:"45px",height:"45px"},title:`Ordenar ${p?"Z‚ÄìA":"A‚ÄìZ"}`,children:e.jsx("i",{className:`bi ${p?"bi-sort-alpha-down":"bi-sort-alpha-up"} fs-5`})})]}),e.jsx("div",{className:"table-responsive rounded-2",children:e.jsxs("table",{className:"table table-hover bg-opacity-50 align-middle",children:[e.jsx("thead",{className:"table-light text-center text-capitalize",children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:i.length===s.length,onChange:g})}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Rol actual"}),e.jsx("th",{children:"Cambiar rol"})]})}),e.jsx("tbody",{className:"text-center",children:s.map(f=>e.jsxs("tr",{className:`text-light ${i.includes(f.id)?"table-active":""}`,children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:i.includes(f.id),onChange:()=>d(f.id)})}),e.jsx("td",{children:f.email}),e.jsx("td",{children:e.jsx("span",{className:`badge ${h(f.rol)} rounded-pill text-capitalize animate__heartBeat animate__animated`,children:f.rol})}),e.jsx("td",{children:e.jsx("select",{className:"form-select rounded-pill text-center fw-semibold text-capitalize bg-primary bg-opacity-25",value:f.rol,onChange:v=>x(f.id,v.target.value),children:Qs.map(v=>e.jsx("option",{value:v,children:v},v))})})]},f.id))})]})})]})}const Tl=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Panel Admin User - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 animate__fadeInRight animate__animated  ",children:e.jsx(_e,{Promp:"Panel Usuarios Rol ",Promp2:"bi bi-person fs-4  "})}),e.jsx("div",{className:"my-5",children:e.jsx(zl,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Bl=()=>e.jsx(e.Fragment,{children:e.jsx(Tl,{})}),Ol=()=>{const[s,r]=a.useState(null),[t,n]=a.useState([]),[i,l]=a.useState([]),[o,c]=a.useState(!1),[p,b]=a.useState([]),m=h=>{const d=h.target.files[0];if(r(null),l([]),b([]),n([]),d){if(!d.name.endsWith(".csv")){r("Solo se permiten archivos CSV.");return}const g=new FileReader;g.onload=u=>{const f=u.target.result,v=f.includes(";")?";":",",S=f.split(`
`).map(C=>C.trim()).map(C=>C.split(v)),k=[],w=[];S.forEach((C,y)=>{const[_,M,E,I]=C.map(q=>q==null?void 0:q.trim());if(!_||!M||!E)return;let P=null;isNaN(_)||_.length!==8?P="El DNI debe ser num√©rico y tener 8 caracteres.":j(E)?!E.endsWith("@gmail.com")&&!E.endsWith("@gmail.com.ar")&&!E.endsWith("@santafe.gob.ar")&&!E.endsWith("@santafe.gov.ar")&&!E.endsWith("@hotmail.com")&&!E.endsWith("@outlook.com")&&(P="Dominio de correo no permitido."):P="Correo electr√≥nico inv√°lido.",P&&w.push({rowIndex:y+1,error:P,correo:E}),k.push({dni:_,nombre:M,correo:E,dependencia:I||"",valido:!P})}),n(k),l(w)},g.onerror=()=>{r("Ocurri√≥ un error al leer el archivo.")},g.readAsText(d)}},j=h=>/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(h),x=async()=>{const h=t.filter(u=>u.valido);if(h.length===0)return r("No hay usuarios v√°lidos para subir.");c(!0),r(null);const d=[],g=[];for(const u of h)try{const v=(await ea(We,u.correo,u.dni)).user;await we($(F,"users",v.uid),{email:u.correo,nombre:u.nombre,dni:u.dni,dependencia:u.dependencia,rol:"usuario",createdAt:new Date}),d.push(u.correo)}catch(f){g.push({rowIndex:"-",error:`Error con ${u.correo}: ${f.message}`})}b(d),c(!1),g.length>0&&l(u=>[...u,...g]),d.length>0&&(alert(`‚úÖ ${d.length} usuarios se cargaron correctamente.
‚ö†Ô∏è La sesi√≥n se cerrar√° para que puedas validar el funcionamiento de cada usuario.`),await cs(We))};return e.jsx("div",{className:"container my-4",children:e.jsxs("div",{className:"card shadow-lg rounded-4 bg-dark bg-opacity-50",children:[e.jsxs("div",{className:"card-header bg-opacity-50 text-light shadow-sm rounded-top-4 d-flex justify-content-between align-items-center",children:[e.jsxs("h4",{className:"fw-semibold p-2 mb-0",children:["Subir Archivo CSV ",e.jsx("i",{className:"bi bi-filetype-csv ms-2"})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-light rounded-circle",onClick:()=>{r(null),l([]),n([]),b([]),c(!1);const h=document.getElementById("csvFile");h&&(h.value="")},title:"Reiniciar formulario",children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsxs("div",{className:"card-body bg-light rounded-bottom-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"csvFile",className:"form-label",children:"Selecciona un archivo CSV:"}),e.jsx("input",{type:"file",className:"form-control",id:"csvFile",accept:".csv",onChange:m})]}),s&&e.jsx("div",{className:"alert alert-danger",children:s}),i.length>0&&e.jsxs("div",{className:"alert alert-danger my-4",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Errores detectados:"]}),e.jsx("ul",{children:i.map((h,d)=>e.jsxs("li",{children:[h.rowIndex&&`Fila ${h.rowIndex}: `,h.error,h.correo?` (${h.correo})`:""]},d))})]}),t.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center my-3",children:[e.jsxs("span",{className:"fw-semibold",children:["Usuarios v√°lidos: ",t.filter(h=>h.valido).length," /"," ",t.length]}),e.jsx("button",{className:"btn bg-dark bg-opacity-75 text-white",onClick:x,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Subiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-cloud-upload me-2"})," Subir a Servidor"]})})]}),p.length>0&&e.jsxs("div",{className:"alert alert-success mt-3",children:[e.jsx("i",{className:"bi bi-check-circle-fill me-2"}),p.length," usuarios subidos correctamente."]}),e.jsx("div",{className:"table-responsive text-center bg-greenW2 mt-3 rounded-3 shadow-sm",children:e.jsxs("table",{className:"table table-striped mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"DNI"}),e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Correo"}),e.jsx("th",{children:"Dependencia"}),e.jsx("th",{children:"Estado"})]})}),e.jsx("tbody",{children:t.map((h,d)=>e.jsxs("tr",{children:[e.jsx("td",{children:h.dni}),e.jsx("td",{children:h.nombre}),e.jsx("td",{children:h.correo}),e.jsx("td",{children:h.dependencia}),e.jsx("td",{className:"fw-bold",children:h.valido?e.jsx("span",{className:"text-success",children:"‚úî"}):e.jsx("span",{className:"text-danger",children:"‚úñ"})})]},d))})]})})]})]})]})})},Ul=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Usuarios Csv - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:"Panel Usuarios Csv",Promp2:"bi bi-person fs-4 "})}),e.jsx("div",{className:"my-5",children:e.jsx(Ol,{})})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},ql=()=>e.jsx(e.Fragment,{children:e.jsx(Ul,{})}),Vl=()=>e.jsxs("div",{className:"container-fluid d-flex flex-column align-items-center justify-content-center text-center bg-white",style:{minHeight:"100vh"},children:[e.jsx("h1",{className:"text-uppercase text-danger fw-bold fs-1 mb-2",children:"Acceso no autorizado"}),e.jsx("h5",{className:"text-secondary mb-4",children:"No tienes permisos para ver esta p√°gina."}),e.jsx("img",{src:"/img/splash/access.jpeg",alt:"Acceso no autorizado",className:"img-fluid mb-4",style:{maxHeight:"200px"}}),e.jsx(He,{to:"/dashboard",className:"btn btn-outline-danger px-4 py-2 rounded-pill fw-semibold shadow-sm",children:"Volver al inicio"}),e.jsx("p",{className:"text-muted mt-4 small",children:"¬© Desarrollo Tics 2025 / Santa Fe"})]}),Gl=()=>{const[s,r]=a.useState([]),[t,n]=a.useState(700),i=a.useRef(null),l=c=>{const p=i.current.getBoundingClientRect(),b=(c.clientX-p.left)/p.width*100,m=(c.clientY-p.top)/p.height*100,j=prompt("Nombre del punto:")||"Nuevo punto";r([...s,{id:Date.now(),top:m,left:b,nombre:j}])},o=c=>{n(Number(c.target.value))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"container-lg my-4 p-3 bg-dark bg-opacity-50 rounded-pill shadow",children:e.jsxs("div",{className:"d-flex flex-column align-items-center",children:[e.jsxs("label",{htmlFor:"mapRange",className:"text-white mb-2 fw-bold",children:["Tama√±o del mapa: ",e.jsxs("span",{className:"text-info",children:[t,"px"]})]}),e.jsx("input",{id:"mapRange",type:"range",min:"300",max:"1200",value:t,onChange:o,className:"form-range w-50"})]})}),e.jsxs("div",{ref:i,style:{position:"relative",width:`${t}px`,maxWidth:"100%",margin:"auto"},children:[e.jsx("img",{src:"/img/png/rosarioMap2.png",alt:"Mapa de Rosario con distritos",style:{width:"100%",height:"auto",display:"block"},onClick:l}),s.map(c=>e.jsxs("div",{className:"text-capitalize",style:{position:"absolute",top:`${c.top}%`,left:`${c.left}%`,transform:"translate(-50%, -50%)",textAlign:"center"},children:[e.jsx("div",{className:"titilar",style:{width:"15px",height:"15px",backgroundColor:"red",borderRadius:"50%",border:"2px solid white",marginBottom:"4px"}}),e.jsx("div",{style:{backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"12px",whiteSpace:"nowrap"},children:c.nombre})]},c.id))]})]})},Hl=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Control Vehicular"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx("div",{className:"my-5 ",children:e.jsx(_e,{Promp:"Control Vehicular",Promp2:"bi bi-code-slash fs-4 "})}),e.jsx(Gl,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})})},Wl=()=>e.jsx(e.Fragment,{children:e.jsx(Hl,{})}),Jl=()=>e.jsx("div",{className:"bg-animado position-absolute top-0 start-0 w-100 h-100"}),Yl="/img/gif/sirena.gif",Zl="/img/splash/concept8.gif",Ql=()=>{const[s,r]=a.useState(""),[t,n]=a.useState("");return a.useEffect(()=>{const i=()=>{const o=new Date,c=o.toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"}),p=o.toLocaleDateString("es-AR",{weekday:"long",day:"numeric",month:"long"});r(c),n(p.charAt(0).toUpperCase()+p.slice(1))};i();const l=setInterval(i,1e3);return()=>clearInterval(l)},[]),e.jsx("div",{className:" position-relative text-white overflow-hidden",children:e.jsxs("div",{className:"container position-relative z-5 h-100 d-flex flex-column justify-content-between text-center my-5",children:[e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1 bg-dark bg-opacity-25 rounded-4 p-4 mb-4",children:[e.jsx("h1",{className:"display-1 fw-light",children:s}),e.jsx("h2",{className:"fs-2 text-capitalize",children:t})]}),e.jsx("div",{className:"row  my-3",children:e.jsx("div",{className:"col-12 col-md-6 mx-auto",children:e.jsxs("div",{className:"card bg-white bg-opacity-25 text-white rounded-4 p-2 d-flex flex-row align-items-center w-100",children:[e.jsx("i",{className:"bi bi-newspaper ms-3",style:{fontSize:"2rem"}}),e.jsxs("div",{className:"flex-grow-1 d-flex flex-column justify-content-center",children:[e.jsx("span",{className:"fs-4 fw-bold",children:"Noticias"}),e.jsx("small",{className:"opacity-75",children:"Actualizaciones recientes del d√≠a"})]})]})})}),e.jsxs("div",{className:"row row-cols-1 row-cols-md-4 g-4 my-2 ",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"position-relative rounded-4 overflow-hidden",style:{height:"150px"},children:[e.jsx("img",{src:Yl,alt:"Ciudad nocturna",className:"w-100 h-100 position-absolute top-0 start-0 opacity-50",style:{objectFit:"cover"}}),e.jsxs("div",{className:"card h-100 bg-dark bg-opacity-25 text-white rounded-4 p-3 d-flex flex-row align-items-center position-relative",children:[e.jsx("i",{className:"bi bi-people-fill me-3",style:{fontSize:"4rem"}}),e.jsxs("div",{children:[e.jsx("h5",{className:"card-title mb-1",children:"Rosario"}),e.jsx("div",{className:"d-flex align-items-baseline",children:e.jsx("span",{className:"fs-1 fw-bold me-2",children:"10 Bis"})}),e.jsx("a",{href:"#",className:"text-white-50 text-decoration-underline small",children:"Ver opciones articulo"})]})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"position-relative rounded-4 overflow-hidden",style:{height:"150px"},children:[e.jsx("img",{src:ra,alt:"Ciudad nocturna",className:"w-100 h-100 position-absolute top-0 start-0 opacity-50",style:{objectFit:"cover"}}),e.jsxs("div",{className:"card h-100 bg-dark bg-opacity-25 text-white rounded-4 p-3 d-flex flex-row align-items-center position-relative",children:[e.jsx("i",{className:"bi bi-camera-fill me-3",style:{fontSize:"4rem"}}),e.jsxs("div",{children:[e.jsx("h5",{className:"card-title mb-1",children:"Capturas"}),e.jsx("div",{className:"d-flex align-items-baseline",children:e.jsx("span",{className:"fs-2 fw-bold me-2",children:"Personas"})}),e.jsx("a",{href:"#",className:"text-white-50 text-decoration-underline small",children:"Ver opciones"})]})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"position-relative rounded-4 overflow-hidden",style:{height:"150px"},children:[e.jsx("img",{src:Zl,alt:"Ciudad nocturna",className:"w-100 h-100 position-absolute top-0 start-0 opacity-50",style:{objectFit:"cover"}}),e.jsxs("div",{className:"card h-100 bg-dark bg-opacity-25 text-white rounded-4 p-3 d-flex flex-row align-items-center position-relative",children:[e.jsx("i",{className:"bi bi-car-front me-3",style:{fontSize:"4rem"}}),e.jsxs("div",{children:[e.jsx("h5",{className:"card-title mb-1",children:"Capturas"}),e.jsx("div",{className:"d-flex align-items-baseline",children:e.jsx("span",{className:"fs-2 fw-bold me-2",children:"Veh√≠culos"})}),e.jsx("a",{href:"#",className:"text-white-50 text-decoration-underline small",children:"Ver opciones"})]})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"position-relative rounded-4 overflow-hidden",style:{height:"150px"},children:[e.jsx("img",{src:la,alt:"Ciudad nocturna",className:"w-100 h-100 position-absolute top-0 start-0 opacity-50",style:{objectFit:"cover"}}),e.jsxs("div",{className:"card h-100 bg-dark bg-opacity-25 text-white rounded-4 p-3 d-flex flex-row align-items-center position-relative",children:[e.jsx("i",{className:"bi bi-currency-exchange me-3",style:{fontSize:"4rem"}}),e.jsxs("div",{children:[e.jsx("h5",{className:"card-title mb-1",children:"Buscados"}),e.jsx("div",{className:"d-flex align-items-baseline",children:e.jsx("span",{className:"fs-3 fw-bold me-2",children:"Capturas"})}),e.jsx("a",{href:"#",className:"text-white-50 text-decoration-underline small",children:"Ver opciones"})]})]})]})})]})]})})},Xl=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");return a.useEffect(()=>{const i=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(i)},[]),e.jsxs(e.Fragment,{children:[e.jsx(Jl,{}),s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Galeria - Cx2"})}):e.jsxs("div",{style:{background:t,transition:"background 0.8s ease-in-out"},children:[e.jsxs("div",{className:"min-vh-100",children:[e.jsx(ve,{}),e.jsx(Ql,{})]}),e.jsx(je,{}),e.jsx(Ce,{setThemeBackgroundColor:n})]})]})},Kl=()=>e.jsx(e.Fragment,{children:e.jsx(Xl,{})});function en({onOpenChat:s}){const r=JSON.parse(localStorage.getItem("user")),t=r==null?void 0:r.email,[n,i]=a.useState([]),[l,o]=a.useState(!0),[c,p]=a.useState(null),[b,m]=a.useState([]),[j,x]=a.useState(!1),[h,d]=a.useState(null),[g,u]=a.useState({}),[f,v]=a.useState({}),N=a.useRef(null),S=a.useRef(null),k=y=>{try{let _=0;for(let M=0;M<y.length;M++)_=y.charCodeAt(M)+((_<<5)-_);return`hsl(${Math.abs(_)%360}, 55%, 55%)`}catch{return`hsl(${Math.random()*360}, 55%, 55%)`}};a.useEffect(()=>{const y=ye(G(F,"users")),_=Me(y,M=>{const E=[];M.forEach(I=>{const P=I.data();P!=null&&P.email&&P.email!==t&&E.push(P)}),i(E),o(!1)});return()=>_()},[t]),a.useEffect(()=>{if(!t)return;const y=[];return n.forEach(_=>{const M=[t,_.email].sort().join("_"),E=G(F,"mensajes_privados",M,"mensajes"),I=ye(E,Le("timestamp","asc")),P=Me(I,q=>{let Z=0;q.forEach(H=>{var V;const A=H.data();A.de===_.email&&!((V=A.vistoPor)!=null&&V.includes(t))&&Z++}),u(H=>({...H,[_.email]:Z}))});y.push(P)}),()=>y.forEach(_=>_())},[n,t]),a.useEffect(()=>{if(!t||n.length===0)return;const y=[];return n.forEach(_=>{const M=[t,_.email].sort().join("_"),E=$(F,"mensajes_privados",M),I=Me(E,P=>{const q=P.data();q!=null&&q.ultimoTimestamp&&v(Z=>{var H,A;return{...Z,[_.email]:((A=(H=q.ultimoTimestamp).toMillis)==null?void 0:A.call(H))||Date.now()}})});y.push(I)}),()=>y.forEach(_=>_())},[n,t]);const w=async y=>{if(!t||!y)return;N.current&&(N.current(),N.current=null),S.current&&(S.current(),S.current=null);const _=[t,y].sort().join("_");p(_),d(y);const M=$(F,"mensajes_privados",_);(await De(M)).exists()||await we(M,{participantes:[t,y],escribiendo:{[t]:!1,[y]:!1},ultimoMensaje:"",ultimoTimestamp:Ae()});const I=G(F,"mensajes_privados",_,"mensajes"),P=ye(I,Le("timestamp","asc")),q=Me(P,Z=>{const H=[];Z.forEach(A=>H.push({id:A.id,...A.data()})),m(H),s({chatId:_,receptorEmail:y,mensajes:H,enviarMensaje:C,receptorTyping:j})});N.current=q,S.current=Me(M,Z=>{var A;const H=Z.data()||{};x(!!((A=H.escribiendo)!=null&&A[y]))})};a.useEffect(()=>{c&&b.forEach(async y=>{var _;(_=y.vistoPor)!=null&&_.includes(t)||await K($(F,"mensajes_privados",c,"mensajes",y.id),{vistoPor:[...y.vistoPor||[],t]})})},[b,c,t]);const C=async y=>{!y.trim()||!c||(await Ie(G(F,"mensajes_privados",c,"mensajes"),{de:t,texto:y,timestamp:Ae(),vistoPor:[t]}),await K($(F,"mensajes_privados",c),{ultimoMensaje:y,ultimoTimestamp:Ae()}))};return e.jsxs("div",{className:"card bg-light rounded-4 shadow-sm h-100",children:[e.jsx("div",{className:"card-header text-center fw-bold",children:"üí¨ Chats"}),e.jsx("div",{className:"overflow-auto",style:{maxHeight:"70vh"},children:l?e.jsx("div",{className:"text-center py-3",children:e.jsx("div",{className:"spinner-border"})}):e.jsx("ul",{className:"list-group list-group-flush",children:[...n].sort((y,_)=>{const M=f[y.email]||0;return(f[_.email]||0)-M}).map(y=>{const _=((y==null?void 0:y.nombre)||"?")[0].toUpperCase(),M=k(y==null?void 0:y.email),E=g[y.email]||0;return e.jsxs("li",{className:"list-group-item border-0 border-bottom d-flex align-items-center",role:"button",onClick:()=>w(y.email),children:[e.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:40,height:40,background:M,color:"white",fontWeight:"700"},children:_}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-bold",style:{fontSize:"0.9rem"},children:y.nombre}),e.jsx("div",{className:"text-muted",style:{fontSize:"0.75rem"},children:y.dependencia})]}),E>0&&e.jsx("span",{className:"badge bg-primary rounded-pill px-2 py-1",children:E})]},y.email)})})})]})}function sn({chatId:s,currentEmail:r,receptorEmail:t,onClose:n}){const[i,l]=a.useState([]),[o,c]=a.useState(""),[p,b]=a.useState(!1),[m,j]=a.useState(!0),[x,h]=a.useState(!1),[d,g]=a.useState(!1),u=a.useRef(null),f=["üòÄ","üòÅ","üòÇ","ü§£","üòä","üòç","üòò","üòé","ü§©","üò¢","üò≠","üò°","üëã","üëç","üëå","üôè","üî•","üéâ","‚ù§Ô∏è","üíî","üíØ","‚úîÔ∏è"];a.useEffect(()=>{if(!s)return;const C=G(F,"mensajes_privados",s,"mensajes"),y=ye(C,Le("timestamp","asc")),_=Me(y,M=>{const E=M.docs.map(I=>({id:I.id,...I.data()}));l(E),j(!1)});return()=>_()},[s]),a.useEffect(()=>{if(!s)return;const C=$(F,"mensajes_privados",s),y=Me(C,_=>{var E;const M=_.data()||{};b(!!((E=M.escribiendo)!=null&&E[t]))});return()=>y()},[s,t]),a.useEffect(()=>{if(!s||!r)return;const C=$(F,"mensajes_privados",s);return K(C,{[`escribiendo.${r}`]:o.length>0}).catch(()=>{}),()=>K(C,{[`escribiendo.${r}`]:!1}).catch(()=>{})},[o,s,r]);const v=async()=>{!o.trim()||!s||(await Ie(G(F,"mensajes_privados",s,"mensajes"),{de:r,texto:o,timestamp:Ae(),vistoPor:[r]}),await K($(F,"mensajes_privados",s),{ultimoMensaje:o,ultimoTimestamp:Ae()}),c(""),h(!1))};a.useEffect(()=>{var C;(C=u.current)==null||C.scrollIntoView({behavior:"smooth"})},[i,d]);const N=i.length,S=i.slice(Math.max(N-6,0)),k=i.slice(0,Math.max(N-6,0)),w=C=>{c(y=>y+C)};return e.jsxs("div",{className:"card shadow-lg rounded-4 border-0 d-flex flex-column",style:{height:"76vh"},children:[e.jsxs("div",{className:"card-header bg-primary bg-opacity-75 text-white d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"m-0",children:["Chat con ",e.jsx("strong",{children:t}),e.jsx("strong",{className:"titilar",children:" üí¨"})]}),e.jsx("button",{className:"btn btn-light btn-sm",onClick:n,children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsxs("div",{className:"card-body flex-grow-1 overflow-auto bg-light",children:[m?e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx("div",{className:"spinner-border text-primary"})}):e.jsxs(e.Fragment,{children:[!d&&k.length>0&&e.jsx("div",{className:"text-center mb-3",children:e.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>g(!0),children:"Ver mensajes anteriores"})}),d&&k.map(C=>{const y=C.de===r;return e.jsx("div",{className:`d-flex mb-2 ${y?"justify-content-end":"justify-content-start"}`,children:e.jsx("div",{className:`p-2 rounded-3 shadow-sm ${y?"bg-primary text-white":"bg-white"}`,style:{maxWidth:"75%"},children:C.texto})},C.id)}),S.map(C=>{var M;const y=C.de===r,_=(M=C.vistoPor)==null?void 0:M.includes(t);return e.jsx("div",{className:`d-flex mb-2 ${y?"justify-content-end":"justify-content-start"}`,children:e.jsxs("div",{className:`p-2 rounded-3 shadow-sm ${y?"bg-primary text-white":"bg-white"}`,style:{maxWidth:"75%"},children:[C.texto,y&&e.jsx("span",{className:"ms-2 small",children:_?"‚úì‚úì":"‚úì"})]})},C.id)})]}),p&&e.jsx("div",{className:"text-success small mb-2",children:"Escribiendo..."}),e.jsx("div",{ref:u})]}),x&&e.jsxs("div",{className:"border-top p-2 bg-white",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("strong",{className:"text-secondary",children:"Emojis"}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>h(!1),children:e.jsx("i",{className:"bi bi-x-lg"})})]}),e.jsx("div",{className:"d-flex flex-wrap",style:{gap:"8px"},children:f.map((C,y)=>e.jsx("button",{className:"btn btn-light fs-4",onClick:()=>w(C),children:C},y))})]}),e.jsx("div",{className:"card-footer bg-white",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("button",{className:"btn btn-outline-secondary me-2",onClick:()=>h(C=>!C),children:"üòÉ"}),e.jsx("input",{type:"text",className:"form-control me-2",placeholder:"Escribe un mensaje...",value:o,onChange:C=>c(C.target.value),onKeyDown:C=>C.key==="Enter"&&v()}),e.jsx("button",{className:"btn btn-primary",onClick:v,children:e.jsx("i",{className:"bi bi-send-fill"})})]})})]})}const an="/svg/undraw_add_files_re_v09g.svg",tn=()=>{const[s,r]=a.useState(!0),[t,n]=a.useState(null),[i,l]=a.useState(()=>localStorage.getItem("bg-gradiante3")||"#f73378");a.useEffect(()=>{const p=setTimeout(()=>r(!1),1e3);return()=>clearTimeout(p)},[]);const o=JSON.parse(localStorage.getItem("user")),c=o==null?void 0:o.email;return e.jsx(e.Fragment,{children:s?e.jsx("div",{className:"min-vh-100 d-flex justify-content-center align-items-center bg-dark text-white",children:e.jsx(se,{leyendaSet:"Chat Rom"})}):e.jsx("div",{style:{background:i,transition:"background 0.8s ease-in-out"},children:e.jsxs("div",{className:"min-vh-100 d-flex flex-column",children:[e.jsx(ve,{}),e.jsxs("div",{className:"container flex-grow-1 my-4",children:[e.jsxs("div",{className:"row h-100",style:{minHeight:"80vh"},children:[e.jsx("div",{className:"col-4 h-100 overflow-auto",children:e.jsx(en,{onOpenChat:n})}),e.jsx("div",{className:"col-8 h-100 overflow-auto",children:t?e.jsx(sn,{chatId:t.chatId,currentEmail:c,receptorEmail:t.receptorEmail,onClose:()=>n(null)}):e.jsxs("div",{className:"text-center text-white mt-5",children:[e.jsx("h5",{children:"Selecciona un chat"}),e.jsx("div",{className:"d-flex justify-content-center mt-4",children:e.jsx("img",{src:an,alt:"Selecciona un chat",style:{width:"60%",maxWidth:"400px"}})})]})})]}),e.jsx(je,{})]}),e.jsx(Ce,{setThemeBackgroundColor:l})]})})})},rn=()=>e.jsx(e.Fragment,{children:e.jsx(tn,{})}),ln=()=>e.jsx(Ta,{children:e.jsx(La,{children:e.jsx("main",{children:e.jsxs(Ra,{children:[e.jsx(pe,{path:"/",element:e.jsx(Ha,{})}),e.jsx(pe,{path:"/about",element:e.jsx(Wa,{})}),e.jsx(pe,{path:"/unauthorized",element:e.jsx(Vl,{})}),e.jsx(pe,{path:"*",element:e.jsx(Ya,{})}),e.jsx(pe,{path:"/dashboard",element:e.jsx(fe,{children:e.jsx(lt,{})})}),e.jsx(pe,{path:"/PantallaSynthwave",element:e.jsx(fe,{children:e.jsx(Kl,{})})}),e.jsx(pe,{path:"/chatrom",element:e.jsx(fe,{children:e.jsx(rn,{})})}),e.jsx(pe,{path:"/galeriacx2",element:e.jsx(fe,{children:e.jsx(ht,{})})}),e.jsx(pe,{path:"/validaringreso10Bis",element:e.jsx(fe,{children:e.jsx(jt,{})})}),e.jsx(pe,{path:"/validarsalida10Bis",element:e.jsx(fe,{children:e.jsx(Ct,{})})}),e.jsx(pe,{path:"/notificaciones",element:e.jsx(fe,{children:e.jsx(_t,{})})}),e.jsx(pe,{path:"/FormularioPageDev2",element:e.jsx(fe,{allowedRoles:["admin","ceccop","911/ceccop","supervisor c"],children:e.jsx(At,{})})}),e.jsx(pe,{path:"/FormularioVehiculo",element:e.jsx(fe,{allowedRoles:["admin","911","911/ceccop"],children:e.jsx(Fr,{})})}),e.jsx(pe,{path:"/Formulariobuscados",element:e.jsx(fe,{allowedRoles:["admin","ceccop","911/ceccop","supervisor c"],children:e.jsx($r,{})})}),e.jsx(pe,{path:"/notificaionesNew",element:e.jsx(fe,{allowedRoles:["admin","911","ceccop","supervisor c"],children:e.jsx(hl,{})})}),e.jsx(pe,{path:"/cx2userpaneladmin",element:e.jsx(fe,{allowedRoles:["admin"],children:e.jsx(Bl,{})})}),e.jsx(pe,{path:"/usercsvpage",element:e.jsx(fe,{allowedRoles:["admin","911","ceccop","911/ceccop"],children:e.jsx(ql,{})})}),e.jsx(pe,{path:"/GaleriaBuscados",element:e.jsx(fe,{children:e.jsx(Vr,{})})}),e.jsx(pe,{path:"/GaleriaVehiculos",element:e.jsx(fe,{children:e.jsx(Mr,{})})}),e.jsx(pe,{path:"/panelcontrol10dev2",element:e.jsx(fe,{allowedRoles:["admin"],children:e.jsx(Ui,{})})}),e.jsx(pe,{path:"/panelcontroldev2",element:e.jsx(fe,{allowedRoles:["admin","supervisor c"],children:e.jsx(li,{})})}),e.jsx(pe,{path:"/panelcontrolvehiculos",element:e.jsx(fe,{allowedRoles:["admin"],children:e.jsx(il,{})})}),e.jsx(pe,{path:"/panelcontrolbuscados",element:e.jsx(fe,{allowedRoles:["admin","supervisor c"],children:e.jsx($l,{})})}),e.jsx(pe,{path:"/informes",element:e.jsx(fe,{allowedRoles:["admin","911","ceccop","911/ceccop"],children:e.jsx(ir,{})})}),e.jsx(pe,{path:"/controlvehicular",element:e.jsx(fe,{allowedRoles:["admin","911","ceccop","911/ceccop"],children:e.jsx(Wl,{})})}),e.jsx(pe,{path:"/informespost",element:e.jsx(fe,{children:e.jsx(pr,{})})}),e.jsx(pe,{path:"/denuncia",element:e.jsx(fe,{allowedRoles:["admin"],children:e.jsx(Wi,{})})}),e.jsx(pe,{path:"/denunciasimple",element:e.jsx(fe,{allowedRoles:["admin"],children:e.jsx(kr,{})})})]})})})});$a(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(ln,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(s=>console.log("SW registrado:",s)).catch(s=>console.error("Error SW:",s))});
